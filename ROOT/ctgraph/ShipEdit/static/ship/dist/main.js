define("anji/ship/shipTemplate",[],function(a,b,c){"use strict";var d=a("gojs/go"),e=d.GraphObject.make,f=function(a,b,c){a.add(b.prototype.className,c)},g=function(b,c){var d=a("./container"),e=a("./slot");switch(c.part.data.category){case e.prototype.className:if(""!=c.part.data.no)return;b.diagram.selection.each(function(a){a.data.category===d.prototype.className&&a.data.setProperty("pos",c.part.data.pos)})}},h=function(b){var c=a("./shareData");c.diagram=b,b.addDiagramListener("SelectionMoved",function(a){a.subject.each(function(a){a.data.onMoved()})});var h=a("./slot");f(b.nodeTemplateMap,h,e(d.Node,"Auto",{locationSpot:d.Spot.Center,isLayoutPositioned:!1,deletable:!1,movable:!1,mouseDrop:g},e(d.Shape,"Rectangle",{fill:"white",cursor:"pointer",height:50,width:50,strokeWidth:1})));var i=a("./label");f(b.nodeTemplateMap,i,e(d.Node,"Auto",{locationSpot:d.Spot.Center,isLayoutPositioned:!1,deletable:!1,movable:!1,selectable:!1},e(d.Shape,"Rectangle",{fill:"white",cursor:"pointer",height:50,width:50,strokeWidth:0},new d.Binding("fill","color")),e(d.TextBlock,{font:"bold 14pt sans-serif",stroke:"#333",margin:6,editable:!1,textAlign:"center"},new d.Binding("text","no"))));var j=a("./container");f(b.nodeTemplateMap,j,e(d.Node,"Auto",{locationSpot:d.Spot.Center,deletable:!1,isLayoutPositioned:!1},e(d.Shape,"Rectangle",{fill:"white",cursor:"pointer",height:50,width:50},new d.Binding("strokeWidth","no",function(a){return""==a?1:0}),new d.Binding("fill","color")),e(d.Panel,"Vertical",e(d.TextBlock,{font:"bold 10pt sans-serif",stroke:"#333",margin:0,editable:!1,textAlign:"left",alignment:d.Spot.TopLeft},new d.Binding("text","no",function(a){return a.substr(0,4)})),e(d.TextBlock,{font:"8pt sans-serif",stroke:"#333",margin:0,isMultiline:!0,editable:!1,textAlign:"right",alignment:d.Spot.TopRight},new d.Binding("text","no",function(a){return a.substr(4)})))));var k=a("./group");f(b.groupTemplateMap,k,e(d.Group,"Vertical",{locationSpot:d.Spot.Center,movable:!1,deletable:!1},e(d.Panel,"Auto",e(d.Shape,"Rectangle",{strokeWidth:0,fill:"rgba(128,128,128,0)"}),e(d.Placeholder))));var l=a("./bottomTitleGroup");f(b.groupTemplateMap,l,e(d.Group,"Vertical",{locationSpot:d.Spot.Center,movable:!1,deletable:!1},e(d.Panel,"Auto",e(d.Shape,"Rectangle",{strokeWidth:0,fill:"rgba(128,128,128,0)"}),e(d.Placeholder)),e(d.TextBlock,{alignment:d.Spot.Center,font:"Bold 14pt Sans-Serif"},new d.Binding("text","no"))));var m=a("./topTitleGroup");f(b.groupTemplateMap,m,e(d.Group,"Vertical",{locationSpot:d.Spot.Center,movable:!1,deletable:!1},e(d.TextBlock,{alignment:d.Spot.Center,font:"Bold 14pt Sans-Serif"},new d.Binding("text","no")),e(d.Panel,"Auto",e(d.Shape,"Rectangle",{strokeWidth:0,fill:"rgba(128,128,128,0)"}),e(d.Placeholder))))};c.exports={initTemplate:h}}),define("anji/ship/container",["./shipObject","./shareData","./dragComputation","./slot","gojs/go"],function(a,b,c){"use strict";function d(a){this.color="green",this.no=a,e.call(this),f.call(this)}var e=a("./shipObject"),f=a("./dragComputation"),g=a("./shareData");e.inherit(d,e),d.prototype.getStowLoc=function(){return this.stowLoc},d.prototype.setStowLoc=function(a){this.stowLoc=a;var b=a.substr(0,3);for(var c in g.objMap.ShipBay)if(g.objMap.ShipBay[c].no==b){for(var d=-1,e=a.substr(3,2),f=a.substr(5,2),h=g.objMap.ShipBay[c].deckBay.rows[0].slots,i=0;h.length>i;++i)if(h[i].no==f){d=i;break}if(d>=0){var j=g.objMap.ShipBay[c].deckBay.rows;for(var k in j)if(j[k].no==e){this.node.move(j[k].slots[d].node.position);break}break}for(var h=g.objMap.ShipBay[c].cabinBay.rows[0].slots,i=0;h.length>i;++i)if(h[i].no==f){d=i;break}if(d>=0){j=g.objMap.ShipBay[c].cabinBay.rows;for(var k in j)if(j[k].no==e){this.node.location=j[k].slots[d].node.location;break}}break}},d.prototype.onDragComputation=function(b,c){var e=a("./slot"),f=this.findAnjiObjectAt(e,c);if(null===f)return b.location;var g=this.findAnjiObjectAt(d,c);return null!==g?b.location:f.location},d.prototype.onMoved=function(){var b=a("./slot"),c=this.findAnjiObjectAt(b,this.node.location);if(c){var d=c.containingGroup,e=d.data.slots.indexOf(c.data),f=d.containingGroup,g=f.containingGroup;this.stowLoc=g.data.no+d.data.no+f.data.rows[0].slots[e].no,console.log(this.stowLoc)}},d.prototype.className="Container",c.exports=d}),define("anji/ship/shipObject",["./shareData","gojs/go"],function(a,b,c){"use strict";function d(){var a=new Date;if(null==e.diagram)throw"未初始化全局静态变量share.diagram";var b=this.__proto__,c=e.diagram.nodeTemplateMap;for(this.isGroup&&(c=e.diagram.groupTemplateMap);null!=b;){if(c.contains(b.className)){this.category=b.className;break}b=b.__proto__}e.diagram.model.addNodeData(this),void 0===e.objMap[this.className]&&(e.objMap[this.className]=[]),e.objMap[this.className].push(this),this.node=e.diagram.findNodeForData(this);var d=new Date;console.log("Call ShipObject():"+(d-a))}var e=a("./shareData");d.inherit=function(a,b){var c=function(){};c.prototype=b.prototype;var d=a.prototype.constructor;a.prototype=new c,a.prototype.constructor=d},d.prototype.setProperty=function(a,b){this[a]=b,this.node.updateTargetBindings()},d.prototype.setProperties=function(a){if(a instanceof Object){for(var b in a)this[b]=a[b];this.node.updateTargetBindings()}},d.prototype.onMoved=function(){},d.prototype.className="ShipObject",d.prototype.findAnjiObjectAt=function(a,b){var c=function(a){return a.part},d=function(b){return b.data instanceof a?!0:!1};return e.diagram.findObjectAt(b,c,d)},c.exports=d}),define("anji/ship/shareData",["gojs/go"],function(a,b,c){"use strict";var d=a("gojs/go");c.exports={objMap:{},diagram:null,slotSize:new d.Size(50,50)}}),define("anji/ship/dragComputation",[],function(a,b,c){"use strict";function d(){this.node.dragComputation=function(a,b,c){return this.data.onDragComputation(a,b,c)}}c.exports=d}),define("anji/ship/slot",["./shipObject","./shareData","gojs/go"],function(a,b,c){"use strict";function d(){var a=new Date;this.color="white",e.call(this);var b=new Date;console.log("Call Slot():"+(b-a))}var e=a("./shipObject");e.inherit(d,e),d.prototype.className="Slot",c.exports=d}),define("anji/ship/label",["./shipObject","./shareData","gojs/go"],function(a,b,c){"use strict";function d(a){var b=new Date;this.no=a,this.color="white",e.call(this);var c=new Date;console.log("Call Label():"+(c-b))}var e=a("./shipObject");e.inherit(d,e),d.prototype.className="Label",c.exports=d}),define("anji/ship/group",["./shipObject","./shareData","gojs/go"],function(a,b,c){"use strict";function d(){var a=new Date;this.isGroup=!0,e.call(this);var b=new Date;console.log("Call Group():"+(b-a))}var e=a("./shipObject");e.inherit(d,e),d.prototype.className="Group",c.exports=d}),define("anji/ship/bottomTitleGroup",["./shipObject","./shareData","./group","gojs/go"],function(a,b,c){"use strict";function d(a){this.no=a,f.call(this)}var e=a("./shipObject"),f=a("./group");e.inherit(d,f),d.prototype.className="BottomTitleGroup",c.exports=d}),define("anji/ship/topTitleGroup",["./shipObject","./shareData","./group","gojs/go"],function(a,b,c){"use strict";function d(a){this.no=a,f.call(this)}var e=a("./shipObject"),f=a("./group");e.inherit(d,f),d.prototype.className="TopTitleGroup",c.exports=d}),define("anji/ship/shipBay",["./shipObject","./shareData","./topTitleGroup","./group","./deckBay","./bayBase","./deckRow","./rowBase","./slot","./label","./bottomTitleGroup","./cabinBay","./cabinRow","gojs/go"],function(a,b,c){"use strict";function d(a,b,c){var d=new Date;g.call(this,a),null!=b?(this.deckBay=new h(b),this.deckBay.node.containingGroup=this.node):this.deckBay=null,null!=c?(this.cabinBay=new i(c),this.cabinBay.node.containingGroup=this.node,this.cabinBay.node.move(new e.Point(0,2*j.slotSize.height))):this.cabinBay=null,this.node.locationSpot=new e.Spot(.5,0,0,this.deckBay.tierCount*j.slotSize.height);var f=new Date;console.log("Call ShipBay():"+(f-d))}var e=a("gojs/go"),f=a("./shipObject"),g=a("./topTitleGroup"),h=a("./deckBay"),i=a("./cabinBay"),j=a("./shareData");f.inherit(d,g),d.prototype.className="ShipBay",c.exports=d}),define("anji/ship/deckBay",["./shipObject","./shareData","./bayBase","./group","./deckRow","./rowBase","./slot","./label","./bottomTitleGroup","gojs/go"],function(a,b,c){"use strict";function d(a){g.call(this),f.call(this,a)}var e=a("./shipObject"),f=a("./bayBase"),g=a("./group"),h=a("./deckRow");e.inherit(d,g),d.prototype.createRow=function(a,b){return new h(a,b)},d.prototype.className="DeckBay",c.exports=d}),define("anji/ship/bayBase",["./shareData","gojs/go"],function(a,b,c){"use strict";var d=a("gojs/go"),e=a("./shareData"),f=function(a){var b=new Date;this.rows=[];var c;this.tierCount=0,this.addRow=function(a){this.rows.push(a),a.node.containingGroup=this.node,a.slots.length>this.tierCount&&(this.tierCount=a.slots.length)};var f=1;for(var g in a)c=this.createRow(g,a[g]),this.addRow(c),c.node.move(new d.Point(f*e.slotSize.width,0)),++f;var h=new Date;console.log("Call BayBase():"+(h-b))};c.exports=f}),define("anji/ship/deckRow",["./shipObject","./shareData","./rowBase","./slot","./label","./bottomTitleGroup","./group","gojs/go"],function(a,b,c){"use strict";function d(a,b){h.call(this,a),g.call(this,b)}var e=a("gojs/go"),f=a("./shipObject"),g=a("./rowBase"),h=a("./bottomTitleGroup"),i=a("./shareData");f.inherit(d,h),d.prototype.initPosition=function(){var a=new e.Point(0,0),b=this.slots;for(var c in b)b[c].node.move(a),a.y-=i.slotSize.height},d.prototype.className="DeckRow",c.exports=d}),define("anji/ship/rowBase",["./slot","./shipObject","./shareData","./label","gojs/go"],function(a,b,c){"use strict";var d=a("./slot"),e=a("./label"),f=function(a){var b=new Date;this.slots=[];var c;if(this.addSlot=function(a){this.slots.push(a),a.node.containingGroup=this.node},a instanceof Array)for(var f=0;a.length>f;++f)c=new e(a[f]),this.addSlot(c);else{if(isNaN(a))throw"非法参数";for(var f=0;a>f;++f)c=new d(""),this.addSlot(c)}this.initPosition();var g=new Date;console.log("Call RowBase():"+(g-b))};c.exports=f}),define("anji/ship/cabinBay",["./shipObject","./shareData","./bayBase","./group","./cabinRow","./rowBase","./slot","./label","./topTitleGroup","gojs/go"],function(a,b,c){"use strict";function d(a){g.call(this),f.call(this,a)}var e=a("./shipObject"),f=a("./bayBase"),g=a("./group"),h=a("./cabinRow");e.inherit(d,g),d.prototype.createRow=function(a,b){return new h(a,b)},d.prototype.className="CabinBay",c.exports=d}),define("anji/ship/cabinRow",["./shipObject","./shareData","./rowBase","./slot","./label","./topTitleGroup","./group","gojs/go"],function(a,b,c){"use strict";function d(a,b){h.call(this,a),g.call(this,b)}var e=a("gojs/go"),f=a("./shipObject"),g=a("./rowBase"),h=a("./topTitleGroup"),i=a("./shareData");f.inherit(d,h),d.prototype.initPosition=function(){var a=new e.Point(0,0),b=this.slots;for(var c in b)b[c].node.move(a),a.y+=i.slotSize.height},d.prototype.className="CabinRow",c.exports=d}),define("anji/ship/main",["./shipTemplate","./container","./shipObject","./shareData","./dragComputation","./slot","./label","./group","./bottomTitleGroup","./topTitleGroup","./shipBay","./deckBay","./bayBase","./deckRow","./rowBase","./cabinBay","./cabinRow","gojs/go"],function(a){"use strict";function b(a,b,c){return i("ContextMenuButton",i(h.TextBlock,a),{click:b},c?new h.Binding("visible","",c).ofObject():{})}function c(a){var b="Node "+a.key+": "+a.text+"\n";return b+=a.group?"member of "+a.group:"top-level node"}function d(a){var b=a.adornedPart,c=b.memberParts.count,d=0;return b.memberParts.each(function(a){a instanceof h.Link&&d++}),"Group "+b.data.key+": "+b.data.text+"\n"+c+" members including "+d+" links"}function e(a){return"Model:\n"+a.nodeDataArray.length+" nodes, "+a.linkDataArray.length+" links"}function f(a){var b=(2*a+1).toString();return b.split(),b[2]?b:b[1]?"0"+b:"00"+b}function g(){var b=new Date;s=b-r,console.log("layout time :"+s);var c=a("./container");new c("TENU6937241").setStowLoc("0010384"),new c("TMOU7895265").setStowLoc("0030510"),new c("TESU2863951").setStowLoc("0050006")}var h=a("gojs/go"),i=h.GraphObject.make,j=i(h.Diagram,"myDiagramDiv",{initialContentAlignment:h.Spot.Center,allowLink:!1,InitialLayoutCompleted:g,layout:i(h.GridLayout,{spacing:new h.Size(10,10),sorting:h.GridLayout.Forward}),"clickCreatingTool.archetypeNodeData":{text:"Node",color:"white"},"commandHandler.archetypeGroupData":{text:"Group",isGroup:!0,color:"blue"},"undoManager.isEnabled":!0}),k=i(h.Adornment,"Vertical",b("Properties",function(a,b){var e=b.part,f=e.adornedPart;f instanceof h.Link?alert(linkInfo(f.data)):f instanceof h.Group?alert(d(e)):alert(c(f.data))}),b("Cut",function(a){a.diagram.commandHandler.cutSelection()},function(a){return a.diagram.commandHandler.canCutSelection()}),b("Copy",function(a){a.diagram.commandHandler.copySelection()},function(a){return a.diagram.commandHandler.canCopySelection()}),b("Paste",function(a){a.diagram.commandHandler.pasteSelection(a.diagram.lastInput.documentPoint)},function(a){return a.diagram.commandHandler.canPasteSelection()}),b("Delete",function(a){a.diagram.commandHandler.deleteSelection()},function(a){return a.diagram.commandHandler.canDeleteSelection()}),b("Undo",function(a){a.diagram.commandHandler.undo()},function(a){return a.diagram.commandHandler.canUndo()}),b("Redo",function(a){a.diagram.commandHandler.redo()},function(a){return a.diagram.commandHandler.canRedo()}),b("Group",function(a){a.diagram.commandHandler.groupSelection()},function(a){return a.diagram.commandHandler.canGroupSelection()}),b("Ungroup",function(a){a.diagram.commandHandler.ungroupSelection()},function(a){return a.diagram.commandHandler.canUngroupSelection()}));j.groupTemplate=i(h.Group,"Vertical",{selectionObjectName:"PANEL",ungroupable:!0},i(h.TextBlock,{font:"bold 19px sans-serif",isMultiline:!1,editable:!0},new h.Binding("text","text").makeTwoWay(),new h.Binding("stroke","color")),i(h.Panel,"Auto",{name:"PANEL"},i(h.Shape,"Rectangle",{fill:"rgba(128,128,128,0.2)",stroke:"gray",strokeWidth:3}),i(h.Placeholder,{padding:10})),{toolTip:i(h.Adornment,"Auto",i(h.Shape,{fill:"#FFFFCC"}),i(h.TextBlock,{margin:4},new h.Binding("text","",d).ofObject())),contextMenu:k}),j.toolTip=i(h.Adornment,"Auto",i(h.Shape,{fill:"#FFFFCC"}),i(h.TextBlock,{margin:4},new h.Binding("text","",e))),j.contextMenu=i(h.Adornment,"Vertical",b("Paste",function(a){a.diagram.commandHandler.pasteSelection(a.diagram.lastInput.documentPoint)},function(a){return a.diagram.commandHandler.canPasteSelection()}),b("Undo",function(a){a.diagram.commandHandler.undo()},function(a){return a.diagram.commandHandler.canUndo()}),b("Redo",function(a){a.diagram.commandHandler.redo()},function(a){return a.diagram.commandHandler.canRedo()})),j.model=new h.GraphLinksModel([],[]);var l=a("./shipTemplate");l.initTemplate(j);var m=a("./shipBay");console.log("begin create");for(var n=new Date,o=n,p=4,q=0;p>q;++q){new m(f(q),{"":["82","84","86","88"],"05":4,"03":4,"01":4,"00":4,"02":4,"04":4,"06":4},{"":["12","10","08","06","04","02"],"05":3,"03":4,"01":5,"00":6,"02":5,"04":4,"06":3});var r=new Date,s=r-o;o=r,console.log(q+1+"/"+p+" created use time :"+s)}r=new Date,s=r-n,console.log("create time :"+s)});