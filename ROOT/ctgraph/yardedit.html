<!DOCTYPE HTML>
<html>
<head>
    <title>堆场编辑</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet"href="css/main.css"type="text/css"/>
    <link rel="stylesheet"href="main/common/anjiUi/css/bootstrap.min.css"type="text/css"/>
    <link rel="stylesheet"href="main/common/anjiUi/css/jquery-ui-1.10.0.custom.css"type="text/css"/>

    <link type="text/css" rel="stylesheet" href="/wb/libs/ext/resources/ext-theme-gray/ext-theme-gray-all-debug.css">
    <link type="text/css" rel="stylesheet" href="/wb/css/style-debug.css">
    <script src="main/common/anjiUi/js/jquery-1.9.0.min.js"></script>
    <script src="main/common/anjiUi/js/bootstrap.min.js"></script>
    <script src="main/common/anjiUi/js/jquery-ui-1.10.0.custom.min.js"></script>
    <script src="main/common/anjiUi/js/jqcn.js"></script>

    <script src="/wb/script/locale/wb-lang-zh-debug.js"></script>
    <script src="/wb/libs/ext/ext-all-debug.js"></script>
    <script src="/wb/script/wb-debug.js"></script>
</head>
<body >

<div>
    <div id="menuBar">
    <ul id="nav">
        <li><a href="#">File</a>
            <ul>
                <li><a href="#" onclick="loadFile()">openFile</a></li>
                <li><a href="#" onclick="saveFile()">SaveFile</a></li>
            </ul>
        </li>
        <li><a href="#">Edit</a>
            <ul>
                <li><a id="Rename" href="#" onclick="rename()">Rename</a></li>
                <li><a id="undo" href="#" onclick="myDiagram.commandHandler.undo()">Undo</a></li>
                <li><a id="Redo" href="#" onclick="myDiagram.commandHandler.redo()">Redo</a></li>
                <li><a id="Cut" href="#" onclick="myDiagram.commandHandler.cutSelection()">Cut</a></li>
                <li><a id="Copy" href="#" onclick="myDiagram.commandHandler.copySelection()">Copy</a></li>
                <li><a id="Paste" href="#" onclick="myDiagram.commandHandler.pasteSelection()">Paste</a></li>
                <li><a id="Delete" href="#" onclick="myDiagram.commandHandler.deleteSelection()">Delete</a></li>
                <li><a id="SelectAll" href="#" onclick="myDiagram.commandHandler.selectAll()">Select All</a></li>
            </ul>
        </li>
        <li><a href="#">Align</a>
            <ul >
                <li><a id="AlignLeft" href="#" onclick="myDiagram.commandHandler.alignLeft()">Left Sides</a></li>
                <li><a id="AlignRight" href="#" onclick="myDiagram.commandHandler.alignRight()">Right Sides</a></li>
                <li><a id="AlignTop" href="#" onclick="myDiagram.commandHandler.alignTop()">Tops</a></li>
                <li><a id="AlignBottom" href="#" onclick="myDiagram.commandHandler.alignBottom()">Bottoms</a></li>
                <li><a id="AlignCenterX" href="#" onclick="myDiagram.commandHandler.alignCenterX()">Center X</a></li>
                <li><a id="AlignCenterY" href="#" onclick="myDiagram.commandHandler.alignCenterY()">Center Y</a></li>
            </ul>
        </li>
        <li><a href="#">Space</a>
            <ul >
                <li><a id="AlignRow" href="#" onclick="myDiagram.commandHandler.alignRow(askSpace())">In Row...</a></li>
                <li><a id="AlignColumn" href="#" onclick="myDiagram.commandHandler.alignColumn(askSpace())">In Column...</a></li>
            </ul>
        </li>
        <li><a href="#">Rotate</a>
            <ul>
                <li><a id="Rotate45" href="#" onclick="myDiagram.commandHandler.rotate(45)">45°</a></li>
                <li><a id="Rotate_45" href="#" onclick="myDiagram.commandHandler.rotate(-45)">-45°</a></li>
                <li><a id="Rotate90" href="#" onclick="myDiagram.commandHandler.rotate(90)">90°</a></li>
                <li><a id="Rotate_90" href="#" onclick="myDiagram.commandHandler.rotate(-90)">-90°</a></li>
                <li><a id="Rotate180" href="#" onclick="myDiagram.commandHandler.rotate(180)">180°</a></li>
            </ul>
        </li>
        <li><a href="#">Options</a>
            <ul>
                <li><a href="#"><input id="grid" type="checkbox" name="options" value="grid"  onclick="updateGridOption()">Grid</a></li>
                <li><a href="#"><input id="guidelines" type="checkbox" name="options" value="0"  onclick="updateGuidelinesOption()">Guidelines</a></li>
                <li><a href="#"><input id="snap" type="checkbox" name="options" value="0" onclick="updateSnapOption()">Snapping</a></li>
                <li><a href="#">Arrow Keys >></a>
                        <ul>
                            <li><a href="#"><input type="radio" name="arrow" id="move" onclick="arrowMode()" checked="checked">Move</a></li>
                            <li><a href="#"><input type="radio" name="arrow" id="select" onclick="arrowMode()">Select</a></li>
                            <li><a href="#"><input type="radio" name="arrow" id="scroll" onclick="arrowMode()">Scroll</a></li>
                        </ul>
                </li>
            </ul>
        </li>
        <li><a href="#">TestLoad</a>
            <ul>
                <li><a href="#" onclick="testLoadFile('car')">LoadCar</a></li>
                <li><a href="#" onclick="testLoadFile('frameCrane')">LoadFrameCrane</a></li>
                <li><a href="#" onclick="testLoadFile('quayCrane')">LoadQuayCrane</a></li>
                <li><a href="#" onclick="testLoadFile('parkingLot');">LoadParkingLot</a></li>
                <li><a href="#" onclick="testLoadFile('roadPoint');">LoadRoadPoint</a></li>
                <li><a href="#" onclick="testLoadFile('road');">LoadRoad</a></li>
                <li><a href="#" onclick="testLoadFile('bollard');">LoadBallard</a></li>
                <li><a href="#" onclick="testLoadFile('berth');">LoadBerth</a></li>
                <li><a href="#" onclick="loadAllEditCyObj()">loadAllEditCyObj</a></li>
            </ul>
        </li>
        <li><a href="#" onclick="linktest()">testLink</a></li>
        <li><a href="#" onclick="removeall()">removeall</a></li>
        <li><a href="#" onclick="saveLocation()">saveLocation</a></li>
    </ul>
    </div><!--END menu bar -->
    <div id="PaletteAndDiagram" style="position: relative; overflow: hidden; width: 100%;">
        <div id="cursor" style="float:left; width:4%;text-align:center;min-height: 580px;">
            <br/>
            <label for="arror" >
                <img src="assets/img/cursor.png" >
            </label>
            <input type="radio" id="arror" name="cursor" checked/>

            <label for="yard" >
                <img src="assets/img/yard.png" >
            </label>
            <input type="radio" id="yard" title="堆场" name="cursor"  />
            <!--
            <label for="car" >
                <img src="assets/img/car.png" >
            </label>
            <input type="radio" id="car" title="集卡" name="cursor" />

            <label for="crane" >
                <img src="assets/img/crane.png" >
            </label>
            <input type="radio" id="crane" title="场桥" name="cursor" />
            -->
            <label for="roadPoint" >
                <img src="assets/img/roadPoint.png" >
            </label>
            <input type="radio" id="roadPoint" title="路点" name="cursor" />

            <label for="parkingLot" >
                <img src="assets/img/parkingLot.png" >
            </label>
            <input type="radio" id="parkingLot" title="停车场" name="cursor" />
            <!--
            <label for="quayCrane" >
                <img src="assets/img/quayCrane.png" >
            </label>
            <input type="radio" id="quayCrane" title="岸桥" name="cursor" />
            -->
            <label for="berth" >
                <img src="assets/img/berth.png" >
            </label>
            <input type="radio" id="berth" title="泊位" name="cursor" />

            <label for="bollard" >
                <img src="assets/img/bollard.png" >
            </label>
            <input type="radio" id="bollard" title="缆桩" name="cursor" />
        </div>
        <div id="myDiagramDiv" style="position: absolute; width:96%; height: 99%; min-height:300px; margin-left:5%; background-color:white"></div>
    </div>
    <!--<div id="infoDraggable"style="position: fixed;padding: 5px; bottom: 5px; right: 0px;z-index: 1000">-->
    <!--</div>-->
    <!--<div id="openDocument" class="draggable">-->
    <!--<div id="openDraggableHandle" class="handle">Open File</div>-->
    <!--<div id="openText" class="elementText">Choose file to open...</div>-->
    <!--<select id="mySavedFiles" class="mySavedFiles" ></select>-->
    <!--<br />-->
    <!--<button id="openBtn" class="elementBtn" type="button" onclick="loadFile()" style="margin-left:70px">Open</button>-->
    <!--<button id="cancelBtn"class="elementBtn" type="button" onclick="closeElement('openDocument')" >Cancel</button>-->
    <!--</div>-->

    <!--<div id="removeDocument" class="draggable">-->
    <!--</div>-->

</div>
<div class="sk-cube-grid"  id = "a1">
    <div class="sk-cube sk-cube1"></div>
    <div class="sk-cube sk-cube2"></div>
    <div class="sk-cube sk-cube3"></div>
    <div class="sk-cube sk-cube4"></div>
    <div class="sk-cube sk-cube5"></div>
    <div class="sk-cube sk-cube6"></div>
    <div class="sk-cube sk-cube7"></div>
    <div class="sk-cube sk-cube8"></div>
    <div class="sk-cube sk-cube9"></div>
</div>
<div id="dialog" title=""></div>
</body>
<script src="sea-modules/seajs/sea.js"></script>
    <script src="main/common/rabbitMQ.min.js"></script>

<script>

    // Set configuration
    seajs.config({
        base: "./",
        alias: {
            "gojs": "sea-modules/gojs/go"
        }
    });

    seajs.use("main/ct/yardedit");

    /*var client = new RabbitMQ('ws://192.168.1.10:15674/ws', 'zhangrui', '123', 'Jerry_vhost');
//    client.debug = console.log.bind(console);
    client.onConnected = function () {
        this.subscribe('/exchange/ex_transporter/#', function (d) {
            var message = {
                category : d.body.info.type,
                id : d.body.data.id
            }
            LoadObjFromMessage(message);
        });
    }*/

    var myDiagram;

    $('#cursor').buttonset();
    $('#cursor').tooltip();
    $('#cursor  input').click(function(event){
        var share = seajs.require("main/ct/obj/shareData");
        switch(this.id){
            case "arror":
                if(share.diagram.defaultCursor !== "default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "node";
                    share.diagram.defaultCursor = "default";
                    share.diagram.commitTransaction();
                }
                break;
            case "yard":
                if(share.diagram.defaultCursor !== "url(assets/img/yard.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "yard";
                    share.diagram.defaultCursor = "url(assets/img/yard.png),default";
                    share.diagram.commitTransaction();
                }
                break;
            case "car":
                if(share.diagram.defaultCursor !== "url(assets/img/car.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "car";
                    share.diagram.defaultCursor = "url(assets/img/car.png),default";
                    share.diagram.commitTransaction();
                }
                break;
            case "crane":
                if(share.diagram.defaultCursor !== "url(assets/img/crane.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "crane";
                    share.diagram.defaultCursor = "url(assets/img/crane.png),default";
                    share.diagram.commitTransaction();
                }
                break;
            case "roadPoint":
                if(share.diagram.defaultCursor !== "url(assets/img/roadPoint.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "roadPoint";
                    share.diagram.defaultCursor = "url(assets/img/roadPoint.png),default";
                    share.diagram.commitTransaction();
                }
                break;
            case "parkingLot":
                if(share.diagram.defaultCursor !== "url(assets/img/parkingLot.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "parkingLot";
                    share.diagram.defaultCursor = "url(assets/img/parkingLot.png),default";
                    share.diagram.commitTransaction();
                }
                break;
            case "quayCrane":
                if(share.diagram.defaultCursor !== "url(assets/img/quayCrane.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "quayCrane";
                    share.diagram.defaultCursor = "url(assets/img/quayCrane.png),default";
                    share.diagram.commitTransaction();
                }
                break;
            case "bollard":
                if(share.diagram.defaultCursor !== "url(assets/img/bollard.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "bollard";
                    share.diagram.defaultCursor = "url(assets/img/bollard.png),default";
                    share.diagram.commitTransaction();
                }
                break;
            case "berth":
                if(share.diagram.defaultCursor !== "url(assets/img/berth.png),default" )
                {
                    share.diagram.startTransaction();
                    share.actionCursor = "berth";
                    share.diagram.defaultCursor = "url(assets/img/berth.png),default";
                    share.diagram.commitTransaction();
                }
                break;

        }
    });

</script>

<script src="main/common/filesOper.js"></script>
<script src="main/common/common.js"></script>
</html>
