{
 "hidden": false,
 "children": [{
  "configs": {
   "itemId": "module",
   "serverScript": "var data = app.get();\
var tenancyid = app.get(\"sys.TENANCY_ID\");\
var err = \"设备交接单:\";\
var receipts = Wb.getRecords(app.run(\"select cntr,account_customer_code,account_customer,shipper_way,c.client_type\\
\" +\
  \"from receipt r left join c_customer c on r.account_customer_code=c.code\\
\" +\
  \"where r.tenancy_id='\" + tenancyid + \"'\"));\
Wb.each(receipts, function(receipt) {\
  if (Wb.isEmpty(receipt.CLIENT_TYPE)) { //计费对象为空\
    err += receipt.CNTE + \",\";\
  } else {\
    if (receipt.SHIPPER_WAY == '1') { //码头承运\
      if (receipt.CLIENT_TYPE.indexOf('AG') != -1) {\
        //         var ht = Wb.getRecords(app.get(\"select \"));\
      } else { //计费对象为货主,查找货主合同\
        if (receipt.ACCOUNT_CUSTOMER.indexOf('TCL') != -1) { //TCL合同\
\
        } else if (receipt.ACCOUNT_CUSTOMER.indexOf('美的') != -1) { //美的合同\
\
        } else { //其它货主合同\
\
        }\
      }\
    }\
  }\
});\
if (err != \"设备交接单:\") {\
  throw err + \"没有找到计费对象,请重新维护后在尝试计费\";\
}"
  },
  "expanded": true,
  "children": [],
  "type": "module"
 }],
 "roles": {"default": 1},
 "title": "计费",
 "iconCls": "",
 "inframe": false,
 "pageLink": ""
}