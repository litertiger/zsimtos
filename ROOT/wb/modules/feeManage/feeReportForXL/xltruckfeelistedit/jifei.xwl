{
 "hidden": false,
 "children": [{
  "configs": {
   "itemId": "module",
   "serverScript": "var data = app.get();\
var tenancyid = app.get(\"sys.TENANCY_ID\");\
var sql = \"update receipt_bill_fee set truckfee_xl=(\\
\" +\
  \"select substr(f_truck_fee_xl(cntr_size,trade_id,shipper_way,c.client_type,account_customer_code,ship_consign_cod,r.s_adress,r.tenancy_id),1,\\
\" +\
  \"instr(f_truck_fee_xl(cntr_size,trade_id,shipper_way,c.client_type,account_customer_code,ship_consign_cod,r.s_adress,r.tenancy_id),'@')-1)\\
\" +\
  \"from receipt r left join c_customer c on r.account_customer_code=c.code\\
\" +\
  \"where r.tenancy_id='\" + tenancyid + \"' and r.id=receipt_bill_fee.rid),\\
\" +\
  \"truckfee_xl1=(\\
\" +\
  \"select substr(f_truck_fee_xl(cntr_size,trade_id,shipper_way,c.client_type,account_customer_code,ship_consign_cod,r.s_adress,r.tenancy_id),\\
\" +\
  \"instr(f_truck_fee_xl(cntr_size,trade_id,shipper_way,c.client_type,account_customer_code,ship_consign_cod,r.s_adress,r.tenancy_id),'@')+1)\\
\" +\
  \"from receipt r left join c_customer c on r.account_customer_code=c.code\\
\" +\
  \"where r.tenancy_id='\" + tenancyid + \"' and r.id=receipt_bill_fee.rid) where rid in(\\
\" +\
  \"select id from receipt where tenancy_id='\" + tenancyid + \"'\\
\" +\
  \"and trunc(created_on)>=to_date('\" + data.sdate + \"','yyyy-mm-dd')\\
\" +\
  \"and trunc(created_on)<=to_date('\" + data.edate + \"','yyyy-mm-dd')\\
\" +\
  \"and shipper_way=1 and trade_id='1' and work_type<>'YOYI'\";\
if (!Wb.isEmpty(data.ids))\
  sql += \" and id in(\" + data.ids + \")\";\
sql += \")\";\
\
app.run(sql);"
  },
  "expanded": true,
  "children": [],
  "type": "module"
 }],
 "roles": {"default": 1},
 "title": "计费",
 "iconCls": "",
 "inframe": false,
 "pageLink": ""
}