{
 "hidden": false,
 "children": [{
  "configs": {
   "itemId": "module",
   "serverScript": "app.log(request.getParameter(\"WID\"));"
  },
  "expanded": true,
  "children": [
   {
    "configs": {
     "layout": "border",
     "dialog": "true",
     "itemId": "customWin",
     "resizable": "true",
     "closeAction": "hide",
     "autoReset": "true",
     "width": "817",
     "title": "新增客户",
     "height": "480"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "layout": "absolute",
       "itemId": "fieldsetw",
       "width": "480",
       "region": "north",
       "height": "270"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "ID",
         "hidden": "true",
         "x": "416",
         "width": "240",
         "y": "400",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CODE",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "客户代码",
         "width": "192",
         "x": "8",
         "y": "16",
         "isUpperCase": "true",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text",
        "events": {"change": "// text.setValue(newValue.toUpperCase());\
"}
       },
       {
        "configs": {
         "itemId": "NAME",
         "allowBlank": "true",
         "labelAlign": "right",
         "fieldLabel": "<font color='red'>*<\/font>中文名称",
         "width": "376",
         "x": "184",
         "y": "16",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "SHORT_NAME",
         "labelAlign": "right",
         "fieldLabel": "中文简称",
         "width": "216",
         "x": "552",
         "y": "16",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "E_CODE",
         "labelAlign": "right",
         "fieldLabel": "英文名称",
         "width": "344",
         "x": "8",
         "y": "48",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text",
        "events": {"change": "text.setValue(newValue.toUpperCase());"}
       },
       {
        "configs": {
         "itemId": "E_SHORT_NAME",
         "labelAlign": "right",
         "fieldLabel": "英文简称",
         "width": "208",
         "x": "352",
         "y": "48",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text",
        "events": {"change": "text.setValue(newValue.toUpperCase());"}
       },
       {
        "configs": {
         "itemId": "CLIENT_TYPE",
         "allowBlank": "false",
         "fieldLabel": "客户类型",
         "x": "328",
         "width": "192",
         "keyName": "CLIENT_TYPE",
         "y": "80",
         "labelWidth": "70",
         "height": "24",
         "multiSelect": "true"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "AREA",
         "labelAlign": "right",
         "fieldLabel": "所属区域",
         "width": "216",
         "x": "552",
         "y": "80",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "ADDRESS",
         "labelAlign": "right",
         "fieldLabel": "联系地址",
         "width": "360",
         "x": "8",
         "y": "112",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "ABLETIME",
         "x": "648",
         "width": "120",
         "y": "48",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "label1",
         "x": "582",
         "width": "88",
         "y": "48",
         "text": "有效时间：",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "label"
       },
       {
        "configs": {
         "itemId": "ZIP",
         "labelAlign": "right",
         "fieldLabel": "邮政编码",
         "width": "192",
         "x": "360",
         "y": "112",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "BIZ_LINKMAN",
         "labelAlign": "right",
         "fieldLabel": "业务联系人",
         "width": "216",
         "x": "552",
         "y": "112",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "TEL",
         "labelAlign": "right",
         "fieldLabel": "电话",
         "width": "192",
         "x": "8",
         "y": "144",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "TELEX",
         "labelAlign": "right",
         "fieldLabel": "电传",
         "width": "200",
         "x": "168",
         "y": "144",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "FAX",
         "labelAlign": "right",
         "fieldLabel": "传真",
         "width": "208",
         "x": "344",
         "y": "144",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "FINANCE_LINKMAN",
         "labelAlign": "right",
         "fieldLabel": "财务联系人",
         "width": "216",
         "x": "552",
         "y": "144",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "EMAIL",
         "labelAlign": "right",
         "fieldLabel": "email地址",
         "width": "328",
         "x": "8",
         "y": "176",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "EMAIL_FILE",
         "labelAlign": "right",
         "fieldLabel": "邮箱文件",
         "width": "208",
         "x": "344",
         "y": "176",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "WEBSITE",
         "labelAlign": "right",
         "fieldLabel": "网站地址",
         "width": "328",
         "x": "8",
         "y": "208",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "REMARK",
         "labelAlign": "right",
         "fieldLabel": "备注",
         "width": "760",
         "x": "8",
         "y": "240",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "FILE_FORMAT",
         "labelAlign": "right",
         "fieldLabel": "文件格式",
         "width": "216",
         "x": "552",
         "y": "176",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "GOV_CODE",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "工商注册码",
         "width": "288",
         "x": "8",
         "y": "80",
         "labelWidth": "90",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text",
        "events": {"change": "text.setValue(newValue.toUpperCase());"}
       }
      ],
      "type": "fieldset"
     },
     {
      "configs": {
       "layout": "absolute",
       "border": "false",
       "itemId": "fieldsetw1",
       "width": "817",
       "region": "center",
       "height": "320"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "labelWidth": "60",
         "valueField": "ID",
         "itemId": "CNTR_OPERATOR_CODS",
         "labelAlign": "right",
         "fieldLabel": "月结驳船",
         "x": "536",
         "width": "240",
         "y": "104",
         "displayField": "CNAME",
         "disabled": "true",
         "anyMatch": "true",
         "height": "22",
         "multiSelect": "false"
        },
        "expanded": false,
        "children": [{
         "configs": {
          "itemId": "store",
          "params": "{fldId:\"AG\"}",
          "url": "m?xwl=feeManage/customerFee/clientSelect"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "PAY_TYPE",
         "pickList": "[[1,'支票'], [2,'现金'], [3,'预售'], [4,'转账']]",
         "x": "88",
         "width": "136",
         "y": "40",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "ACCOUNT_TYPE",
         "allowBlank": "false",
         "pickList": "[[1,'即结'], [2,'月结']]",
         "x": "88",
         "width": "128",
         "y": "72",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "combo",
        "events": {"select": "if (records[0].data.field1 == 1) {\
  app.I_E_ID_FEE.setDisabled(true);\
  app.CNTR_OPERATOR_CODS.setDisabled(true);\
  app.I_E_ID_FEE.setValue(\"\");\
  app.CNTR_OPERATOR_CODS.setValue(\"\");\
} else if (records[0].data.field1 == 2) {\
  app.I_E_ID_FEE.setDisabled(false);\
  app.CNTR_OPERATOR_CODS.setDisabled(false);\
} else {\
  app.I_E_ID_FEE.setDisabled(false);\
  app.CNTR_OPERATOR_CODS.setDisabled(false);\
}"}
       },
       {
        "configs": {
         "itemId": "label21",
         "x": "24",
         "width": "64",
         "y": "40",
         "text": "付款方式：",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "label"
       },
       {
        "configs": {
         "itemId": "label211",
         "x": "24",
         "width": "64",
         "y": "72",
         "text": "结算方式：",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "label"
       },
       {
        "configs": {
         "itemId": "CREATEUSER",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "录入人员",
         "width": "224",
         "x": "16",
         "y": "104",
         "labelWidth": "90",
         "disabled": "true",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "UPDATEUSER",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "最近修改人",
         "width": "216",
         "x": "560",
         "y": "416",
         "labelWidth": "90",
         "disabled": "true",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "EMPTY_PRICE_TYPE",
         "pickList": "[[1,'免天方式'], [2,'按保有量'], [3,'箱管理费']]",
         "x": "424",
         "width": "112",
         "y": "8",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "label22",
         "x": "336",
         "width": "88",
         "y": "8",
         "text": "空箱计费方式：",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "label"
       },
       {
        "configs": {
         "itemId": "MIN_CONTAINER",
         "minValue": "0",
         "fieldLabel": "保有量",
         "x": "576",
         "width": "176",
         "y": "8",
         "labelWidth": "50",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "number"
       },
       {
        "configs": {
         "itemId": "CREATETIME",
         "hidden": "true",
         "fieldLabel": "录入时间",
         "x": "264",
         "width": "272",
         "y": "416",
         "labelWidth": "60",
         "disabled": "true",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "datetime"
       },
       {
        "configs": {
         "itemId": "UPDATETIME",
         "hidden": "true",
         "fieldLabel": "最近修改时间",
         "x": "24",
         "width": "312",
         "y": "448",
         "labelWidth": "85",
         "disabled": "true",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "datetime"
       },
       {
        "configs": {
         "itemId": "CREDIT_LIMIT",
         "fieldLabel": "信用额度",
         "x": "568",
         "width": "184",
         "y": "40",
         "labelWidth": "70",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "number"
       },
       {
        "configs": {
         "itemId": "RESERVE_PRICE",
         "fieldLabel": "备用金额",
         "x": "224",
         "width": "192",
         "y": "72",
         "labelWidth": "70",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "number"
       },
       {
        "configs": {
         "itemId": "STATE_FLAG",
         "hidden": "true",
         "x": "376",
         "width": "240",
         "y": "448",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "tagConfigs": " matchFieldWidth:false",
         "queryMode": "remote",
         "labelWidth": "60",
         "listConfig": "{width:450}",
         "valueField": "ID",
         "queryDelay": "1",
         "itemId": "SUB_COMPANY",
         "tpl": "<table cellspacing='0' width='100%'>\
   <tr  >\
      <td width='105px'>\
       代码\
      <\/td>\
      <td>\
       中文名\
      <\/td>\
    <\/tr>\
  <tpl for='.'>\
    <tr class='x-boundlist-item' >\
      <td >\
        {ID}\
      <\/td>\
      <td>\
       {CNAME}\
      <\/td>\
    <\/tr>\
  <\/tpl>\
<\/table>",
         "labelAlign": "right",
         "fieldLabel": "所属公司",
         "x": "48",
         "width": "200",
         "y": "104",
         "displayField": "CNAME",
         "anyMatch": "true",
         "forceSelection": "true",
         "height": "22"
        },
        "expanded": false,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "50",
          "url": "m?xwl=system/common/client/clientSelect"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo"
       },
       {
        "configs": {
         "layout": "fit",
         "itemId": "customer",
         "hidden": "true",
         "x": "16",
         "width": "754",
         "y": "392",
         "title": "顾客代码维护",
         "height": "240"
        },
        "expanded": false,
        "children": [{
         "configs": {
          "itemId": "customerGrid",
          "submitSelect": "true",
          "selType": "checkboxmodel",
          "sortableColumns": "false",
          "simpleSelect": "true",
          "pagingBar": "false",
          "iconCls": "cube_icon",
          "multiSelect": "true"
         },
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "store",
            "remoteSort": "true",
            "autoLoad": "true",
            "pageSize": "-1",
            "url": "m?xwl=system/customer/customer/selectCus"
           },
           "expanded": false,
           "children": [],
           "type": "store"
          },
          {
           "configs": {"itemId": "columns"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "id",
              "hidden": "true",
              "dataIndex": "ID",
              "flex": "1",
              "text": "编号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "id1",
              "dataIndex": "ORG_NAME",
              "flex": "1",
              "text": "驳船名"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "tenancyId",
              "dataIndex": "TENANCY_ID",
              "text": "租户"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "orgType",
              "renderer": "return  '驳船';",
              "dataIndex": "ORG_TYPE",
              "text": "组织类型"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "orgCode",
              "dataIndex": "ORG_CODE",
              "text": "代码"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "shortCod",
              "hidden": "true",
              "dataIndex": "SHORT_COD",
              "text": "驳船编号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }
           ],
           "type": "array"
          }
         ],
         "type": "grid",
         "events": {"tagEvents": "select:function(RowModel,record,index,eOpts){\
\
/*if(typeof(record)!='number'){\
            \tWb.request({\
    \t\t\turl: 'm?xwl=customer-link/insertCod',\
    \t\t\tparams:{ TENANCY_ID:record.data.TENANCY_ID,\
                ID:record.data.ID,\
                ORG_NAME:record.data.ORG_NAME,\
                TENANCY_ID:record.data.TENANCY_ID,\
                C_ID:record.data.ID},\
    \t\t\tsuccess: function() {}\
 \t\t\t  });\
            }\
       */     \
  \
  \
},\
deselect:function(RowModel,record,index,eOpts){\
  \tvar ID=record.data.ID;\
\tWb.request({\
      url: 'm?xwl=system/customer/customer/deleteCCC',\
      params:{ORG_ID:ID},\
      success: function(){}\
    });\
}\t"}
        }],
        "type": "fieldset"
       },
       {
        "configs": {
         "itemId": "DEFAULT_PROTOCOL",
         "fieldLabel": "<font color='red'>*<\/font>默认协议",
         "x": "8",
         "width": "312",
         "y": "8",
         "displayField": "DESCRIPTION",
         "labelWidth": "75",
         "valueField": "ID",
         "anyMatch": "true",
         "height": "22",
         "multiSelect": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=feeManage/contract/java/queryAll"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "I_E_ID_FEE",
         "labelAlign": "right",
         "fieldLabel": "月结进出口",
         "keyName": "I_E_ID",
         "x": "264",
         "width": "240",
         "y": "104",
         "labelWidth": "75",
         "disabled": "true",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "PROTOCOL_ABLETIME",
         "fieldLabel": "协议有效期",
         "x": "288",
         "width": "216",
         "y": "40",
         "labelWidth": "80",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       }
      ],
      "type": "fieldset"
     }
    ],
    "type": "window",
    "events": {"ok": "var values = Wb.getValue(app.customWin);\
if (app.isEdit) {\
  if (app.stateCol.getValue() == 1) {\
    var ids = new Array();\
    var names = new Array();\
    var sels = app.grid1.getSelection();\
    var sels2 = app.customerGrid.getSelection();\
    Wb.each(sels2, function(sel) {\
      ids.push(sel.data.ID);\
      names.push(sel.data.ORG_NAME);\
    });\
    //权限按钮操作\
    Wb.request({\
      url: 'm?xwl=feeManage/customerFee/insertContact',\
      out:app.customWin,\
      params: {\
        ids: ids,\
        ID: sels[0].data.ID,\
        names: names\
      }, //合并窗口和记录数据作为参数，后者为默认值\
      success: function() {\
        //把窗口数据更新到选择记录中\
        Wb.update(app.selRec, values);\
        //隐藏对话框，在模块关闭时自动销毁对话框\
        app.customWin.close();\
      }\
    });\
  }\
  //调用后台java方法写的 \
  var s1 = app.grid1.getSelection();\
  //点击修改按钮的处理过程\
  var val = Wb.applyIf(values, Wb.getData(app.selRec, true)); //合并窗口和记录数据作为参数，后者为默认值\
  Wb.request({\
    url: 'm?xwl=feeManage/customerFee/update',\
    //     params: val,//合并窗口和记录数据作为参数，后者为默认值\
    params: Wb.applyIf({\
      code: s1[0].data.CODE\
    }, values, Wb.getData(app.selRec, true)),\
    success: function() {\
      //把窗口数据更新到选择记录中\
      Wb.update(app.selRec, values);\
      //隐藏对话框，在模块关闭时自动销毁对话框\
      app.customWin.close();\
      app.queryBtn.fireEvent('click');\
      app.xwl1.send(\"/exchange/ex_customer/#\", {\
        info: {\
          type: \"custom\",\
          action: \"update\",\
          senduser: '{#sys.username#}',\
          sendtime: (new Date()).getTime(),\
          ttl: 5000,\
          sendmoudle: \"customer\"\
        },\
        data: val\
      });\
    }\
  });\
\
} else {\
  //   var s = app.grid1.getSelection();\
  //点击添加按钮的处理过程\
  Wb.request({\
    //     url: 'm?xwl=system/customer/customer/insert1',\
    url: 'm?xwl=feeManage/customerFee/insert2',\
    out: app.customWin,\
    //     params:{code:s[0].data.CODE},\
    params: {\
      code: app.CODE.getValue()\
    },\
    success: function(resp) {\
      //把服务器返回的数据合并窗口数据（公司名称等数据）添加到表格中\
      //       var val = Wb.apply( values,Wb.decode(resp.responseText));\
      //       Wb.add(app.grid1, val);\
      Wb.add(app.grid1, values);\
      //隐藏对话框，在模块关闭时自动销毁对话框\
      app.customWin.close();\
      app.queryBtn.fireEvent('click');\
      app.xwl1.send(\"/exchange/ex_customer/#\", {\
        info: {\
          type: \"custom\",\
          action: \"create\",\
          senduser: '{#sys.username#}',\
          sendtime: (new Date()).getTime(),\
          ttl: 5000,\
          sendmoudle: \"customer\"\
        },\
        data: val\
      });\
    }\
  });\
\
}"}
   },
   {
    "configs": {
     "layout": "fit",
     "itemId": "viewport1"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "itemId": "xwl1",
       "file": "m?xwl=system/common/rabbitMq"
      },
      "expanded": false,
      "children": [],
      "type": "xwl"
     },
     {
      "configs": {
       "layout": "fit",
       "itemId": "panel1"
      },
      "expanded": true,
      "children": [{
       "configs": {
        "layout": "border",
        "itemId": "north_panel",
        "height": "333"
       },
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "toolbarSel",
          "hidden": "false",
          "region": "north",
          "height": "35"
         },
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "name1",
            "emptyText": "名称、代码、工商号",
            "fieldLabel": "查询条件",
            "width": "250",
            "labelWidth": "70"
           },
           "expanded": true,
           "children": [],
           "type": "text"
          },
          {
           "configs": {
            "itemId": "type",
            "emptyText": "客户类型",
            "keyName": "CLIENT_TYPE",
            "width": "150"
           },
           "expanded": false,
           "children": [],
           "type": "combo"
          },
          {
           "configs": {
            "itemId": "createtime1",
            "fieldLabel": "创建时间起始",
            "width": "230",
            "labelWidth": "95"
           },
           "expanded": false,
           "children": [],
           "type": "date"
          },
          {
           "configs": {
            "itemId": "createtime2",
            "fieldLabel": "截止",
            "width": "190",
            "labelWidth": "40"
           },
           "expanded": false,
           "children": [],
           "type": "date"
          },
          {
           "configs": {
            "itemId": "IDS",
            "hidden": "true"
           },
           "expanded": false,
           "children": [],
           "type": "text"
          },
          {
           "configs": {
            "itemId": "stateCol",
            "hidden": "true",
            "fieldLabel": "区分权限和修改按钮的标志位"
           },
           "expanded": false,
           "children": [],
           "type": "text"
          },
          {
           "configs": {
            "itemId": "recordcode",
            "hidden": "true"
           },
           "expanded": false,
           "children": [],
           "type": "text"
          }
         ],
         "type": "toolbar"
        },
        {
         "configs": {
          "itemId": "toolbarBtn",
          "hidden": "false",
          "region": "north",
          "height": "30"
         },
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "accountType",
            "emptyText": "结算方式",
            "pickList": "[[1,'即结'], [2,'月结']]",
            "width": "120"
           },
           "expanded": false,
           "children": [],
           "type": "combo"
          },
          {
           "configs": {
            "itemId": "protocol",
            "emptyText": "默认协议",
            "width": "200",
            "displayField": "DESCRIPTION",
            "labelWidth": "75",
            "valueField": "ID",
            "height": "22",
            "multiSelect": "true"
           },
           "expanded": false,
           "children": [{
            "configs": {
             "itemId": "store",
             "autoLoad": "true",
             "url": "m?xwl=feeManage/contract/java/queryAll"
            },
            "expanded": false,
            "children": [],
            "type": "store"
           }],
           "type": "combo"
          },
          {
           "configs": {
            "itemId": "queryBtn",
            "text": "查询",
            "iconCls": "seek_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "\
// app.grid1.store.load({\
//   out: app.toolbarSel,\
//   out: app.toolbarBtn\
// });\
\
app.grid1.store.load({\
  params:{\
  \tname1:app.name1.getValue(),\
    type:app.type.getValue(),\
    createtime1:app.createtime1.getValue(),\
    createtime2:app.createtime2.getValue()\
  },\
  out: app.toolbarBtn\
});"}
          },
          {
           "configs": {
            "itemId": "addBtn",
            "text": "新增",
            "iconCls": "record_add_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "// app.customWin.setHeight(460);\
// app.customWin.setHeight(430);\
Wb.reset(app.customWin);\
app.fieldsetw.setDisabled(false);\
app.CLIENT_TYPE.setValue('CE');\
//app.check1.setValue(true);\
app.PAY_TYPE.setValue(2);\
app.STATE_FLAG.setValue('0');\
//app.REGEDIT_STATUS.setValue(0);\
app.customWin.setTitle('添加 - 客户');\
app.customWin.setIconCls('record_add_icon');\
app.customWin.show();\
app.isEdit = false; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性\
\
"}
          },
          {
           "configs": {
            "itemId": "editBtn",
            "text": "编辑",
            "iconCls": "record_edit_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length != 1) {\
  Wb.warn('请选择 1 条需要修改的记录。');\
  return;\
}\
\
var result = sels[0].data.CLIENT_TYPE;\
var s1 = result.replace(\"[\", \"\");\
var s2 = s1.replace(\"]\", \"\");\
\
var s6 = \"\";\
for (var j = 0; j < s2.length; j++) {\
  //   alert(s2.indexOf(\"\\\"\"));\
  if (s2.indexOf(\"\\\"\") != -1) {\
    s6 = s2.replace(\"\\\"\", \"\");\
    s2 = s6;\
  }\
}\
var s = s6.split(\",\");\
//\
var result1 = sels[0].data.DEFAULT_PROTOCOL;\
var ss1 = result1.replace(\"[\", \"\");\
var ss2 = ss1.replace(\"]\", \"\");\
\
var ss6 = \"\";\
for (var j = 0; j < ss2.length; j++) {\
  //   alert(s2.indexOf(\"\\\"\"));\
  if (ss2.indexOf(\"\\\"\") != -1) {\
    ss6 = ss2.replace(\"\\\"\", \"\");\
    ss2 = ss6;\
  }\
}\
var ss = ss6.split(\",\");\
//=================================\
// var result2 = sels[0].data.CNTR_OPERATOR_CODS;\
// var sss1 = result2.replace(\"[\", \"\");\
// var sss2 = sss1.replace(\"]\", \"\");\
\
// var sss6 = \"\";\
// for (var j = 0; j < sss2.length; j++) {\
//   //   alert(s2.indexOf(\"\\\"\"));\
//   if (sss2.indexOf(\"\\\"\") != -1) {\
//     sss6 = sss2.replace(\"\\\"\", \"\");\
//     sss2 = sss6;\
//   }\
// }\
// var sss = sss6.split(\",\");\
//=======\
\
app.stateCol.setValue(0); //设置修改的state为0\
// app.customWin.setHeight(430);\
app.fieldsetw.setDisabled(true);\
app.selRec = sels[0];\
app.customWin.setTitle('修改 - ' + app.selRec.data.NAME);\
app.customWin.setIconCls('record_edit_icon');\
Wb.setValue(app.customWin, app.selRec.data);\
//在给别的类型设置值的时候，需要在这后面改才行---Wb.setValue(app.customWin, app.selRec.data);\
// app.CLIENT_TYPE.setValue('CE');\
app.CLIENT_TYPE.setValue(s);\
app.DEFAULT_PROTOCOL.setValue(ss);\
if (sels[0].data.ACCOUNT_TYPE == 1) {\
  app.I_E_ID_FEE.setDisabled(true);\
  app.CNTR_OPERATOR_CODS.setDisabled(true);\
  app.I_E_ID_FEE.setValue(\"\");\
  app.CNTR_OPERATOR_CODS.setValue(\"\");\
} else {\
  app.I_E_ID_FEE.setDisabled(false);\
  app.CNTR_OPERATOR_CODS.setDisabled(false);\
  app.I_E_ID_FEE.setValue(sels[0].data.I_E_ID_FEE);\
  app.CNTR_OPERATOR_CODS.setValue(sels[0].data.CNTR_OPERATOR_CODS);\
//   app.CNTR_OPERATOR_CODS.focus();\
//   app.CNTR_OPERATOR_CODS.store.load(sss);\
}\
Wb.request({\
  url: 'm?xwl=system/customer/customerFee/new/update',\
  params: {\
    C_ID: sels[0].data.ID\
  },\
  success: function(resp) {\
\
  }\
});\
app.customWin.show();\
app.isEdit = true; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性"}
          },
          {
           "configs": {
            "itemId": "delBtn",
            "text": "删除",
            "iconCls": "record_delete_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "var data = app.grid1.getSelection()[0].data;\
Wb.del(app.grid1, {\
  url: 'm?xwl=system/customer/customer/delete',\
  //params: {company_id : app.company_id},\
  params:{code:data.CODE,C_ID:data.ID},\
  titleField: 'NAME',\
  success:function(){\
    app.xwl1.send(\"/exchange/ex_customer/#\",{\
        info:{\
          type:\"custom\",\
          action:\"delete\",\
          senduser:'{#sys.username#}',\
          sendtime:(new Date()).getTime(),\
          ttl:5000,\
          sendmoudle:\"customer\"\
        },\
        data:data\
      });\
  }\
});\
"}
          },
          {
           "configs": {
            "itemId": "resetBtn",
            "text": "重置",
            "iconCls": "record_add_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "\
Wb.reset(app.toolbar1);\
app.grid1.store.load({\
  out: app.panel1\
});"}
          },
          {
           "configs": {
            "itemId": "limitBtn",
            "hidden": "true",
            "text": "设置权限",
            "iconCls": "book_icon"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length != 1) {\
  Wb.warn('请选择 1 条需要修改的记录。');\
  return;\
}\
\
var result=sels[0].data.CLIENT_TYPE;\
var s1=result.replace(\"[\",\"\");\
var s2=s1.replace(\"]\",\"\");\
\
var s6=\"\";\
for(var j=0;j<s2.length;j++){\
//   alert(s2.indexOf(\"\\\"\"));\
\tif(s2.indexOf(\"\\\"\")!=-1){\
\t\ts6=s2.replace(\"\\\"\",\"\");\
      \ts2=s6;\
    }\
}\
var s= s6.split(\",\");\
//当名称重复的时候就会出现，设置的方法不起作用\
app.customer.setVisible(true);\
app.stateCol.setValue(1);//设置修改的state为1\
Wb.request({\
    url: 'm?xwl=system/customer/customer/selectOrgId',\
    success: function(resp) {\
      \
            var roleRec, selRecs = [],\
        roles = Wb.decode(resp.responseText);\
      Wb.each(roles.rows, function(rec) {\
        roleRec = Wb.find(app.customerGrid.store, 'ID', rec.ORG_ID);\
        if (roleRec)\
          selRecs.push(roleRec);\
      });\
      app.customerGrid.setSelection(selRecs);\
      \
     /* \
      var ids = Wb.decode(resp.responseText);\
      var store = app.customerGrid.getStore();\
      \
      \
       Wb.each(ids.rows, function(rec){\
\t\tfor(var i =0;i<store.getCount();i++){\
            var record=store.getAt(i);\
     \t\tif(rec.ORG_ID===record.data.ID){\
              alert(i);\
         \t\t\tselRecs[i]=record.data;\
            }\
\t\t} \
      }); \
      app.customerGrid.setSelection(selRecs);*/\
    }\
});\
\
\
app.selRec = sels[0];\
app.customWin.setTitle('修改权限 - ' + app.selRec.data.SERVICE_NAME);\
app.customWin.setIconCls('record_edit_icon');\
Wb.setValue(app.customWin, app.selRec.data);\
app.CLIENT_TYPE.setValue(s);\
app.customWin.show();\
app.isEdit = true; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性\
\
"}
          }
         ],
         "type": "toolbar"
        },
        {
         "configs": {
          "itemId": "grid1",
          "region": "center",
          "height": "300"
         },
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "store",
            "autoLoad": "true",
            "url": "m?xwl=feeManage/customerFee/select"
           },
           "expanded": true,
           "children": [],
           "type": "store"
          },
          {
           "configs": {"itemId": "columns"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "stateFlagCol",
              "renderer": "if(value==0){\
\treturn '初始状态';\
}\
if(value==1){\
\treturn '待审核';\
}\
if(value==2){\
\treturn '已审核';\
}",
              "dataIndex": "STATE_FLAG",
              "text": "状态"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "id",
              "hidden": "true",
              "dataIndex": "ID",
              "text": "系统ID"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "code",
              "dataIndex": "CODE",
              "width": "150",
              "text": "客户代码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "name",
              "dataIndex": "NAME",
              "width": "250",
              "text": "中文名称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "account_type",
              "renderer": "if(value == 1){\
    return \"即结\";\
}else if(value == 2){\
    return \"月结\";\
}",
              "dataIndex": "ACCOUNT_TYPE",
              "text": "结算方式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "default_protocol",
              "renderer": "var s1 = value.replace(\"[\", \"\");\
var s2 = s1.replace(\"]\", \"\");\
var s10 = \"\";\
for (var j = 0; j < s2.length; j++) {\
  if (s2.indexOf(\"\\\"\") != -1) {\
    s10 = s2.replace(\"\\\"\", \"\");\
    s2 = s10;\
  }\
}\
var s = s10.split(\",\");\
console.log(\"111:\"+s);\
\
var st = \"\";\
for (var i = 0; i < s.length; i++) {\
  if (s.length == 1 || i == s.length - 1) {\
    st += Wb.kv(s[i], metaData.column.keyItems);\
  } else\
    st += Wb.kv(s[i], metaData.column.keyItems) + \",\";\
}\
return st;",
              "dataIndex": "DEFAULT_PROTOCOL",
              "keyName": "C_CONTRACT",
              "text": "默认协议"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "short_name",
              "dataIndex": "SHORT_NAME",
              "text": "中文简称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "gov_code",
              "dataIndex": "GOV_CODE",
              "width": "150",
              "text": "工商注册码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "e_code",
              "dataIndex": "E_CODE",
              "text": "英文名称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "e_short_name",
              "dataIndex": "E_SHORT_NAME",
              "text": "英文简称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "abletime",
              "dataIndex": "ABLETIME",
              "text": "有效时间"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "c_type",
              "renderer": "console.log(value);\
var s1=value.replace(\"[\",\"\");\
var s2=s1.replace(\"]\",\"\");\
var s10=\"\";\
for(var j=0;j<s2.length;j++){\
\tif(s2.indexOf(\"\\\"\")!=-1){\
\t\ts10=s2.replace(\"\\\"\",\"\");\
      \ts2=s10;\
    }\
}\
var s=s10.split(\",\");\
var st=\"\";\
for(var i=0;i<s.length;i++){\
  if(s.length==1 || i==s.length-1){\
  \tst+=Wb.kv(s[i],metaData.column.keyItems);\
  }else\
\tst+=Wb.kv(s[i],metaData.column.keyItems)+\",\"; \
}\
return st;\
\
\
//=======================================================\
// var st=\"\";\
// var s=eval(value);\
// for(var i=0;i<s.length;i++){\
//   if(s.length==1 || i==s.length-1){\
//   \tst+=Wb.kv(s[i],metaData.column.keyItems);\
//   }else\
// \tst+=Wb.kv(s[i],metaData.column.keyItems)+\",\"; \
// }\
// return st;\
\
",
              "dataIndex": "CLIENT_TYPE",
              "keyName": "CLIENT_TYPE",
              "text": "客户类型"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "area_code",
              "dataIndex": "AREA_CODE",
              "text": "区域代码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "area",
              "dataIndex": "AREA",
              "text": "所属区域"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "address",
              "dataIndex": "ADDRESS",
              "width": "180",
              "text": "联系地址"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "zip",
              "dataIndex": "ZIP",
              "text": "邮政编码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "biz_linkman",
              "dataIndex": "BIZ_LINKMAN",
              "text": "业务联系人"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "tel",
              "dataIndex": "TEL",
              "text": "电话"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "telex",
              "dataIndex": "TELEX",
              "text": "电传"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "fax",
              "dataIndex": "FAX",
              "text": "传真"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "finance_linkman",
              "dataIndex": "FINANCE_LINKMAN",
              "text": "财务联系人"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "email",
              "dataIndex": "EMAIL",
              "text": "email地址"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "email_file",
              "dataIndex": "EMAIL_FILE",
              "text": "邮箱文件"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "file_format",
              "dataIndex": "FILE_FORMAT",
              "text": "文件格式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "website",
              "dataIndex": "WEBSITE",
              "text": "网站地址"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "empty_price_type",
              "renderer": "if(value == 1){\
    return \"免天方式\";\
}else if(value == 2){\
    return \"按保有量\";\
}else if(value == 3){\
    return \"箱管理费\";\
}",
              "dataIndex": "EMPTY_PRICE_TYPE",
              "text": "空箱计费方式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "min_container",
              "dataIndex": "MIN_CONTAINER",
              "text": "保有量"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "credit_limit",
              "dataIndex": "CREDIT_LIMIT",
              "text": "信用额度"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "protocol_abletime",
              "dataIndex": "PROTOCOL_ABLETIME",
              "text": "协议有效期"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "pay_type",
              "renderer": "\
if(value == 1){\
    return \"支票\";\
}else if(value == 2){\
    return \"现金\";\
}else if(value == 3){\
    return \"预售\";\
}else if(value == 4){\
    return \"转账\";\
}",
              "dataIndex": "PAY_TYPE",
              "text": "付款方式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "reserve_price",
              "dataIndex": "RESERVE_PRICE",
              "text": "备用金额"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "remark",
              "dataIndex": "REMARK",
              "text": "备注"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "state_flagb",
              "dataIndex": "STATE_FLAGB",
              "text": "备注"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "createuser",
              "dataIndex": "CREATEUSER",
              "keyName": "WB_USER",
              "text": "录入员"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "createtime",
              "dataIndex": "CREATETIME",
              "width": "120",
              "text": "录入时间"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "updateuser",
              "dataIndex": "UPDATEUSER",
              "keyName": "WB_USER",
              "text": "最近修改人"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "updatetime",
              "dataIndex": "UPDATETIME",
              "width": "120",
              "text": "最近修改时间"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "regedit_status",
              "hidden": "true",
              "dataIndex": "REGEDIT_STATUS",
              "text": "申请状态"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "bcode",
              "hidden": "true",
              "dataIndex": "BCODE"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "I_E_ID_FEE1241253",
              "dataIndex": "I_E_ID_FEE",
              "keyName": "I_E_ID",
              "text": "月结进出口",
              "titleAlign": "center"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "CNTR_OPERATOR_CODS999",
              "dataIndex": "CNTR_OPERATOR_CODS",
              "keyName": "AG_SHORT",
              "text": "月结驳船",
              "titleAlign": "center"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "tenancyId",
              "dataIndex": "TENANCY_ID",
              "text": "租户"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            }
           ],
           "type": "array"
          }
         ],
         "type": "grid",
         "events": {
          "itemclick": "// app.recordGovcode.setValue(record.data.GOV_CODE);\
// app.recordcode.setValue(record.data.CODE);\
// app.grid11.store.load({\
//    params:{c:record.data.GOV_CODE}\
// });\
// app.contract_grid.store.load({\
//    params:{ID : record.data.ID}\
// });\
// app.cusNamGrid.store.load({\
// params:{c:record.data.GOV_CODE}\
// });\
\
// app.addressGrid.store.load({\
//  params:{CODE:record.data.CODE} \
// });",
          "itemdblclick": "app.editBtn.fireEvent('click');"
         }
        }
       ],
       "type": "panel"
      }],
      "type": "panel"
     }
    ],
    "type": "viewport"
   }
  ],
  "type": "module",
  "events": {
   "finalize": "// alert('{#WID#}');\
var WID = '{#WID#}';\
app.xwl1.subscribe('/exchange/ex_customer/#', function(d) {\
  var msg = d.body;\
//   console.log(msg);\
  var record = app.grid1.store.data.findBy(function(i, k) {\
    return i.data.ID === msg.data.ID;\
  });\
  switch (msg.info.action) {\
    case 'create':\
      if (!record)\
        Wb.add(app.grid1, msg.data);\
      break;\
    case 'update':\
      if (record)\
        Wb.update(record, msg.data);\
      break;\
    case 'delete':\
      if (record) {\
        app.grid1.setSelection([record]);\
        Wb.remove(app.grid1);\
      }\
      break;\
    default:\
      console.log(msg);\
      break;\
  }\
});\
\
\
app.name1.addListener(\"specialkey\", function(field, e) {\
  if (e.getKey() == e.ENTER) {\
   \tapp.queryBtn.fireEvent('click');\
   \
  }\
});\
\
app.type.addListener(\"specialkey\", function(field, e) {\
  if (e.getKey() == e.ENTER) {\
   \tapp.queryBtn.fireEvent('click');\
   \
  }\
});",
   "initialize": "\
// var WID = '{#WID#}';\
"
  }
 }],
 "roles": {
  "xlcwb": 1,
  "JCB": 1,
  "SWB": 1
 },
 "title": "客户费用代码维护",
 "iconCls": "",
 "inframe": false,
 "pageLink": ""
}