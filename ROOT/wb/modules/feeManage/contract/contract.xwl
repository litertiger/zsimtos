{
 "hidden": false,
 "children": [{
  "configs": {"itemId": "module"},
  "expanded": true,
  "children": [
   {
    "configs": {
     "layout": "absolute",
     "itemId": "concatWin",
     "dialog": "true",
     "closeAction": "hide",
     "width": "824",
     "title": "合同维护",
     "height": "512"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "layout": "absolute",
       "itemId": "form1",
       "x": "8",
       "width": "800",
       "y": "8",
       "height": "304"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "COPY_ID",
         "hidden": "true",
         "width": "240",
         "x": "24",
         "y": "8",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "ID",
         "hidden": "true",
         "width": "240",
         "x": "24",
         "y": "8",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "DESCRIPTION",
         "labelAlign": "right",
         "fieldLabel": "合同名称",
         "width": "260",
         "x": "-16",
         "y": "16",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "LIFE_STATUS",
         "labelAlign": "right",
         "pickList": "[[1,'启用'],[2,'不启用']]",
         "fieldLabel": "启用状态",
         "width": "260",
         "x": "520",
         "y": "80",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "ORIGINAL_CONTRACT_ID",
         "labelAlign": "right",
         "fieldLabel": "原始合同编号",
         "width": "260",
         "x": "520",
         "y": "16",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CONTRACT_NO",
         "labelAlign": "right",
         "fieldLabel": "合同编号",
         "width": "260",
         "x": "248",
         "y": "16",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "VERSION_MEMO",
         "labelAlign": "right",
         "fieldLabel": "版本备注",
         "width": "260",
         "x": "520",
         "y": "176",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CONFIRM_USER",
         "labelAlign": "right",
         "fieldLabel": "合同确认人",
         "width": "260",
         "x": "-16",
         "y": "112",
         "labelWidth": "110",
         "disabled": "true",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "VERSION",
         "labelAlign": "right",
         "fieldLabel": "版本号",
         "width": "260",
         "x": "248",
         "y": "176",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "PAYMENT_AGENT",
         "labelAlign": "right",
         "fieldLabel": "付费代理",
         "width": "260",
         "x": "520",
         "y": "112",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "APPROVE_MEMO",
         "labelAlign": "right",
         "fieldLabel": "审核备注",
         "width": "404",
         "x": "376",
         "y": "208",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "BIZ_SCOPE",
         "labelAlign": "right",
         "fieldLabel": "业务范围",
         "width": "380",
         "x": "-16",
         "y": "208",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "NOTES",
         "labelAlign": "right",
         "fieldLabel": "备注",
         "width": "796",
         "x": "-16",
         "y": "240",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "EFFECTIVE_DATE",
         "labelAlign": "right",
         "fieldLabel": "生效日期",
         "x": "-16",
         "width": "260",
         "y": "48",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "EXPIRED_DATE",
         "labelAlign": "right",
         "fieldLabel": "失效日期",
         "x": "248",
         "width": "260",
         "y": "48",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "CONFIRM_STATUS",
         "labelAlign": "right",
         "pickList": "[[0,'未提交'],[1,'已提交未审核'],[2,'已经审核'],[3,'未通过']]",
         "fieldLabel": "合同审核",
         "width": "260",
         "x": "-16",
         "y": "80",
         "labelWidth": "110",
         "disabled": "true",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CONFIRM_DATE",
         "labelAlign": "right",
         "fieldLabel": "合同确认时间",
         "x": "248",
         "width": "260",
         "y": "80",
         "labelWidth": "110",
         "disabled": "true",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "PAYMENT_TYPE",
         "labelAlign": "right",
         "pickList": "[[0,'现金'],[1,'挂账']]",
         "fieldLabel": "付费类型",
         "width": "260",
         "x": "248",
         "y": "112",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CONTRACT_TYPE",
         "labelAlign": "right",
         "pickList": "[[0,'船方'],[1,'货方']]",
         "fieldLabel": "合同类型",
         "width": "260",
         "x": "-16",
         "y": "144",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "EXPAND_TO",
         "labelAlign": "right",
         "fieldLabel": "过期时间延长值",
         "x": "520",
         "width": "260",
         "y": "48",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "TRADE_TYPE",
         "labelAlign": "right",
         "pickList": "[['E','外贸'],['I','内贸']]",
         "fieldLabel": "贸易类型",
         "width": "260",
         "x": "248",
         "y": "144",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CATEGORY",
         "labelAlign": "right",
         "pickList": "[[0,'草稿'],[1,'模版'],[2,'正常合同']]",
         "fieldLabel": "合同属性",
         "width": "260",
         "x": "520",
         "y": "144",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CURRENCY_ID",
         "labelAlign": "right",
         "pickList": "[[1,'现金'],[2,'月结'],[3,'托收单']]",
         "fieldLabel": "结算类型",
         "width": "260",
         "x": "-16",
         "y": "176",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "FILE_PATH",
         "labelAlign": "right",
         "fieldLabel": "附件",
         "width": "787",
         "x": "-8",
         "multiple": "true",
         "y": "272",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "file"
       }
      ],
      "type": "form"
     },
     {
      "configs": {
       "layout": "fit",
       "itemId": "panelCbzs1",
       "x": "8",
       "width": "800",
       "y": "312",
       "frame": "true",
       "height": "143"
      },
      "expanded": true,
      "children": [{
       "configs": {
        "itemId": "gridCBZS",
        "tbar": "app.tbarCbzs",
        "disabled": "false",
        "region": "center",
        "multiSelect": "true"
       },
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "url": "m?xwl=feeManage/contract/sql/queryFile"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        },
        {
         "configs": {"itemId": "columns"},
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "colID",
            "hidden": "true",
            "dataIndex": "ID",
            "text": "文件id"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "M_ID",
            "hidden": "true",
            "dataIndex": "M_ID",
            "text": "表单id"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "PATH",
            "hidden": "true",
            "dataIndex": "PATH",
            "text": "路径"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "column1",
            "xtype": "rownumberer",
            "width": "30"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "M_NAME",
            "dataIndex": "M_NAME",
            "width": "260",
            "text": "文件名"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "CREATE_NAM",
            "dataIndex": "CREATE_NAM",
            "width": "80",
            "text": "创建人"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "CREATE_TIM",
            "dataIndex": "CREATE_TIM",
            "width": "80",
            "text": "创建时间"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "actionColumns",
            "xtype": "actioncolumn",
            "width": "60",
            "text": "下载",
            "align": "center"
           },
           "expanded": true,
           "children": [{
            "configs": {"itemId": "items"},
            "expanded": true,
            "children": [{
             "configs": {
              "itemId": "fileDown",
              "handler": "/*app.imgWin.setTitle('图片 - ' + record.data.NAME);\
app.imgWin.setIconCls('zoom_icon');\
app.imgWin.down('[iconCls=ok_icon]').hide(true); //隐藏窗体确定按钮\
//重置图片\
app.image1.setSrc('');\
//设置图片地址\
app.image1.setSrc(record.data.PHOTO);\
//显示图片\
app.imgWin.show();*/\
var path ='{#path#}' + record.data.PATH;\
//path = path.substring(1, path.length);\
\
Wb.download('m?xwl=dev/ide/download', {\
  files: [path],\
  foo: 'bar'\
});",
              "tooltip": "下载附件",
              "iconCls": "level_down_icon"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }],
            "type": "array"
           }],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "actionColumns1",
            "xtype": "actioncolumn",
            "width": "60",
            "text": "删除",
            "align": "center"
           },
           "expanded": true,
           "children": [{
            "configs": {"itemId": "items"},
            "expanded": true,
            "children": [{
             "configs": {
              "itemId": "delFile",
              "handler": "var model = app.gridCBZS.getSelectionModel();\
model.select(rowIndex);\
var param ={\
  url : 'm?xwl=feeManage/contract/sql/delFile',\
  params:{ID: record.data.ID},\
//   failure :function(){\
//     alert('数据已被使用，不能删除！');\
//   },\
  titleField:'M_NAME'\
};\
\
Wb.del(app.gridCBZS, param);\
",
              "tooltip": "删除附件",
              "iconCls": "file_delete_icon"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }],
            "type": "array"
           }],
           "type": "column"
          }
         ],
         "type": "array"
        }
       ],
       "type": "grid"
      }],
      "type": "panel"
     }
    ],
    "type": "window",
    "events": {"ok": "if(app.CONFIRM_STATUS == 2){\
  Wb.warn(\"该合同已审核不能修改！\");\
  return;\
}\
var values = Wb.getValue(app.form1);\
var cid = Wb.getVal(app.form1, 'ID');\
var copyId = Wb.getVal(app.form1, 'COPY_ID');\
var url = \"\";\
if(!Wb.isEmpty(copyId)){\
  url = \"m?xwl=feeManage/contract/java/copy\";\
}else if(Wb.isEmpty(cid)){\
  url = \"m?xwl=feeManage/contract/java/insert\";\
}else{\
  url = \"m?xwl=feeManage/contract/java/update\";\
}\
Wb.upload({\
  form: app.form1,\
  showProgress: true,\
  url: url,\
  params: values,\
  success: function(resp) {\
    app.concatGrid.store.load();\
    app.concatWin.hide();\
    app.tree1.store.load();\
  }\
});"}
   },
   {
    "configs": {
     "layout": "absolute",
     "itemId": "verifyWin",
     "dialog": "false",
     "closeAction": "hide",
     "width": "824",
     "title": "合同审核",
     "height": "512"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "layout": "absolute",
       "itemId": "form2",
       "x": "8",
       "width": "800",
       "y": "8",
       "height": "304"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "vID",
         "hidden": "true",
         "width": "240",
         "x": "24",
         "y": "8",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vDESCRIPTION",
         "labelAlign": "right",
         "fieldLabel": "合同名称",
         "width": "260",
         "x": "-16",
         "y": "16",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vLIFE_STATUS",
         "labelAlign": "right",
         "pickList": "[[1,'启用'],[2,'不启用']]",
         "fieldLabel": "启用状态",
         "width": "260",
         "x": "520",
         "y": "80",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "vORIGINAL_CONTRACT_ID",
         "labelAlign": "right",
         "fieldLabel": "原始合同编号",
         "width": "260",
         "x": "520",
         "y": "16",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vCONTRACT_NO",
         "labelAlign": "right",
         "fieldLabel": "合同编号",
         "width": "260",
         "x": "248",
         "y": "16",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vVERSION_MEMO",
         "labelAlign": "right",
         "fieldLabel": "版本备注",
         "width": "260",
         "x": "520",
         "y": "176",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vCONFIRM_USER",
         "labelAlign": "right",
         "fieldLabel": "合同确认人",
         "width": "260",
         "x": "-16",
         "y": "112",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vVERSION",
         "labelAlign": "right",
         "fieldLabel": "版本号",
         "width": "260",
         "x": "248",
         "y": "176",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vPAYMENT_AGENT",
         "labelAlign": "right",
         "fieldLabel": "付费代理",
         "width": "260",
         "x": "520",
         "y": "112",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vAPPROVE_MEMO",
         "labelAlign": "right",
         "fieldLabel": "审核备注",
         "width": "404",
         "x": "376",
         "y": "208",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vBIZ_SCOPE",
         "labelAlign": "right",
         "fieldLabel": "业务范围",
         "width": "380",
         "x": "-16",
         "y": "208",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vNOTES",
         "labelAlign": "right",
         "fieldLabel": "备注",
         "width": "796",
         "x": "-16",
         "y": "240",
         "labelWidth": "110",
         "height": "24"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "vEFFECTIVE_DATE",
         "labelAlign": "right",
         "fieldLabel": "生效日期",
         "x": "-16",
         "width": "260",
         "y": "48",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "vEXPIRED_DATE",
         "labelAlign": "right",
         "fieldLabel": "失效日期",
         "x": "248",
         "width": "260",
         "y": "48",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "vCONFIRM_STATUS",
         "labelAlign": "right",
         "pickList": "[[0,'未提交'],[1,'已提交未审核'],[2,'已经审核'],[3,'未通过']]",
         "fieldLabel": "合同审核",
         "width": "260",
         "x": "-16",
         "y": "80",
         "labelWidth": "110",
         "disabled": "true",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "vCONFIRM_DATE",
         "labelAlign": "right",
         "fieldLabel": "合同确认时间",
         "x": "248",
         "width": "260",
         "y": "80",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "vPAYMENT_TYPE",
         "labelAlign": "right",
         "pickList": "[[0,'现金'],[1,'挂账']]",
         "fieldLabel": "付费类型",
         "width": "260",
         "x": "248",
         "y": "112",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "vCONTRACT_TYPE",
         "labelAlign": "right",
         "pickList": "[[0,'船方'],[1,'货方']]",
         "fieldLabel": "合同类型",
         "width": "260",
         "x": "-16",
         "y": "144",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "vEXPAND_TO",
         "labelAlign": "right",
         "fieldLabel": "过期时间延长值",
         "x": "520",
         "width": "260",
         "y": "48",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "vTRADE_TYPE",
         "labelAlign": "right",
         "pickList": "[['E','外贸'],['I','内贸']]",
         "fieldLabel": "贸易类型",
         "width": "260",
         "x": "248",
         "y": "144",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "vCATEGORY",
         "labelAlign": "right",
         "pickList": "[[0,'草稿'],[1,'模版'],[2,'正常合同']]",
         "fieldLabel": "合同属性",
         "width": "260",
         "x": "520",
         "y": "144",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "vCURRENCY_ID",
         "labelAlign": "right",
         "pickList": "[[1,'现金'],[2,'月结'],[3,'托收单']]",
         "fieldLabel": "结算类型",
         "width": "260",
         "x": "-16",
         "y": "176",
         "labelWidth": "110",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "vFILE_PATH",
         "labelAlign": "right",
         "fieldLabel": "附件",
         "width": "787",
         "x": "-8",
         "multiple": "true",
         "y": "272",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "file"
       }
      ],
      "type": "form"
     },
     {
      "configs": {
       "layout": "fit",
       "itemId": "vpanelCbzs",
       "x": "8",
       "width": "800",
       "y": "312",
       "frame": "true",
       "height": "143"
      },
      "expanded": true,
      "children": [{
       "configs": {
        "itemId": "vgrid",
        "tbar": "app.tbarCbzs",
        "disabled": "false",
        "region": "center",
        "multiSelect": "true"
       },
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "url": "m?xwl=feeManage/contract/sql/queryFile"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        },
        {
         "configs": {"itemId": "columns"},
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "vcolID",
            "hidden": "true",
            "dataIndex": "ID",
            "text": "文件id"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "vM_ID",
            "hidden": "true",
            "dataIndex": "M_ID",
            "text": "表单id"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "vPATH",
            "hidden": "true",
            "dataIndex": "PATH",
            "text": "路径"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "column1",
            "xtype": "rownumberer",
            "width": "30"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "vM_NAME",
            "dataIndex": "M_NAME",
            "width": "260",
            "text": "文件名"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "vCREATE_NAM",
            "dataIndex": "CREATE_NAM",
            "width": "80",
            "text": "创建人"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "vCREATE_TIM",
            "dataIndex": "CREATE_TIM",
            "width": "80",
            "text": "创建时间"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "vactionColumns",
            "xtype": "actioncolumn",
            "width": "60",
            "text": "下载",
            "align": "center"
           },
           "expanded": true,
           "children": [{
            "configs": {"itemId": "items"},
            "expanded": true,
            "children": [{
             "configs": {
              "itemId": "vfileDown",
              "handler": "/*app.imgWin.setTitle('图片 - ' + record.data.NAME);\
app.imgWin.setIconCls('zoom_icon');\
app.imgWin.down('[iconCls=ok_icon]').hide(true); //隐藏窗体确定按钮\
//重置图片\
app.image1.setSrc('');\
//设置图片地址\
app.image1.setSrc(record.data.PHOTO);\
//显示图片\
app.imgWin.show();*/\
var path ='{#path#}' + record.data.PATH;\
//path = path.substring(1, path.length);\
\
Wb.download('m?xwl=dev/ide/download', {\
  files: [path],\
  foo: 'bar'\
});",
              "tooltip": "下载附件",
              "iconCls": "level_down_icon"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }],
            "type": "array"
           }],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "vactionColumns1",
            "xtype": "actioncolumn",
            "width": "60",
            "text": "删除",
            "align": "center"
           },
           "expanded": true,
           "children": [{
            "configs": {"itemId": "items"},
            "expanded": true,
            "children": [{
             "configs": {
              "itemId": "vdelFile",
              "handler": "var model = app.vgridCBZS.getSelectionModel();\
model.select(rowIndex);\
var param ={\
  url : 'm?xwl=feeManage/contract/sql/delFile',\
  params:{ID: record.data.ID},\
//   failure :function(){\
//     alert('数据已被使用，不能删除！');\
//   },\
  titleField:'M_NAME'\
};\
\
Wb.del(app.vgridCBZS, param);\
",
              "tooltip": "删除附件",
              "iconCls": "file_delete_icon"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }],
            "type": "array"
           }],
           "type": "column"
          }
         ],
         "type": "array"
        }
       ],
       "type": "grid"
      }],
      "type": "panel"
     }
    ],
    "type": "window",
    "events": {"ok": "if(app.vCONFIRM_STATUS == 2){\
  Wb.warn(\"该合同已审核！\");\
  return;\
}\
var values = Wb.getValue(app.form2);\
\
var url =  \"m?xwl=feeManage/contract/java/verify\";\
\
\
Wb.request({\
  url: url,\
  params: values,\
  success: function(resp) {\
    app.vgrid.store.load();\
    app.verifyWin.hide();\
  }\
});"}
   },
   {
    "configs": {
     "layout": "absolute",
     "itemId": "feeClassWin",
     "dialog": "true",
     "closeAction": "hide",
     "width": "344",
     "title": "费类维护",
     "height": "416"
    },
    "expanded": false,
    "children": [{
     "configs": {
      "itemId": "feeClassWinGrid",
      "submitSelect": "true",
      "selType": "checkboxmodel",
      "sortableColumns": "false",
      "simpleSelect": "true",
      "pagingBar": "false",
      "x": "8",
      "width": "320",
      "y": "8",
      "region": "center",
      "multiSelect": "true",
      "height": "344"
     },
     "expanded": true,
     "children": [
      {
       "configs": {
        "itemId": "store",
        "remoteSort": "true",
        "autoLoad": "false",
        "pageSize": "-1",
        "params": "{fldId:'C_BASE_CATEGORY'}",
        "url": "m?xwl=system/common/codeSelect"
       },
       "expanded": false,
       "children": [],
       "type": "store"
      },
      {
       "configs": {"itemId": "columns"},
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "id",
          "hidden": "true",
          "dataIndex": "COD",
          "text": "编号"
         },
         "expanded": true,
         "children": [],
         "type": "column"
        },
        {
         "configs": {
          "itemId": "name",
          "dataIndex": "CNAME",
          "width": "200",
          "text": "费类"
         },
         "expanded": false,
         "children": [],
         "type": "column"
        }
       ],
       "type": "array"
      }
     ],
     "type": "grid",
     "events": {"beforeselect": "app.pickComp.store.load({params:{itemId:app.hidTreeID.getValue()}});"}
    }],
    "type": "window",
    "events": {"ok": "/*\
var values = Wb.getValue(app.feeClassWin);\
var cid = Wb.getVal(app.feeClassWin, 'ID');\
var url = \"\";\
if(cid === \"\"){\
  url = \"m?xwl=feeManage/contract/category/java/insert\";\
}else{\
  url = \"m?xwl=feeManage/contract/category/java/update\";\
}\
Wb.request({\
  url: url,\
  params: values,\
  success: function(resp) {\
    app.feeClassGrid.store.load({params:{CONTRACT_ID:app.hidTreeID.getValue()}});\
    app.feeClassWin.hide();\
    app.tree1.store.reload();\
  }\
});\
*/\
\
var ids=new Array();\
     var sels2 = app.feeClassWinGrid.getSelection();\
    Wb.each(sels2,function (sel){\
\t  ids.push(sel.data.ID);\
\t});\
    Wb.request({\
      url: 'm?xwl=feeManage/contract/category/java/insert',\
      params: {ids:ids,ID:app.hidContract.getValue()}, //合并窗口和记录数据作为参数，后者为默认值\
      success: function() {\
        alert(\"保存成功\");\
        app.feeClassWin.hide();\
        app.feeClassGrid.store.load({params:{CONTRACT_ID:app.hidContract.getValue()}});\
        app.tree1.store.load();\
      }\
    });"}
   },
   {
    "configs": {
     "layout": "absolute",
     "itemId": "feeItemWin",
     "dialog": "true",
     "closeAction": "hide",
     "width": "344",
     "title": "费目维护",
     "height": "336"
    },
    "expanded": false,
    "children": [{
     "configs": {
      "itemId": "feeItemWinGrid",
      "submitSelect": "true",
      "selType": "checkboxmodel",
      "sortableColumns": "false",
      "simpleSelect": "true",
      "pagingBar": "false",
      "x": "8",
      "width": "320",
      "y": "8",
      "region": "center",
      "multiSelect": "true",
      "height": "264"
     },
     "expanded": true,
     "children": [
      {
       "configs": {
        "itemId": "store",
        "remoteSort": "true",
        "autoLoad": "false",
        "pageSize": "-1",
        "url": "m?xwl=feeManage/feeReportItem/sql/queryCantact"
       },
       "expanded": false,
       "children": [],
       "type": "store"
      },
      {
       "configs": {"itemId": "columns"},
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "id",
          "hidden": "true",
          "dataIndex": "CHARGING_ID",
          "text": "编号"
         },
         "expanded": true,
         "children": [],
         "type": "column"
        },
        {
         "configs": {
          "itemId": "name",
          "dataIndex": "DESCRIPTION",
          "width": "200",
          "text": "费类"
         },
         "expanded": false,
         "children": [],
         "type": "column"
        }
       ],
       "type": "array"
      }
     ],
     "type": "grid"
    }],
    "type": "window",
    "events": {"ok": "var ids=new Array();\
     var sels2 = app.feeItemWinGrid.getSelection();\
    Wb.each(sels2,function (sel){\
\t  ids.push(sel.data.CHARGING_ID);\
\t});\
    Wb.request({\
      url: 'm?xwl=feeManage/contract/item/java/insert',\
      params: {ids:ids,\
               CONTRACT_ID:app.hidContract.getValue(),\
               CATEGORY_ID:app.hidTreeID.getValue()}, //合并窗口和记录数据作为参数，后者为默认值\
      success: function() {\
        alert(\"保存成功\");\
        app.feeItemWin.hide();\
        app.feeItemGrid.store.load({params:{CONTRACT_ID:app.hidContract.getValue(),CATEGORY_ID:app.hidTreeID.getValue()}});\
        app.tree1.store.load();\
      }\
    });"}
   },
   {
    "configs": {
     "layout": "absolute",
     "dialog": "true",
     "itemId": "customWin",
     "closeAction": "hide",
     "width": "824",
     "title": "费率维护",
     "height": "376"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "itemId": "ID",
       "hidden": "true",
       "x": "528",
       "width": "240",
       "y": "320",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "DESCRIPTION",
       "allowBlank": "true",
       "labelAlign": "right",
       "fieldLabel": "<font color='red'>*<\/font>描述",
       "width": "240",
       "x": "0",
       "y": "16",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text",
      "events": {"change": "//text.setValue(newValue.toUpperCase());"}
     },
     {
      "configs": {
       "itemId": "FILTER_ID",
       "hidden": "true",
       "labelAlign": "right",
       "x": "32",
       "width": "240",
       "y": "320",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "FILTER_NAME",
       "labelAlign": "right",
       "fieldLabel": "<font color='red'>*<\/font>费率条件",
       "width": "488",
       "x": "248",
       "y": "16",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": true,
      "children": [{
       "configs": {
        "itemId": "pickComp",
        "width": "900",
        "height": "250"
       },
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "url": "m?xwl=feeManage/rule/java/queryRuleByItem"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        },
        {
         "configs": {"itemId": "columns"},
         "expanded": false,
         "children": [
          {
           "configs": {
            "itemId": "id",
            "hidden": "true",
            "dataIndex": "ID"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "description",
            "dataIndex": "DESCRIPTION",
            "width": "180",
            "text": "条件名称"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          },
          {
           "configs": {
            "itemId": "notes",
            "dataIndex": "NOTES",
            "flex": "1",
            "text": "备注"
           },
           "expanded": false,
           "children": [],
           "type": "column"
          }
         ],
         "type": "array"
        }
       ],
       "type": "grid",
       "events": {"itemclick": "var picker = this.ownerCmp;\
picker.setValue(record.data.DESCRIPTION);\
app.FILTER_ID.setValue(record.data.ID); //把记录EMPLOYEE_ID存放在隐藏域中，可方便被提交到后台\
picker.collapse();"}
      }],
      "type": "picker",
      "events": {"focus": "app.pickComp.store.load({params:{itemId:app.hidTreeID.getValue()}});"}
     },
     {
      "configs": {
       "itemId": "RATE_TYPE",
       "labelAlign": "right",
       "pickList": "[[0,'普通'], [1,'分段']]",
       "fieldLabel": "计费类型",
       "x": "496",
       "width": "240",
       "y": "48",
       "labelWidth": "90",
       "height": "24"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "GL_CODE",
       "labelAlign": "right",
       "fieldLabel": "会计科目",
       "width": "240",
       "x": "496",
       "y": "184",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "RATE",
       "labelAlign": "right",
       "fieldLabel": "<font color='red'>*<\/font>费率金额",
       "x": "0",
       "width": "240",
       "y": "48",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "DISCOUNT",
       "labelAlign": "right",
       "fieldLabel": "折扣",
       "x": "248",
       "width": "240",
       "y": "48",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "CURRENCY",
       "labelAlign": "right",
       "fieldLabel": "币种",
       "x": "0",
       "width": "240",
       "y": "80",
       "displayField": "CNAME",
       "labelWidth": "90",
       "valueField": "ID",
       "height": "22"
      },
      "expanded": true,
      "children": [{
       "configs": {
        "itemId": "store",
        "autoLoad": "true",
        "params": "{fldId:'C_CURRENCY'}",
        "url": "m?xwl=system/common/codeSelect"
       },
       "expanded": false,
       "children": [],
       "type": "store"
      }],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "FLAT_RATE",
       "labelAlign": "right",
       "pickList": "[[0,'否'], [1,'是']]",
       "fieldLabel": "是否统一费率",
       "x": "0",
       "width": "240",
       "y": "112",
       "labelWidth": "90",
       "height": "24"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "MIN_AMOUNT",
       "labelAlign": "right",
       "fieldLabel": "最小金额",
       "x": "248",
       "width": "240",
       "y": "80",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "MAX_AMOUNT",
       "labelAlign": "right",
       "fieldLabel": "最大金额",
       "x": "496",
       "width": "240",
       "y": "80",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "IS_VACATION",
       "labelAlign": "right",
       "pickList": "[[0,'否'], [1,'是']]",
       "fieldLabel": "是否假期计费",
       "x": "248",
       "width": "240",
       "y": "112",
       "labelWidth": "90",
       "valueField": "0",
       "height": "24"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "IS_NIGHTSHIFT",
       "labelAlign": "right",
       "pickList": "[[0,'否'], [1,'是']]",
       "fieldLabel": "是否夜班计费",
       "x": "496",
       "width": "240",
       "y": "112",
       "labelWidth": "90",
       "height": "24"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "IS_WEEKDAY",
       "labelAlign": "right",
       "pickList": "[[0,'否'], [1,'是']]",
       "fieldLabel": "是否周末计费",
       "x": "496",
       "width": "240",
       "y": "144",
       "labelWidth": "90",
       "height": "24"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "IS_TIMES",
       "labelAlign": "right",
       "pickList": "[[0,'否'], [1,'是']]",
       "fieldLabel": "是否按时间段计费",
       "x": "0",
       "width": "240",
       "y": "144",
       "labelWidth": "90",
       "height": "31"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "START_FIELD",
       "labelAlign": "right",
       "fieldLabel": "优惠起始",
       "width": "240",
       "x": "0",
       "y": "184",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "END_FIELD",
       "labelAlign": "right",
       "fieldLabel": "优惠截止",
       "width": "240",
       "x": "248",
       "y": "184",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "TIME_UNIT",
       "labelAlign": "right",
       "pickList": "[[1,'分钟'], [2,'小时'], [3,'天']]",
       "fieldLabel": "时间段计费单位",
       "x": "248",
       "width": "240",
       "y": "144",
       "labelWidth": "90",
       "height": "31"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "NOTES",
       "labelAlign": "right",
       "fieldLabel": "备注",
       "x": "0",
       "width": "728",
       "y": "248",
       "labelWidth": "90",
       "height": "70"
      },
      "expanded": false,
      "children": [],
      "type": "textarea"
     },
     {
      "configs": {
       "itemId": "CONTRACT_ID",
       "hidden": "true",
       "labelAlign": "right",
       "x": "8",
       "width": "240",
       "y": "-16",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CUSTOMERS",
       "labelAlign": "right",
       "fieldLabel": "选择客户",
       "x": "0",
       "width": "418",
       "keyName": "C_BASE_DICT",
       "y": "216",
       "labelWidth": "90",
       "height": "24",
       "multiSelect": "true"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     }
    ],
    "type": "window",
    "events": {"ok": "\
if(Wb.isEmpty(app.FILTER_ID.getValue())){\
  alert(\"费率条件不允许为空！\");\
  return;\
}\
app.CONTRACT_ID.setValue(app.hidContract.getValue());\
var values = Wb.getValue([app.customWin, app.hidTreeID]);\
var cid = app.ID.getValue();\
var url = \"\";\
if(cid === \"\"){\
  url = \"m?xwl=feeManage/tariff/java/insert\";\
}else{\
  url = \"m?xwl=feeManage/tariff/java/update\";\
}\
\
Wb.request({\
  url: url,\
  params: values,\
  success: function(resp) {\
    app.grid1.store.load({\
      params:{CONTRACT_ID:app.hidContract.getValue(), CHARGING_ID:app.hidTreeID.getValue()}     \
\t});\
    app.customWin.hide();\
  }\
});"}
   },
   {
    "configs": {
     "layout": "border",
     "itemId": "viewport1"
    },
    "expanded": false,
    "children": [{
     "configs": {
      "layout": "border",
      "itemId": "panel1",
      "split": "true",
      "region": "center"
     },
     "expanded": true,
     "children": [
      {
       "configs": {
        "layout": "fit",
        "itemId": "tree_panel",
        "split": "true",
        "normalName": "合同树",
        "width": "200",
        "region": "west"
       },
       "expanded": true,
       "children": [{
        "configs": {
         "itemId": "tree1",
         "root": "{ID:'-1', text:'合同列表', LEVELS:1}"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "url": "m?xwl=feeManage/tariff/java/tariffTree"
         },
         "expanded": false,
         "children": [],
         "type": "store",
         "events": {"beforeload": "\
var node = operation.node;\
\
//alert(node.isRoot());\
operation.params.parentId = node.isRoot() ? '-1' : node.data.ID;\
operation.params.level = node.isRoot() ? 1 : node.data.LEVELS;\
operation.params.contractId = node.data.CONTRACT_ID;\
// if(operation.params.level == 3){\
//   return false;\
// }"}
        }],
        "type": "tree",
        "events": {"itemclick": "\
var nodeId = record.data.ID === undefined?\"-1\": record.data.ID;\
var hidLevel = record.data.LEVELS === undefined?1:record.data.LEVELS;\
var hidContract = record.data.CONTRACT_ID;\
//app.grid1.store.load({params:{parentId:record.data.ID}});\
//alert(nodeId);\
// if(hidLevel != 3){\
//   app.hidTreeID.setValue(\"\");\
//   app.hidLevel.setValue(\"\");\
//   return;\
// }\
app.hidTreeID.setValue(nodeId);\
app.hidLevel.setValue(hidLevel);\
app.hidContract.setValue(hidContract);\
// //Wb.remove(app.ritem_grid);\
// app.ritem_grid.getStore().removeAll();\
// app.grid1.store.load({\
//   out: app.panel1\
// });\
//查询所有合同\
if(hidLevel == 1){\
  app.concatGrid.show();\
  app.feeClassGrid.hide();\
  app.feeItemGrid.hide();\
  app.tariff_panel.hide();\
  app.concatGrid.store.load();\
}\
//查询合同下费类\
if(hidLevel == 2){\
  app.concatGrid.hide();\
  app.feeClassGrid.show();\
  app.feeItemGrid.hide();\
  app.tariff_panel.hide();\
  app.feeClassGrid.store.load({params:{CONTRACT_ID:hidContract}});\
}\
//查询合同费类下费目\
if(hidLevel == 3){\
  app.concatGrid.hide();\
  app.feeClassGrid.hide();\
  app.feeItemGrid.show();\
  app.tariff_panel.hide();\
  app.feeItemGrid.store.load({params:{CONTRACT_ID:hidContract, CATEGORY_ID:nodeId}});\
}\
//查询合同费目下费率\
if(hidLevel == 4){\
  app.ritem_grid.store.removeAll();\
  app.concatGrid.hide();\
  app.feeClassGrid.hide();\
  app.feeItemGrid.hide();\
  app.tariff_panel.show();\
  //app.pickComp.store.load({params:{itemId:nodeId}});\
  app.grid1.store.load({params:{CONTRACT_ID:hidContract, CHARGING_ID:nodeId}});\
}\
"}
       }],
       "type": "panel"
      },
      {
       "configs": {
        "layout": "fit",
        "itemId": "right_panel",
        "split": "true",
        "region": "center",
        "height": "300"
       },
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "hidTreeID",
          "hidden": "true"
         },
         "expanded": false,
         "children": [],
         "type": "text"
        },
        {
         "configs": {
          "itemId": "hidLevel",
          "hidden": "true"
         },
         "expanded": false,
         "children": [],
         "type": "text"
        },
        {
         "configs": {
          "itemId": "hidContract",
          "hidden": "true"
         },
         "expanded": false,
         "children": [],
         "type": "text"
        },
        {
         "configs": {
          "itemId": "concatGrid",
          "viewConfig": " {enableTextSelection:true}"
         },
         "expanded": true,
         "children": [
          {
           "configs": {"itemId": "tbar"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "addConcatMenu",
              "text": "新增",
              "iconCls": "record_add_icon"
             },
             "expanded": false,
             "children": [],
             "type": "item",
             "events": {"click": "Wb.reset(app.concatWin);\
app.gridCBZS.store.removeAll();\
app.concatWin.setTitle('添加 - 合同');\
app.concatWin.setIconCls('record_add_icon');\
app.CONFIRM_STATUS.setValue(0);\
app.concatWin.show();\
app.isEdit = false; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性"}
            },
            {
             "configs": {
              "itemId": "editConcatMenu",
              "text": "编辑",
              "iconCls": "record_edit_icon"
             },
             "expanded": false,
             "children": [],
             "type": "item",
             "events": {"click": "var rec = app.concatGrid.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择 1 条需要修改的记录');\
  return;\
}\
app.concatWin.setIconCls('record_edit_icon');\
app.concatWin.setTitle('修改-合同');\
app.concatWin.show();\
Wb.setValue(app.concatWin,rec.data); \
app.gridCBZS.store.load({params:{M_ID:rec.data.ID}});\
\
//把记录数据应用到窗口\
app.isEdit = true;"}
            },
            {
             "configs": {
              "itemId": "delConcatMenu",
              "text": "删除",
              "iconCls": "record_delete_icon"
             },
             "expanded": false,
             "children": [],
             "type": "item",
             "events": {"click": "var rec = app.concatGrid.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择 1 条需要删除的记录');\
  return;\
}\
var param ={\
  url : 'm?xwl=feeManage/contract/java/delete',\
  params:{id: rec.data.ID},\
  titleField:'DESCRIPTION'\
};\
\
Wb.del(app.concatGrid, param);\
app.tree1.store.load();"}
            },
            {
             "configs": {
              "itemId": "copyConcatMenu",
              "text": "复制合同",
              "iconCls": "db_form_add_icon"
             },
             "expanded": true,
             "children": [],
             "type": "item",
             "events": {"click": "Wb.reset(app.concatWin);\
var rec = app.concatGrid.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择 1 条需要复制的合同');\
  return;\
}\
app.concatWin.setIconCls('record_edit_icon');\
app.concatWin.setTitle('复制合同');\
app.concatWin.show();\
Wb.setVal(app.concatWin,'COPY_ID',rec.data.ID); \
Wb.setVal(app.concatWin,'DESCRIPTION',rec.data.DESCRIPTION+'_cpy');\
Wb.setVal(app.concatWin,'LIFE_STATUS',1);\
\
//把记录数据应用到窗口\
app.isEdit = false;"}
            },
            {
             "configs": {
              "itemId": "verifyConcatMenu",
              "hidden": "!{#verifyConcatMenu#}",
              "text": "合同审核",
              "iconCls": "db_form_add_icon"
             },
             "expanded": false,
             "children": [],
             "type": "item",
             "events": {"click": "Wb.reset(app.verifyWin);\
var rec = app.concatGrid.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择 1 条需要审核的合同');\
  return;\
}\
app.verifyWin.setIconCls('record_edit_icon');\
app.verifyWin.setTitle('合同审核');\
app.verifyWin.show();\
Wb.setValue(app.verifyWin,rec.data); \
app.vgrid.store.load({params:{M_ID:rec.data.ID}});\
\
//把记录数据应用到窗口\
app.isEdit = false;"}
            }
           ],
           "type": "toolbar"
          },
          {
           "configs": {
            "itemId": "store",
            "autoLoad": "false",
            "url": "m?xwl=feeManage/contract/java/queryAll"
           },
           "expanded": false,
           "children": [],
           "type": "store"
          },
          {
           "configs": {"itemId": "columns"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "colID",
              "hidden": "true",
              "dataIndex": "ID",
              "text": "合同号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "colDESCRIPTION",
              "dataIndex": "DESCRIPTION",
              "text": "合同名"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "colLIFE_STATUS",
              "renderer": "if(value == \"1\"){\
\treturn \"启用\";\
}else if(value == \"2\"){\
\treturn \"不启用\";\
}",
              "dataIndex": "LIFE_STATUS",
              "text": "启用状态"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CONTRACT_NO",
              "dataIndex": "CONTRACT_NO",
              "text": "合同编号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_ORIGINAL_CONTRACT_ID",
              "dataIndex": "ORIGINAL_CONTRACT_ID",
              "text": "原始合同编号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_EFFECTIVE_DATE",
              "dataIndex": "EFFECTIVE_DATE",
              "text": "生效日期"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_EXPIRED_DATE",
              "dataIndex": "EXPIRED_DATE",
              "text": "失效日期"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CONFIRM_STATUS",
              "renderer": "if(value == 0){\
\treturn \"未提交\";\
}\
if(value == 1){\
\treturn \"已提交未审核\";\
}\
if(value == 2){\
\treturn \"已经审核\";\
}\
if(value == 3){\
\treturn \"未通过\";\
}",
              "dataIndex": "CONFIRM_STATUS",
              "text": "合同审核"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CONFIRM_USER",
              "dataIndex": "CONFIRM_USER",
              "text": "合同确认人"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CONFIRM_DATE",
              "dataIndex": "CONFIRM_DATE",
              "text": "合同确认时间"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_PAYMENT_AGENT",
              "dataIndex": "PAYMENT_AGENT",
              "text": "付费代理"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_PAYMENT_TYPE",
              "renderer": "if(value == 0){\
\treturn \"现金\";\
}\
if(value == 1){\
\treturn \"挂账\";\
}\
",
              "dataIndex": "PAYMENT_TYPE",
              "text": "付费类型"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CONTRACT_TYPE",
              "renderer": "if(value == 0){\
\treturn \"船方\";\
}\
if(value == 1){\
\treturn \"货方\";\
}\
",
              "dataIndex": "CONTRACT_TYPE",
              "text": "合同类型"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_EXPAND_TO",
              "dataIndex": "EXPAND_TO",
              "text": "过期时间延长值"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_TRADE_TYPE",
              "renderer": "if(value == 'E'){\
\treturn \"外贸\";\
}\
if(value == 'I'){\
\treturn \"内贸\";\
}\
",
              "dataIndex": "TRADE_TYPE",
              "text": "贸易类型"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_BIZ_SCOPE",
              "dataIndex": "BIZ_SCOPE",
              "text": "业务范围"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CATEGORY",
              "renderer": "\
if(value == 0){\
\treturn \"草稿\";\
}\
if(value == 1){\
\treturn \"模版\";\
}\
if(value == 2){\
\treturn \"正常合同\";\
}\
",
              "dataIndex": "CATEGORY",
              "text": "合同属性"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_VERSION",
              "dataIndex": "VERSION",
              "text": "版本号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_VERSION_MEMO",
              "dataIndex": "VERSION_MEMO",
              "text": "版本备注"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CURRENCY_ID",
              "renderer": "if(value == 1){\
\treturn \"现金\";\
}\
if(value == 2){\
\treturn \"月结\";\
}\
if(value == 3){\
\treturn \"托收单\";\
}",
              "dataIndex": "CURRENCY_ID",
              "text": "结算类型"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_APPROVE_MEMO",
              "dataIndex": "APPROVE_MEMO",
              "text": "审核备注"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "colCREATEUSER",
              "dataIndex": "CREATEUSER",
              "text": "创建人"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "colCREATETIME",
              "dataIndex": "CREATETIME",
              "text": "创建时间"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }
           ],
           "type": "array"
          }
         ],
         "type": "grid"
        },
        {
         "configs": {
          "itemId": "feeClassGrid",
          "title": "费类信息"
         },
         "expanded": false,
         "children": [
          {
           "configs": {"itemId": "tbar"},
           "expanded": true,
           "children": [{
            "configs": {
             "itemId": "editFeeClassMenu",
             "text": "选择费类",
             "iconCls": "db_form_add_icon"
            },
            "expanded": false,
            "children": [],
            "type": "item",
            "events": {"click": "\
app.feeClassWin.show();\
app.feeClassWinGrid.store.load();\
Wb.request({\
    url: 'm?xwl=feeManage/contract/category/java/queryCateByContract',\
    params: {CONTRACT_ID:app.hidContract.getValue()},\
    success: function(resp) {\
      var roleRec;\
      var selRecs = [];\
      var roles = Wb.decode(resp.responseText);\
      Wb.each(roles.rows, function(data) {\
        roleRec = Wb.find(app.feeClassWinGrid.store, 'ID', data.CATEGORY_ID);\
        if (roleRec){\
          selRecs.push(roleRec);\
        }\
      });\
      app.feeClassWinGrid.setSelection(selRecs);\
      \
    }\
});\
"}
           }],
           "type": "toolbar"
          },
          {
           "configs": {
            "itemId": "store",
            "autoLoad": "false",
            "url": "m?xwl=feeManage/contract/category/java/queryCateByContract"
           },
           "expanded": false,
           "children": [],
           "type": "store"
          },
          {
           "configs": {"itemId": "columns"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "col_ID",
              "hidden": "true",
              "dataIndex": "ID",
              "text": "编号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CATEGORY_ID",
              "dataIndex": "CATEGORY_ID",
              "keyName": "C_BASE_CATEGORY",
              "text": "费类名称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "isAll",
              "renderer": "if(value == 1){\
  return \"包干\";\
}else{\
  return \"不包干\";\
}",
              "dataIndex": "IS_ALL",
              "text": "是否包干"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_EFFECTIVED",
              "renderer": "if(value == 0){\
  return \"草稿\";\
}\
if(value == 1){\
  return \"已生效\";\
}\
if(value == 2){\
  return \"已迁出\";\
}\
if(value == 3){\
  return \"已禁用\";\
}\
if(value == 4){\
  return \"历史版本\";\
}",
              "dataIndex": "EFFECTIVED",
              "text": "规则状态"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_ENABLED",
              "renderer": "if(value == 0){\
  return \"失效\";\
}\
if(value == 1){\
  return \"有效\";\
}",
              "dataIndex": "ENABLED",
              "text": "是否有效"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_BIZ_SCOPE",
              "dataIndex": "BIZ_SCOPE",
              "width": "150",
              "text": "业务范围"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "remark",
              "dataIndex": "NOTES",
              "width": "150",
              "text": "描述"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CREATEUSER",
              "dataIndex": "CREATEUSER",
              "text": "创建人"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CREATETIME",
              "dataIndex": "CREATETIME",
              "text": "创建时间"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }
           ],
           "type": "array"
          }
         ],
         "type": "grid"
        },
        {
         "configs": {
          "itemId": "feeItemGrid",
          "title": "费目信息"
         },
         "expanded": false,
         "children": [
          {
           "configs": {"itemId": "tbar"},
           "expanded": true,
           "children": [{
            "configs": {
             "itemId": "editFeeItemMenu",
             "text": "选择费目",
             "iconCls": "db_form_add_icon"
            },
            "expanded": false,
            "children": [],
            "type": "item",
            "events": {"click": "app.feeItemWin.show();\
app.feeItemWinGrid.store.load({params:{CATEGORY_ID:app.hidTreeID.getValue()}});\
Wb.request({\
    url: 'm?xwl=feeManage/contract/item/java/queryItemByCate',\
    params: {CONTRACT_ID:app.hidContract.getValue(), CATEGORY_ID:app.hidTreeID.getValue() },\
    success: function(resp) {\
      var roleRec;\
      var selRecs = [];\
      var roles = Wb.decode(resp.responseText);\
      Wb.each(roles.rows, function(data) {\
        roleRec = Wb.find(app.feeItemWinGrid.store, 'CHARGING_ID', data.ITEM_ID);\
        if (roleRec){\
          selRecs.push(roleRec);\
        }\
      });\
      app.feeItemWinGrid.setSelection(selRecs);\
      \
    }\
});\
"}
           }],
           "type": "toolbar"
          },
          {
           "configs": {
            "itemId": "store",
            "autoLoad": "false",
            "url": "m?xwl=feeManage/contract/item/java/queryItemByCate"
           },
           "expanded": false,
           "children": [],
           "type": "store"
          },
          {
           "configs": {"itemId": "columns"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "col_ID",
              "hidden": "true",
              "dataIndex": "ID",
              "text": "编号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "name",
              "dataIndex": "DESCRIPTION",
              "width": "150",
              "text": "费目名称"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "invoiceType",
              "dataIndex": "INVOICE_TYPE",
              "keyName": "C_BASE_INVOICE",
              "text": "发票类型"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "rateType",
              "renderer": "if(value === 0){\
  return \"普通\";\
}\
if(value == 1){\
  return \"分段\";\
}",
              "dataIndex": "RATE_TYPE",
              "text": "费率类型"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "lifeStatus",
              "renderer": "if(value === 0){\
  return \"不启用\";\
}else if(value === 1){\
  return \"启用\";\
}",
              "hidden": "true",
              "dataIndex": "LIFE_STATUS",
              "text": "有效状态"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "minAmount",
              "dataIndex": "MIN_AMOUNT",
              "text": "最小金额"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "maxAmount",
              "dataIndex": "MAX_AMOUNT",
              "text": "最大金额"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "unit",
              "renderer": "if(value === 0){\
  return \"箱\";\
}\
if(value == 1){\
  return \"吨\";\
}\
if(value == 2){\
  return \"体积\";\
}\
if(value == 3){\
  return \"件\";\
}\
if(value == 4){\
  return \"票\";\
}\
if(value == 5){\
  return \"箱*天\";\
}\
if(value == 6){\
  return \"吨*天\";\
}",
              "dataIndex": "UNIT",
              "text": "计价单位"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "isAutocalc",
              "renderer": "\
if(value === 0){\
  return \"自动\";\
}else if(value === 1){\
  return \"手动\";\
}",
              "dataIndex": "IS_AUTOCALC",
              "text": "自动计算"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "isFormat",
              "renderer": "if(value === 1){\
  return \"是\";\
}else{\
  return \"否\";\
}",
              "dataIndex": "IS_FORMAT",
              "text": "是否取整"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "formatUnit",
              "renderer": "if(value === 0){\
  return \"分\";\
}\
if(value === 1){\
  return \"角\";\
}\
if(value === 2){\
  return \"元\";\
}\
if(value === 3){\
  return \"十元\";\
}",
              "dataIndex": "FORMAT_UNIT",
              "text": "取整单位"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "currency",
              "dataIndex": "CURRENCY",
              "keyName": "C_CURRENCY",
              "text": "币种"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "glCode",
              "dataIndex": "GL_CODE",
              "text": "会计科目"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "flatRate",
              "renderer": "if(value === 0){\
  return \"否\";\
}else if(value == 1){\
  return \"是\";\
}",
              "dataIndex": "FLAT_RATE",
              "text": "固定费率"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "isAll",
              "renderer": "\
if(value === 0){\
  return \"不包干\";\
}\
if(value === 1){\
  return \"包干\";\
}",
              "dataIndex": "IS_ALL",
              "text": "是否包干"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "accountType",
              "renderer": "\
if(value == 1){\
  return \"现金\";\
}\
if(value == 2){\
  return \"月结\";\
}\
if(value == 3){\
  return \"托收单\";\
}",
              "dataIndex": "ACCOUNT_TYPE",
              "text": "结算方式"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "isAverage",
              "renderer": "if(value === 0){\
  return \"否\";\
}\
if(value == 1){\
  return \"是\";\
}",
              "dataIndex": "IS_AVERAGE",
              "text": "分摊"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "notes",
              "dataIndex": "NOTES",
              "text": "备注"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CREATEUSER",
              "dataIndex": "CREATEUSER",
              "text": "创建人"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "col_CREATETIME",
              "dataIndex": "CREATETIME",
              "text": "创建时间"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }
           ],
           "type": "array"
          }
         ],
         "type": "grid"
        },
        {
         "configs": {
          "layout": "border",
          "itemId": "tariff_panel",
          "split": "true",
          "region": "center"
         },
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "toolbarBtn",
            "hidden": "false",
            "region": "north",
            "height": "30"
           },
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "addBtn",
              "text": "新增",
              "iconCls": "record_add_icon",
              "height": "22"
             },
             "expanded": false,
             "children": [],
             "type": "button",
             "events": {"click": "if(Wb.isEmpty(app.hidTreeID.getValue())){\
  alert(\"请先选择费目节点！\");\
  return;\
}\
\
Wb.reset(app.customWin);\
app.FLAT_RATE.setValue(0);\
app.CURRENCY.setValue('1');\
app.IS_NIGHTSHIFT.setValue(0);\
app.IS_WEEKDAY.setValue(0);\
app.IS_TIMES.setValue(0);\
app.IS_VACATION.setValue(0);\
app.DISCOUNT.setValue(100);\
\
app.customWin.setTitle('添加 - 费率');\
app.customWin.setIconCls('record_add_icon');\
app.customWin.show();\
app.isEdit = false; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性\
\
if(app.pickComp !== undefined){\
  app.pickComp.store.load({params:{itemId:app.hidTreeID.getValue()}});\
}"}
            },
            {
             "configs": {
              "itemId": "editBtn",
              "text": "编辑",
              "iconCls": "record_edit_icon",
              "height": "22"
             },
             "expanded": false,
             "children": [],
             "type": "button",
             "events": {"click": "var rec = app.grid1.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择 1 条需要修改的记录');\
  return;\
}\
app.customWin.setIconCls('record_edit_icon');\
app.customWin.setTitle('修改');\
app.customWin.show();\
Wb.setValue(app.customWin,rec.data); \
\
//把记录数据应用到窗口\
app.isEdit = true;\
//app.pickComp.store.load({params:{itemId:app.hidTreeID.getValue()}});"}
            },
            {
             "configs": {
              "itemId": "delBtn",
              "text": "删除",
              "iconCls": "record_delete_icon",
              "height": "22"
             },
             "expanded": false,
             "children": [],
             "type": "button",
             "events": {"click": "\
var rec = app.grid1.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择 1 条需要删除的记录');\
  return;\
}\
var param ={\
  url : 'm?xwl=feeManage/tariff/java/delete',\
  params:{id: rec.data.ID},\
//   failure :function(){\
//     alert('数据已被使用，不能删除！');\
//   },\
  titleField:'DESCRIPTION'\
};\
\
Wb.del(app.grid1, param);"}
            },
            {
             "configs": {
              "itemId": "resetBtn",
              "hidden": "true",
              "text": "重置",
              "iconCls": "record_add_icon",
              "height": "22"
             },
             "expanded": false,
             "children": [],
             "type": "button",
             "events": {"click": "\
Wb.reset(app.toolbar1);\
app.grid1.store.load({\
  out: app.panel1\
});"}
            },
            {
             "configs": {
              "itemId": "queryBtn",
              "hidden": "true",
              "text": "查询",
              "iconCls": "ajax_icon",
              "height": "22"
             },
             "expanded": false,
             "children": [],
             "type": "button",
             "events": {"click": "\
app.grid1.store.load({\
  out: app.panel1\
});"}
            },
            {
             "configs": {
              "itemId": "copyBtn",
              "text": "复制费率",
              "iconCls": "record_edit_icon",
              "height": "22"
             },
             "expanded": false,
             "children": [],
             "type": "button",
             "events": {"click": "var rec = app.grid1.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择 1 条需要修改的记录');\
  return;\
}\
app.customWin.setIconCls('record_edit_icon');\
app.customWin.setTitle('修改');\
app.customWin.show();\
Wb.setValue(app.customWin,rec.data); \
\
//把记录数据应用到窗口\
app.isEdit = true;\
//app.pickComp.store.load({params:{itemId:app.hidTreeID.getValue()}});"}
            }
           ],
           "type": "toolbar"
          },
          {
           "configs": {
            "itemId": "grid1",
            "region": "north",
            "height": "300"
           },
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "store",
              "autoLoad": "false",
              "url": "m?xwl=feeManage/tariff/java/findTariffByCategory"
             },
             "expanded": true,
             "children": [],
             "type": "store"
            },
            {
             "configs": {"itemId": "columns"},
             "expanded": true,
             "children": [
              {
               "configs": {
                "itemId": "id1",
                "hidden": "true",
                "dataIndex": "ID"
               },
               "expanded": true,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "DESCRIPTION1",
                "dataIndex": "DESCRIPTION",
                "text": "描述"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "NOTES1",
                "dataIndex": "NOTES",
                "text": "备注"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "FILTER_ID1",
                "hidden": "true",
                "dataIndex": "FILTER_ID",
                "text": "费率条件编号"
               },
               "expanded": true,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "FILTER_NAME1",
                "dataIndex": "FILTER_NAME",
                "text": "费率条件"
               },
               "expanded": true,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "RATE1",
                "dataIndex": "RATE",
                "text": "费率金额"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "CUSTOMERS1",
                "dataIndex": "CUSTOMERS",
                "keyName": "C_BASE_DICT",
                "text": "客户"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "DISCOUNT1",
                "dataIndex": "DISCOUNT",
                "text": "折扣"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "CURRENCY1",
                "dataIndex": "CURRENCY",
                "keyName": "C_CURRENCY",
                "text": "币种"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "GL_CODE1",
                "dataIndex": "GL_CODE",
                "text": "会计科目"
               },
               "expanded": true,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "RATE_TYPE1",
                "renderer": "if(value == '0'){\
    return \"普通\";\
}else if(value == '1'){\
    return \"分段\";\
}",
                "dataIndex": "RATE_TYPE",
                "text": "计费类型"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "MIN_AMOUNT1",
                "dataIndex": "MIN_AMOUNT",
                "text": "最小金额"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "MAX_AMOUNT1",
                "dataIndex": "MAX_AMOUNT",
                "text": "最大金额"
               },
               "expanded": true,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "FLAT_RATE1",
                "renderer": "if(value == '0'){\
    return \"否\";\
}else if(value == '1'){\
    return \"是\";\
}",
                "dataIndex": "FLAT_RATE",
                "text": "是否统一费率"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "IS_VACATION1",
                "renderer": "if(value == '0'){\
    return \"否\";\
}else if(value == '1'){\
    return \"是\";\
}",
                "dataIndex": "IS_VACATION",
                "text": "是否假期计费"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "IS_NIGHTSHIFT1",
                "renderer": "if(value == '0'){\
    return \"否\";\
}else if(value == '1'){\
    return \"是\";\
}",
                "dataIndex": "IS_NIGHTSHIFT",
                "text": "是否夜班计费"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "IS_WEEKDAY1",
                "renderer": "if(value == '0'){\
    return \"否\";\
}else if(value == '1'){\
    return \"是\";\
}",
                "dataIndex": "IS_WEEKDAY",
                "text": "是否周末计费"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "IS_TIMES1",
                "renderer": "if(value == '0'){\
    return \"否\";\
}else if(value == '1'){\
    return \"是\";\
}",
                "dataIndex": "IS_TIMES",
                "text": "是否按时间段计费"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "TIME_UNIT1",
                "renderer": "if(value == '1'){\
    return \"分钟\";\
}else if(value == '2'){\
    return \"小时\";\
}else if(value == '3'){\
    return \"天\";\
}",
                "dataIndex": "TIME_UNIT",
                "text": "时间段计费单位"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "START_FIELD1",
                "dataIndex": "START_FIELD",
                "text": "优惠起始"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "END_FIELD1",
                "dataIndex": "END_FIELD",
                "text": "优惠截止"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              }
             ],
             "type": "array"
            }
           ],
           "type": "grid",
           "events": {"beforeselect": "app.ritem_grid.store.load({params:{ID:record.data.FILTER_ID}});"}
          },
          {
           "configs": {
            "itemId": "ritem_grid",
            "split": "true",
            "region": "center"
           },
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "store",
              "autoLoad": "false",
              "url": "m?xwl=feeManage/rule/java/queryItemByRule"
             },
             "expanded": true,
             "children": [],
             "type": "store"
            },
            {
             "configs": {"itemId": "columns"},
             "expanded": true,
             "children": [
              {
               "configs": {
                "itemId": "id",
                "hidden": "true",
                "dataIndex": "ID",
                "text": "编号"
               },
               "expanded": true,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "KEY_NAME",
                "dataIndex": "KEY_NAME",
                "width": "360",
                "keyName": "C_BASE_DICT",
                "text": "条件"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "OPER_CHAR",
                "dataIndex": "OPER_CHAR",
                "width": "150",
                "keyName": "compareCode",
                "text": "运算符"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "COMPARE_VAL",
                "dataIndex": "COMPARE_VAL",
                "width": "360",
                "text": "比较值"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              },
              {
               "configs": {
                "itemId": "COMPARE_NAME1",
                "hidden": "true",
                "dataIndex": "COMPARE_NAME",
                "width": "360",
                "text": "比较值"
               },
               "expanded": false,
               "children": [],
               "type": "column"
              }
             ],
             "type": "array"
            }
           ],
           "type": "grid"
          }
         ],
         "type": "panel"
        }
       ],
       "type": "panel"
      }
     ],
     "type": "panel"
    }],
    "type": "viewport"
   }
  ],
  "type": "module"
 }],
 "roles": {
  "JTLD": 1,
  "xlcwb": 1,
  "JCB": 1
 },
 "title": "合同审核",
 "iconCls": "",
 "inframe": false,
 "pageLink": ""
}