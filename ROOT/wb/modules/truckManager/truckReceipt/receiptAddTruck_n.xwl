{
 "hidden": false,
 "children": [{
  "configs": {"itemId": "module"},
  "expanded": true,
  "children": [
   {
    "configs": {
     "layout": "@{type:'table',columns:2}",
     "itemId": "winAccDetails",
     "dialog": "true",
     "defaults": "{\
  labelWidth: 60,\
  width: 220,\
  margin: '8 8 0 8'\
}",
     "closeAction": "destroy",
     "width": "500",
     "title": "补充费用",
     "height": "160"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "itemId": "RID_A",
       "hidden": "true",
       "labelAlign": "right",
       "fieldLabel": "RID",
       "readOnly": "true"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CNTR",
       "labelAlign": "right",
       "fieldLabel": "箱号",
       "readOnly": "true"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "FEE_LIST_ID",
       "allowBlank": "false",
       "labelAlign": "right",
       "fieldLabel": "费目",
       "keyName": "C_BASE_CHARGING_ITEM",
       "anyMatch": "true",
       "forceSelection": "true"
      },
      "expanded": true,
      "children": [],
      "type": "combo",
      "events": {"change": "// Wb.request({\
//   url: \"m?xwl=BuzManage/bandanedit/getReat\",\
//   params: {\
//     mth: \"find\",\
//     bill_no: app.ACCBILL_NO.getValue(),\
//     FEE_LIST_ID: app.FEE_LIST_ID.getValue(),\
//     CNTR: app.CNTR.getValue()\
//   },\
//   success: function(resp) {\
//     var result = Wb.decode(resp.responseText);\
//     console.log(result);\
//     if (result.length > 0) {\
//       app.ACTUAL_JOB_COUNT.setValue(result[0].actualJobCount);\
//       app.AMOUNT1.setValue(result[0].amount);\
//       app.DWELLDAYS.setValue(result[0].dwellDays);\
//       app.AMOUNT.setValue(result[0].amount);\
//     }\
//   }\
// });"}
     },
     {
      "configs": {
       "itemId": "ACTUAL_JOB_COUNT",
       "allowBlank": "false",
       "minValue": "1",
       "labelAlign": "right",
       "fieldLabel": "数量",
       "value": "1"
      },
      "expanded": true,
      "children": [],
      "type": "number",
      "events": {"change": "var a = Wb.isEmpty(newValue) ? 0 : newValue;\
var b = Wb.isEmpty(app.AMOUNT1.getValue()) ? 0 : app.AMOUNT1.getValue();\
app.AMOUNT.setValue(a * b);"}
     },
     {
      "configs": {
       "itemId": "AMOUNT1",
       "allowBlank": "false",
       "minValue": "1",
       "labelAlign": "right",
       "fieldLabel": "单价"
      },
      "expanded": false,
      "children": [],
      "type": "number",
      "events": {"change": "var a = Wb.isEmpty(newValue) ? 0 : newValue;\
var b = Wb.isEmpty(app.ACTUAL_JOB_COUNT.getValue()) ? 0 : app.ACTUAL_JOB_COUNT.getValue();\
app.AMOUNT.setValue(a * b);"}
     },
     {
      "configs": {
       "itemId": "AMOUNT",
       "allowBlank": "false",
       "minValue": "1",
       "labelAlign": "right",
       "fieldLabel": "金额"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "MANUAL_NODES",
       "labelAlign": "right",
       "fieldLabel": "确认人"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     }
    ],
    "type": "window",
    "events": {"ok": "Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/insertAccount\",\
  params: {\
    billid: app.RID_A.getValue(),\
    FEE_LIST_ID: app.FEE_LIST_ID.getValue(),\
    AMOUNT: app.AMOUNT.getValue(),\
    ACTUAL_JOB_COUNT: app.ACTUAL_JOB_COUNT.getValue(),\
    MANUAL_NODES: app.MANUAL_NODES.getValue(),\
    trade: \"1\"\
  },\
  success: function(resp) {\
    var res = Wb.decode(resp.responseText);\
    if (res.success) {\
      Wb.info(res.msg);\
      app.winAccDetails.close();\
    }\
  }\
});"}
   },
   {
    "configs": {
     "layout": "@{type:'table',columns:2}",
     "itemId": "winCar_team",
     "dialog": "true",
     "defaults": "{\
  labelWidth: 60,\
  width: 300,\
  margin: '8 8 0 8'\
}",
     "closeAction": "destroy",
     "width": "360",
     "title": "修改车队",
     "height": "100"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "itemId": "ids",
       "hidden": "true",
       "labelAlign": "right",
       "fieldLabel": "RID"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "UP_CAR_TEAM",
       "allowBlank": "false",
       "labelAlign": "right",
       "fieldLabel": "车队",
       "displayField": "CNAME",
       "valueField": "ID",
       "forceSelection": "true"
      },
      "expanded": true,
      "children": [{
       "configs": {
        "itemId": "store",
        "autoLoad": "true",
        "pageSize": "-1",
        "url": "m?xwl=receiptInout/receipt/receiptedit/selectCarTeam"
       },
       "expanded": false,
       "children": [],
       "type": "store"
      }],
      "type": "combo"
     }
    ],
    "type": "window",
    "events": {"ok": "if (!Wb.verify(app.UP_CAR_TEAM))\
  return;\
Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/updcarteam\",\
  params: {\
    ids: app.ids.getValue(),\
    car_team: app.UP_CAR_TEAM.getValue()\
  },\
  success: function(resp) {\
    Wb.info(\"修改完成\");\
    app.winCar_team.close();\
    app.searchRBtn.fireEvent(\"click\");\
  }\
});"}
   },
   {
    "configs": {
     "layout": "@{type:'table',columns:1}",
     "itemId": "winUpd",
     "dialog": "true",
     "defaults": "{\
  labelWidth: 85,\
  width: 320,\
  margin: '8 8 0 8'\
}",
     "closeAction": "destroy",
     "width": "360",
     "title": "修改",
     "height": "100"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "itemId": "idsupd",
       "hidden": "true",
       "labelAlign": "right",
       "fieldLabel": "RID"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "PLAN_STIME",
       "fieldLabel": "计划送货时间"
      },
      "expanded": false,
      "children": [],
      "type": "datetime"
     }
    ],
    "type": "window",
    "events": {"ok": "Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/update\",\
  out: app.winUpd,\
  success: function(resp) {\
    Wb.info(\"修改完成\");\
    app.winUpd.close();\
    app.searchRBtn.fireEvent(\"click\");\
  }\
});"}
   },
   {
    "configs": {
     "layout": "@{type:'table',columns:1}",
     "itemId": "winShuai",
     "dialog": "true",
     "defaults": "{\
  labelWidth: 85,\
  width: 320,\
  margin: '8 8 0 8'\
}",
     "closeAction": "destroy",
     "width": "360",
     "title": "甩卡",
     "height": "100"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "itemId": "shuaiid",
       "hidden": "true",
       "labelAlign": "right",
       "fieldLabel": "RID"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "shuai",
       "allowBlank": "false",
       "labelAlign": "right",
       "pickList": "[\
  [\"F\", \"工厂甩卡\"],\
  [\"C\", \"码头甩卡\"]\
]",
       "fieldLabel": "甩卡地点",
       "forceSelection": "true"
      },
      "expanded": true,
      "children": [],
      "type": "combo",
      "events": {"specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.IN_CAR.focus();\
    app.IN_CAR.selectText();\
  }\
}"}
     }
    ],
    "type": "window",
    "events": {"ok": "Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/shuaika\",\
  out: app.winShuai,\
  success: function(resp) {\
    Wb.info(\"操作完成\");\
    app.winShuai.close();\
    app.searchRBtn.fireEvent(\"click\");\
  }\
});"}
   },
   {
    "configs": {
     "itemId": "bbarp",
     "enableOverflow": "true",
     "style": "background:white;"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "itemId": "btnpai",
       "width": "170",
       "text": "<span style='font-size:20px;font-weight:bold;'>派&nbsp;&nbsp;&nbsp;车(F8)<\/span>",
       "iconCls": "yellow-line-conveyor-belt_icon"
      },
      "expanded": false,
      "children": [],
      "type": "item",
      "events": {"click": "if (app.SHIPPER_WAY.getValue() == \"1\") {\
  //   app.S_ADRESS.allowBlank = false;\
  //   app.FEI_ADDDRESS.allowBlank = false;\
} else {\
  //   app.S_ADRESS.allowBlank = true;\
  //   app.FEI_ADDDRESS.allowBlank = true;\
}\
if (Wb.isEmpty(app.RID.getValue())) {\
  Wb.warn(\"请选择设备交接单\");\
  return;\
}\
if (!Wb.verify(app.panelForm)) {\
  return;\
}\
Wb.request({\
  url: 'm?xwl=truckManager/truckReceipt/receiptAddTruckedit_n/paiche',\
  out: app.panelForm,\
  success: function(resp) {\
    var result = Wb.decode(resp.responseText);\
    if (result.success) {\
      Wb.reset(app.panelForm);\
      app.searchRBtn.fireEvent(\"click\");\
      //       Wb.info(\"派车完成\");\
      app.txtCNTR_NO_R.focus();\
      app.txtCNTR_NO_R.selectText();\
    } else {\
      Wb.error(result.errstr);\
    }\
  }\
});"}
     },
     {
      "configs": {
       "itemId": "btnreset",
       "width": "102",
       "text": "<span style='font-size:20px;font-weight:bold;'>重&nbsp;&nbsp;置<\/span>",
       "iconCls": "redo_icon"
      },
      "expanded": false,
      "children": [],
      "type": "item",
      "events": {"click": "Wb.reset(app.panelForm);"}
     }
    ],
    "type": "toolbar"
   },
   {
    "configs": {
     "layout": "border",
     "itemId": "viewport1"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "itemId": "xwl1",
       "file": "m?xwl=system/common/rabbitMq"
      },
      "expanded": false,
      "children": [],
      "type": "xwl"
     },
     {
      "configs": {
       "layout": "@{type:'table',columns:1}",
       "itemId": "panelForm",
       "defaults": "{\
  labelWidth: 80,\
  width: 260,\
  margin: '6 0 0 0'\
}",
       "width": "280",
       "region": "west",
       "title": "派车信息",
       "bbar": "app.bbarp"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "RID",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "RID"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CNTR_OPERATOR_COD",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "CNTR_OPERATOR_COD"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CNTR",
         "labelAlign": "right",
         "fieldLabel": "箱号/提单",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "RID1",
         "labelAlign": "right",
         "fieldLabel": "双托",
         "displayField": "CNTR",
         "isUpperCase": "true",
         "valueField": "ID",
         "queryDelay": "200",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit_n/selectReceipt1"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {"specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.SHIPPER_WAY.focus();\
    app.SHIPPER_WAY.selectText();\
  }\
}"}
       },
       {
        "configs": {
         "itemId": "SHIPPER_WAY",
         "allowBlank": "false",
         "labelAlign": "right",
         "pickList": "[\
  [1, \"码头承运\"],\
  [3, \"驳船承运\"]\
]",
         "fieldLabel": "承运方式",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [],
        "type": "combo",
        "events": {"specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.IN_CAR.focus();\
    app.IN_CAR.selectText();\
  }\
}"}
       },
       {
        "configs": {
         "tagConfigs": "matchFieldWidth: false",
         "itemId": "IN_CAR",
         "allowBlank": "false",
         "tpl": "<table cellspacing='0' width='100%'>\
  <tr>\
    <td width='20%'>\
      编号\
    <\/td>\
    <td width='20%'>\
      车牌\
    <\/td>\
    <td width='60%'>\
      车队\
    <\/td>\
  <\/tr>\
  <tpl for='.'>\
    <tr class='x-boundlist-item' >\
      <td>\
        {TRUCK_NO}\
      <\/td>\
      <td>\
        {PLAT_NO}\
      <\/td>\
      <td>\
        {NAME}\
      <\/td>\
    <\/tr>\
  <\/tpl>\
<\/table>",
         "labelAlign": "right",
         "fieldLabel": "车头",
         "displayField": "TRUCK_NO",
         "isUpperCase": "true",
         "listConfig": "{\
  width: 400\
}",
         "valueField": "TRUCK_NO",
         "queryDelay": "200",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit/loadTruck"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.IN_CAMPI.focus();\
    app.IN_CAMPI.selectText();\
  }\
}",
         "select": "Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/selectT\",\
  params: {\
    truckno: combo.getValue()\
  },\
  success: function(resp) {\
    var result = Wb.decode(resp.responseText);\
    app.IN_CAR_HP.setValue(result.rows[0].PLAT_NO);\
    app.IN_CAMPI.setValue(result.rows[0].TRAY_NO);\
    app.IN_TRAY_NO.setValue(result.rows[0].TRAY_NO);\
    app.IN_DRIVER_ID.setValue(result.rows[0].TRUCKER_NO);\
    app.IN_DRIVER_NAME.setValue(result.rows[0].TRUCKER_NAM);\
    app.OUT_CAR.setValue(combo.getValue());\
    app.OUT_CAR_HP.setValue(result.rows[0].PLAT_NO);\
    app.OUT_CAMPI.setValue(result.rows[0].TRAY_NO);\
    app.OUT_TRAY_NO.setValue(result.rows[0].TRAY_NO);\
    app.OUT_DRIVER_ID.setValue(result.rows[0].TRUCKER_NO);\
    app.OUT_DRIVER_NAME.setValue(result.rows[0].TRUCKER_NAM);\
    app.pt_type(app.CNTR_OPERATOR_COD.getValue());\
  }\
});"
        }
       },
       {
        "configs": {
         "itemId": "IN_CAR_HP",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "车牌号",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "IN_CAMPI",
         "allowBlank": "false",
         "tpl": "<table cellspacing='0' width='100%'>\
  <tr>\
    <td>\
      编号\
    <\/td>\
    <td>\
      拖卡\
    <\/td>\
  <\/tr>\
  <tpl for='.'>\
    <tr class='x-boundlist-item' >\
      <td >\
        {TRAY_NO}\
      <\/td>\
      <td>\
        {TRAY_NAM}\
      <\/td>\
    <\/tr>\
  <\/tpl>\
<\/table>",
         "labelAlign": "right",
         "fieldLabel": "拖卡",
         "displayField": "TRAY_NO",
         "isUpperCase": "true",
         "valueField": "TRAY_NO",
         "queryDelay": "200",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit/loadTray"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.IN_DRIVER_ID.focus();\
    app.IN_DRIVER_ID.selectText();\
  }\
}",
         "select": "app.OUT_CAMPI.setValue(combo.getValue());\
app.IN_TRAY_NO.setValue(combo.getValue());\
app.OUT_TRAY_NO.setValue(combo.getValue());"
        }
       },
       {
        "configs": {
         "itemId": "IN_TRAY_NO",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "拖卡号",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "IN_DRIVER_ID",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "司机",
         "displayField": "EMPNAME",
         "valueField": "EMPNO",
         "queryDelay": "200",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit/loadDriver"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.OUT_CAR.focus();\
    app.OUT_CAR.selectText();\
  }\
}",
         "select": "app.OUT_DRIVER_ID.setValue(combo.getValue());\
app.IN_DRIVER_NAME.setValue(combo.getRawValue());\
app.OUT_DRIVER_NAME.setValue(combo.getRawValue());"
        }
       },
       {
        "configs": {
         "itemId": "IN_DRIVER_NAME",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "司机名",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "tagConfigs": "matchFieldWidth: false",
         "itemId": "OUT_CAR",
         "allowBlank": "false",
         "tpl": "<table cellspacing='0' width='100%'>\
  <tr>\
    <td width='20%'>\
      编号\
    <\/td>\
    <td width='20%'>\
      车牌\
    <\/td>\
    <td width='60%'>\
      车队\
    <\/td>\
  <\/tr>\
  <tpl for='.'>\
    <tr class='x-boundlist-item' >\
      <td>\
        {TRUCK_NO}\
      <\/td>\
      <td>\
        {PLAT_NO}\
      <\/td>\
      <td>\
        {NAME}\
      <\/td>\
    <\/tr>\
  <\/tpl>\
<\/table>",
         "labelAlign": "right",
         "fieldLabel": "回程车头",
         "displayField": "TRUCK_NO",
         "isUpperCase": "true",
         "listConfig": "{\
  width: 400\
}",
         "valueField": "TRUCK_NO",
         "queryDelay": "200",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit/loadTruck"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.OUT_CAMPI.focus();\
    app.OUT_CAMPI.selectText();\
  }\
}",
         "select": "Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/selectT\",\
  params: {\
    truckno: combo.getValue()\
  },\
  success: function(resp) {\
    var result = Wb.decode(resp.responseText);\
    app.OUT_CAR.setValue(combo.getValue());\
    app.OUT_CAR_HP.setValue(result.rows[0].PLAT_NO);\
  }\
});"
        }
       },
       {
        "configs": {
         "itemId": "OUT_CAR_HP",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "车牌号",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "OUT_CAMPI",
         "allowBlank": "false",
         "tpl": "<table cellspacing='0' width='100%'>\
  <tr>\
    <td>\
      编号\
    <\/td>\
    <td>\
      拖卡\
    <\/td>\
  <\/tr>\
  <tpl for='.'>\
    <tr class='x-boundlist-item' >\
      <td >\
        {TRAY_NO}\
      <\/td>\
      <td>\
        {TRAY_NAM}\
      <\/td>\
    <\/tr>\
  <\/tpl>\
<\/table>",
         "labelAlign": "right",
         "fieldLabel": "回程拖卡",
         "displayField": "TRAY_NO",
         "isUpperCase": "true",
         "readOnly": "true",
         "valueField": "TRAY_NO",
         "queryDelay": "200",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit/loadTray"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.OUT_DRIVER_ID.focus();\
    app.OUT_DRIVER_ID.selectText();\
  }\
}",
         "select": "app.OUT_CAMPI.setValue(combo.getValue());\
app.OUT_TRAY_NO.setValue(combo.getValue());"
        }
       },
       {
        "configs": {
         "itemId": "OUT_TRAY_NO",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "拖卡号",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "OUT_DRIVER_ID",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "回程司机",
         "displayField": "EMPNAME",
         "valueField": "EMPNO",
         "queryDelay": "200",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit/loadDriver"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.S_ADRESS.focus();\
    app.S_ADRESS.selectText();\
  }\
}",
         "select": "app.OUT_DRIVER_NAME.setValue(combo.getRawValue());"
        }
       },
       {
        "configs": {
         "itemId": "OUT_DRIVER_NAME",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "司机名",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "tagConfigs": "matchFieldWidth: false",
         "itemId": "S_ADRESS",
         "tpl": "<table cellspacing='0' width='100%'>\
  <tr>\
    <td>\
      地址\
    <\/td>\
    <td>\
      距离\
    <\/td>\
    <td>\
      区域\
    <\/td>\
  <\/tr>\
  <tpl for='.'>\
    <tr class='x-boundlist-item' >\
      <td >\
        {NAME}\
      <\/td>\
      <td>\
        {DISTANCE}\
      <\/td>\
      <td>\
        {AREANAME}\
      <\/td>\
    <\/tr>\
  <\/tpl>\
<\/table>",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "交货地址",
         "displayField": "NAME",
         "listConfig": "{\
  width: 300\
}",
         "valueField": "ID",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "url": "m?xwl=receiptInout/receipt/receiptedit_n/selectADRESS"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.CAR_TEAM.focus();\
    app.CAR_TEAM.selectText();\
  }\
}",
         "select": "app.FEI_ADDDRESS.setValue(records[0].data.ARID);"
        }
       },
       {
        "configs": {
         "itemId": "FEI_ADDDRESS",
         "labelAlign": "right",
         "fieldLabel": "计费区域",
         "keyName": "C_AREA",
         "pageSize": "-1",
         "readOnly": "true",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CAR_TEAM",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "车队",
         "displayField": "CNAME",
         "valueField": "ID",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "pageSize": "-1",
          "url": "m?xwl=receiptInout/receipt/receiptedit/selectCarTeam"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {"specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.SHIP_CONSIGN_COD.focus();\
    app.SHIP_CONSIGN_COD.selectText();\
  }\
}"}
       },
       {
        "configs": {
         "itemId": "PT_TYPE",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "车辆性质",
         "keyName": "PT_TYPE",
         "readOnly": "true",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "tagConfigs": "matchFieldWidth: false",
         "hideTrigger": "true",
         "allowBlank": "false",
         "itemId": "SHIP_CONSIGN_COD",
         "labelAlign": "right",
         "fieldLabel": "货主",
         "pageSize": "50",
         "displayField": "CNAME",
         "listConfig": "{\
  width: 250\
}",
         "valueField": "ID",
         "forceSelection": "true",
         "height": "22"
        },
        "expanded": true,
        "children": [{
         "configs": {
          "itemId": "store",
          "params": "{fldId:'CE'}",
          "url": "m?xwl=system/common/client/clientSelect"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo",
        "events": {
         "specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.SHUN_INVERSE.focus();\
    app.SHUN_INVERSE.selectText();\
  }\
}",
         "select": "app.SHIPPER_CONSIGNEE.setValue(combo.getRawValue());\
app.CONSIGNEE_COD.setValue(combo.getValue());\
app.CONSIGNEE.setValue(combo.getRawValue());"
        }
       },
       {
        "configs": {
         "itemId": "SHIPPER_CONSIGNEE",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "货主",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CONSIGNEE_COD",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "收货人COD",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CONSIGNEE",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "收货人",
         "readOnly": "true"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "SHUN_INVERSE",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "同逆向",
         "keyName": "SHUN_INVERSE",
         "anyMatch": "true",
         "forceSelection": "true"
        },
        "expanded": true,
        "children": [],
        "type": "combo",
        "events": {"specialkey": "if (e.getKey() == e.ENTER) {\
  if (!combo.isExpanded) { //判断combo不展开才切换焦点\
    app.RID1.focus();\
    app.RID1.selectText();\
  }\
}"}
       },
       {
        "configs": {
         "itemId": "DESTUFFING_FLAG",
         "labelAlign": "right",
         "fieldLabel": "拆箱"
        },
        "expanded": false,
        "children": [],
        "type": "check"
       }
      ],
      "type": "panel"
     },
     {
      "configs": {
       "itemId": "gridReceipt",
       "selType": "checkboxmodel",
       "region": "center"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "tbar",
         "enableOverflow": "true",
         "region": "north"
        },
        "expanded": true,
        "children": [
         {
          "configs": {
           "itemId": "txtCNTR_NO_R",
           "emptyText": "箱号,箱号,箱号",
           "isUpperCase": "true"
          },
          "expanded": true,
          "children": [],
          "type": "text",
          "events": {"specialkey": "if (e.getKey() == e.ENTER)\
  app.searchRBtn.fireEvent('click');"}
         },
         {
          "configs": {
           "itemId": "txtBILL_NO",
           "emptyText": "提单号",
           "isUpperCase": "true"
          },
          "expanded": true,
          "children": [],
          "type": "text",
          "events": {"specialkey": "if (e.getKey() == e.ENTER)\
  app.searchRBtn.fireEvent('click');"}
         },
         {
          "configs": {
           "itemId": "tbI_E_ID",
           "emptyText": "进出口",
           "keyName": "I_E_ID",
           "width": "60",
           "anyMatch": "true"
          },
          "expanded": false,
          "children": [],
          "type": "combo"
         },
         {
          "configs": {
           "itemId": "tbPHASE",
           "pickList": "[\
  [\"\", \"全部\"],\
  [\"PLN\", \"未派车\"],\
  [\"EXE\", \"已派车\"],\
  [\"FIN\", \"完成\"],\
  [\"CNL\", \"取消\"],\
  [\"GET\", \"场内提箱\"],\
  [\"RTN\", \"场内还箱\"],\
  [\"OUT\", \"场外\"]\
]",
           "emptyText": "状态",
           "width": "80",
           "anyMatch": "true",
           "forceSelection": "true"
          },
          "expanded": false,
          "children": [],
          "type": "combo"
         },
         {
          "configs": {
           "itemId": "tbpdate",
           "emptyText": "计划送货日期"
          },
          "expanded": false,
          "children": [],
          "type": "date"
         },
         {
          "configs": {
           "itemId": "searchRBtn",
           "text": "@Str.find",
           "iconCls": "search_icon"
          },
          "expanded": true,
          "children": [],
          "type": "item",
          "events": {"click": "app.gridReceipt.store.load({\
  out: app.tbar\
});\
\
Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/selectCount\",\
  params: {\
    date: app.tbpdate.getRawValue(),\
    tradeid: \"2\"\
  },\
  success: function(resp) {\
    var res = Wb.decode(resp.responseText);\
    if (res.length > 0) {\
      app.lblcount.setText(\"总数量:\" + res[0].ZONG + \", 未完成:\" + res[0].EXE + \", 已完成:\" + res[0].FIN);\
    }\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "accountBtn",
           "hidden": "true",
           "text": "计费",
           "iconCls": "write_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sel = app.gridReceipt.getSelection()[0];\
if (Wb.isEmpty(sel)) {\
  Wb.warn(\"请先选择设备交接单\");\
  return;\
}\
Wb.request({\
  url: \"m?xwl=truckManager/truckReceipt/receiptAddTruckedit/getReat\",\
  params: {\
    rid: sel.data.ID\
  },\
  success: function(resp) {}\
});"}
         },
         {
          "configs": {
           "itemId": "item1",
           "text": "->"
          },
          "expanded": true,
          "children": [],
          "type": "item"
         },
         {
          "configs": {"itemId": "lblcount"},
          "expanded": false,
          "children": [],
          "type": "label"
         }
        ],
        "type": "toolbar"
       },
       {
        "configs": {
         "itemId": "store",
         "url": "m?xwl=truckManager/truckReceipt/receiptAddTruckedit_n/selectReceipt"
        },
        "expanded": true,
        "children": [],
        "type": "store"
       },
       {
        "configs": {"itemId": "columns"},
        "expanded": true,
        "children": [
         {
          "configs": {
           "itemId": "column1",
           "xtype": "rownumberer"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCREATED_ON",
           "dataIndex": "CREATED_ON",
           "width": "120",
           "text": "创建时间"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colPHASE",
           "renderer": "if (value == \"PLN\")\
  return \"未派车\";\
if (value == \"EXE\")\
  return \"已派车\";\
if (value == \"FIN\")\
  return \"完成\";\
if (value == \"CNL\")\
  return \"取消\";\
if (value == \"GET\")\
  return \"场内提箱\";\
if (value == \"RTN\")\
  return \"场内还箱\";\
if (value == \"OUT\")\
  return \"场外\";",
           "dataIndex": "PHASE",
           "width": "66",
           "text": "状态"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colBILL_NO",
           "dataIndex": "BILL_NO",
           "text": "提单号"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCNTR",
           "dataIndex": "CNTR",
           "text": "箱号"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCNTR_OPERATOR_COD",
           "dataIndex": "CNTR_OPERATOR_COD",
           "keyName": "AG_SHORT",
           "text": "船公司"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colSHIP_CONSIGN_COD",
           "renderer": "return Wb.getCustomerByCode(value);",
           "dataIndex": "SHIP_CONSIGN_COD",
           "text": "货主"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCONSIGNEE_COD",
           "hidden": "true",
           "dataIndex": "CONSIGNEE_COD",
           "text": "收货人"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCONSIGNEE",
           "hidden": "true",
           "dataIndex": "CONSIGNEE",
           "text": "收货人"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colS_ADRESS",
           "dataIndex": "S_ADRESS",
           "keyName": "C_ADDRESS",
           "text": "交货地址"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "solYARD_POSITION",
           "dataIndex": "YARD_POSITION",
           "width": "80",
           "text": "堆存位置"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCNTR_SIZE",
           "dataIndex": "CNTR_SIZE",
           "keyName": "CNTR_SIZE",
           "width": "66",
           "text": "箱尺寸"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCNTR_TYPE",
           "dataIndex": "CNTR_TYPE",
           "keyName": "CNTR_TYPE",
           "width": "66",
           "text": "箱型"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "solPLAN_STIME",
           "dataIndex": "PLAN_STIME",
           "width": "120",
           "text": "计划送货时间"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCAR_TEAM",
           "dataIndex": "CAR_TEAM",
           "keyName": "TU_CUSTOMER",
           "text": "车队"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colFEI_ADDDRESS",
           "dataIndex": "FEI_ADDDRESS",
           "keyName": "C_AREA",
           "text": "计费区域"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colNOTES",
           "dataIndex": "NOTES",
           "text": "备注"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCNTR_ISO",
           "dataIndex": "CNTR_ISO",
           "width": "66",
           "text": "箱ISO"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCMDY_CODE",
           "dataIndex": "CMDY_CODE",
           "text": "货名"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colT_ADDRESS",
           "dataIndex": "T_ADDRESS",
           "width": "80",
           "keyName": "C_CFS",
           "text": "提箱地点"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colF_ADDRESS",
           "dataIndex": "F_ADDRESS",
           "width": "80",
           "keyName": "C_CFS",
           "text": "返场地址"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colWORK_TYPE",
           "dataIndex": "WORK_TYPE",
           "keyName": "WORK_WAY",
           "width": "80",
           "text": "作业方式"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colPT_TYPE",
           "dataIndex": "PT_TYPE",
           "keyName": "PT_TYPE",
           "text": "派车方式"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colGATEOUT_TIME_T",
           "dataIndex": "GATEOUT_TIME_T",
           "width": "120",
           "text": "出门时间"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colGATEIN_TIME_S",
           "dataIndex": "GATEIN_TIME_S",
           "width": "120",
           "text": "进门时间"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colPC_BY",
           "dataIndex": "PC_BY",
           "keyName": "WB_USER",
           "text": "派车人"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colPC_ON",
           "dataIndex": "PC_ON",
           "width": "120",
           "text": "派车时间"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         }
        ],
        "type": "array"
       },
       {
        "configs": {
         "itemId": "popupMenu",
         "normalName": "menuR"
        },
        "expanded": true,
        "children": [
         {
          "configs": {
           "itemId": "popupClean",
           "text": "取消",
           "iconCls": "delete_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var rowData = app.menuR.selectRow.data; //selectRow在popupMenu的show事件中设置\
Wb.confirm(\"确认取消操作\", function() {\
  var phase = \"PLN\";\
  if (rowData.WORK_TYPE == 'EITC' || rowData.WORK_TYPE == 'FITC')\
    phase = \"OUT\";\
  Wb.request({\
    url: 'm?xwl=truckManager/truckReceipt/receiptAddTruckedit/quxiao',\
    params: {\
      ID: rowData.ID,\
      PHASE: phase\
    },\
    success: function() {\
      Wb.reset(app.panelForm);\
      app.searchRBtn.fireEvent(\"click\");\
    }\
  });\
});"}
         },
         {
          "configs": {
           "itemId": "popupCar_team",
           "text": "修改车队",
           "iconCls": "yellow-trolley_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.gridReceipt.getSelection();\
var ids = \"\";\
Wb.each(sels, function(sel) {\
  ids += \"'\" + sel.data.ID + \"',\";\
});\
ids = ids.substring(0, ids.length - 1);\
var win = new Ext.window.Window(app._winCar_team);\
win.show();\
app.ids.setValue(ids);"}
         },
         {
          "configs": {
           "itemId": "popupUpd",
           "text": "修改信息",
           "iconCls": "table_edit_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.gridReceipt.getSelection();\
var ids = \"\";\
Wb.each(sels, function(sel) {\
  ids += \"'\" + sel.data.ID + \"',\";\
});\
ids = ids.substring(0, ids.length - 1);\
var win = new Ext.window.Window(app._winUpd);\
win.show();\
app.idsupd.setValue(ids);\
app.PLAN_STIME.setValue(sels[0].data.PLAN_STIME);"}
         },
         {
          "configs": {
           "itemId": "popupAddFee",
           "text": "补充费用",
           "iconCls": "add_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var rowData = app.menuR.selectRow.data; //selectRow在popupMenu的show事件中设置\
var win = new Ext.window.Window(app._winAccDetails); //app._win指向配置对象而非实例\
win.setTitle(\"补充费用\");\
win.show();\
app.RID_A.setValue(rowData.ID);\
app.CNTR.setValue(rowData.CNTR);"}
         },
         {
          "configs": {
           "itemId": "popupShuai",
           "text": "甩卡",
           "iconCls": "yellow-trolley_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var rowData = app.menuR.selectRow.data; //selectRow在popupMenu的show事件中设置\
var win = new Ext.window.Window(app._winShuai); //app._win指向配置对象而非实例\
win.show();\
app.shuaiid.setValue(rowData.ID);"}
         }
        ],
        "type": "menu",
        "events": {"show": "var nature = \"{#sys.NATURE#}\";\
var rows = app.gridReceipt.getSelection();\
app.popupClean.setDisabled(rows.length != 1 || rows[0].data.PHASE != \"EXE\");\
app.popupUpd.setDisabled(rows.length < 1 || (rows[0].data.PHASE != \"EXE\" && rows[0].data.PHASE != \"PLN\"));\
app.popupAddFee.setDisabled(rows.length != 1);\
menu.selectRow = rows[0];"}
       }
      ],
      "type": "grid",
      "events": {"itemclick": "var nature = \"{#sys.NATURE#}\";\
Wb.setValue(app.panelForm, record.data);\
app.RID.setValue(record.data.ID);\
app.CNTR.setValue(record.data.NO_CNTR == \"1\" ? record.data.BILL_NO : record.data.CNTR);\
app.RID1.store.load({\
  callback: function(r, options, success) { //r:返回的数据,r.length,r[0].data.属性 success:是否回调成功,true,false\
    if (success) {\
      app.RID1.setValue(record.data.RID1);\
    }\
  }\
});\
app.IN_CAR.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.IN_CAR.setValue(record.data.IN_CAR);\
    }\
  }\
});\
app.IN_CAMPI.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.IN_CAMPI.setValue(record.data.IN_CAMPI);\
    }\
  }\
});\
app.IN_DRIVER_ID.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.IN_DRIVER_ID.setValue(record.data.IN_DRIVER_ID);\
    }\
  }\
});\
app.OUT_CAR.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.OUT_CAR.setValue(record.data.OUT_CAR);\
    }\
  }\
});\
app.OUT_CAMPI.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.OUT_CAMPI.setValue(record.data.OUT_CAMPI);\
    }\
  }\
});\
app.OUT_DRIVER_ID.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.OUT_DRIVER_ID.setValue(record.data.OUT_DRIVER_ID);\
    }\
  }\
});\
Wb.loadComboAdd(app.S_ADRESS, [{\
  \"ID\": record.data.S_ADRESS,\
  \"NAME\": record.data.CNAME\
}], function() {\
  app.S_ADRESS.setValue(record.data.S_ADRESS);\
});\
app.FEI_ADDDRESS.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.FEI_ADDDRESS.setValue(record.data.FEI_ADDDRESS);\
    }\
  }\
});\
app.CAR_TEAM.store.load({\
  callback: function(r, options, success) {\
    if (success) {\
      app.CAR_TEAM.setValue(record.data.CAR_TEAM);\
    }\
  }\
});\
//货主赋值\
Wb.loadComboAdd(app.SHIP_CONSIGN_COD, [{\
  \"ID\": record.data.SHIP_CONSIGN_COD,\
  \"CNAME\": record.data.SHIPPER_CONSIGNEE\
}], function() {\
  app.SHIP_CONSIGN_COD.setValue(record.data.SHIP_CONSIGN_COD);\
  app.SHIPPER_CONSIGNEE.setValue(record.data.SHIPPER_CONSIGNEE);\
});\
if (nature == \"5\" && record.data.SHIPPER_WAY == \"1\") {\
  app.IN_CAR.setReadOnly(true);\
  app.IN_CAMPI.setReadOnly(true);\
  app.IN_DRIVER_ID.setReadOnly(true);\
  app.OUT_CAR.setReadOnly(true);\
  app.OUT_CAMPI.setReadOnly(true);\
  app.OUT_DRIVER_ID.setReadOnly(true);\
  app.S_ADRESS.setReadOnly(true);\
  app.FEI_ADDDRESS.setReadOnly(true);\
  app.CAR_TEAM.setReadOnly(true);\
  app.SHIPPER_WAY.setReadOnly(true);\
  app.SHIP_CONSIGN_COD.setReadOnly(true);\
  app.SHUN_INVERSE.setReadOnly(true);\
  app.RID1.setReadOnly(true);\
  app.btnpai.setDisabled(true);\
} else {\
  if (record.data.PHASE == 'OUT') { //转关设备交接单\
    app.IN_CAR.setReadOnly(true);\
    app.IN_CAMPI.setReadOnly(true);\
    app.IN_DRIVER_ID.setReadOnly(true);\
    app.OUT_CAR.setReadOnly(false);\
    app.OUT_CAMPI.setReadOnly(true);\
    app.OUT_DRIVER_ID.setReadOnly(false);\
    app.S_ADRESS.setReadOnly(true);\
    app.FEI_ADDDRESS.setReadOnly(true);\
    app.CAR_TEAM.setReadOnly(true);\
    app.SHIPPER_WAY.setReadOnly(true);\
    app.SHIP_CONSIGN_COD.setReadOnly(true);\
    app.SHUN_INVERSE.setReadOnly(true);\
    app.RID1.setReadOnly(true);\
    app.btnpai.setDisabled(false);\
  } else if (record.data.PHASE == 'PLN' || record.data.PHASE == 'EXE') {\
    if (record.data.CNTR_SIZE == \"20\")\
      app.RID1.setReadOnly(false);\
    else\
      app.RID1.setReadOnly(true);\
    if (record.data.WORK_TYPE == \"FITC\" || record.data.WORK_TYPE == \"EITC\") {\
      app.IN_CAR.setReadOnly(true);\
      app.IN_CAMPI.setReadOnly(true);\
      app.IN_DRIVER_ID.setReadOnly(true);\
      app.OUT_CAMPI.setReadOnly(false);\
    } else {\
      app.IN_CAR.setReadOnly(false);\
      app.IN_CAMPI.setReadOnly(false);\
      app.IN_DRIVER_ID.setReadOnly(false);\
      app.OUT_CAMPI.setReadOnly(true);\
    }\
    if (nature != \"5\" && nature != \"6\") {\
      app.CAR_TEAM.setReadOnly(false);\
      app.SHIPPER_WAY.setReadOnly(true);\
      app.SHIP_CONSIGN_COD.setReadOnly(false);\
    } else if (nature == \"5\") {\
      if (record.data.CNTR_OPERATOR_COD == customcode) {\
        app.CAR_TEAM.setReadOnly(false);\
        app.SHIPPER_WAY.setReadOnly(false);\
        app.SHIP_CONSIGN_COD.setReadOnly(false);\
      }\
    } else if (nature == \"6\") {\
      app.CAR_TEAM.setReadOnly(true);\
      app.SHIPPER_WAY.setReadOnly(true);\
      app.SHIP_CONSIGN_COD.setReadOnly(true);\
    }\
    app.OUT_CAR.setReadOnly(false);\
    app.OUT_DRIVER_ID.setReadOnly(false);\
    app.S_ADRESS.setReadOnly(false);\
    app.FEI_ADDDRESS.setReadOnly(false);\
    app.SHUN_INVERSE.setReadOnly(false);\
    app.btnpai.setDisabled(false);\
  } else {\
    app.IN_CAR.setReadOnly(true);\
    app.IN_CAMPI.setReadOnly(true);\
    app.IN_DRIVER_ID.setReadOnly(true);\
    app.OUT_CAR.setReadOnly(true);\
    app.OUT_CAMPI.setReadOnly(true);\
    app.OUT_DRIVER_ID.setReadOnly(true);\
    app.S_ADRESS.setReadOnly(true);\
    app.FEI_ADDDRESS.setReadOnly(true);\
    app.CAR_TEAM.setReadOnly(true);\
    app.SHIPPER_WAY.setReadOnly(true);\
    app.SHIP_CONSIGN_COD.setReadOnly(true);\
    app.SHUN_INVERSE.setReadOnly(true);\
    app.RID1.setReadOnly(true);\
    app.btnpai.setDisabled(true);\
  }\
}"}
     }
    ],
    "type": "viewport",
    "events": {"afterrender": "viewport.el.addKeyListener(Ext.EventObject.F8, function() {\
  app.btnpai.fireEvent(\"click\");\
});"}
   }
  ],
  "type": "module",
  "events": {
   "finalize": "// app.tbI_E_ID.setValue(\"I\");\
app.tbPHASE.setValue(\"PLN\");\
app.searchRBtn.fireEvent('click');\
\
app.xwl1.subscribe('/exchange/ex_receipt/#', function(d) {\
  var msg = d.body;\
  var record = app.gridReceipt.store.data.findBy(function(i, k) {\
    return i.data.ID === msg.data.ID;\
  });\
  app.searchRBtn.fireEvent('click');\
  //   switch (msg.info.action) {\
  //     case 'create':\
  //       if (!record)\
  //         Wb.add(app.gridReceipt, msg.data);\
  //       break;\
  //     case 'update':\
  //       if (record)\
  //         Wb.update(record, msg.data);\
  //       break;\
  //     case 'delete':\
  //       if (record) {\
  //         app.gridReceipt.setSelection([record]);\
  //         Wb.remove(app.gridReceipt);\
  //       }\
  //       break;\
  //     default:\
  //       console.log(msg);\
  //       break;\
  //   }\
});",
   "initialize": "Wb.apply(app, {\
  pt_type: function(cp) {\
    if (app.SHIPPER_WAY.getValue() == \"1\" && app.IN_CAR.displayTplData[0].NAME == \"中山港货运联营有限公司\")\
      app.PT_TYPE.setValue(\"1\");\
    else if (app.SHIPPER_WAY.getValue() == \"1\" && app.IN_CAR.displayTplData[0].NAME != \"中山港货运联营有限公司\")\
      app.PT_TYPE.setValue(\"2\");\
    else if (app.SHIPPER_WAY.getValue() == \"3\" && app.IN_CAR.displayTplData[0].NAME == \"中山港货运联营有限公司\" && cp == \"CK\")\
      app.PT_TYPE.setValue(\"4\");\
    else if (app.SHIPPER_WAY.getValue() == \"3\" && app.IN_CAR.displayTplData[0].NAME == \"中山港货运联营有限公司\" && cp != \"CK\") {\
      Wb.warn(\"驳船承运不能选择码头车辆\");\
      app.IN_CAR.setValue(\"\");\
    } else if (app.SHIPPER_WAY.getValue() == \"3\")\
      app.PT_TYPE.setValue(\"3\");\
    var nature = \"{#sys.NATURE#}\";\
    if (nature != 5 && nature != 6)\
      app.CAR_TEAM.setValue(app.IN_CAR.displayTplData[0].TRUCK_UNIT);\
  }\
});"
  }
 }],
 "roles": {
  "CD": 1,
  "NMBC": 1,
  "DHSHIP": 1,
  "ZSAT": 1,
  "ZSGWCD": 1,
  "SWB": 1
 },
 "title": "内贸集装箱派车",
 "iconCls": "",
 "inframe": false,
 "pageLink": ""
}