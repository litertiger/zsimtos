{
 "hidden": false,
 "children": [{
  "configs": {"itemId": "module"},
  "expanded": true,
  "children": [
   {
    "configs": {
     "itemId": "moreXwl",
     "file": "m?xwl=system/common/moreSelect/MoreSql"
    },
    "expanded": false,
    "children": [],
    "type": "xwl"
   },
   {
    "configs": {
     "itemId": "moveXwl",
     "file": "m?xwl=controlManage/task/moveTaskWin"
    },
    "expanded": false,
    "children": [],
    "type": "xwl"
   },
   {
    "configs": {
     "itemId": "xwl1",
     "file": "m?xwl=controlManage/task/moveTaskWinMach"
    },
    "expanded": false,
    "children": [],
    "type": "xwl"
   },
   {
    "configs": {
     "itemId": "opratorWin",
     "dialog": "true",
     "closeAction": "destroy",
     "width": "320",
     "height": "140"
    },
    "expanded": false,
    "children": [{
     "configs": {
      "layout": "@{type:'table',columns:1}",
      "itemId": "panelopra",
      "defaults": "{\
  labelWidth: 80,\
  width: 260,\
  margin: '8 8 0 8'\
}",
      "width": "308",
      "frame": "true",
      "height": "79"
     },
     "expanded": true,
     "children": [
      {
       "configs": {
        "itemId": "ocntrids",
        "hidden": "true",
        "labelAlign": "right"
       },
       "expanded": false,
       "children": [],
       "type": "text"
      },
      {
       "configs": {
        "itemId": "CNTR_OPERATOR_COD",
        "allowBlank": "false",
        "labelAlign": "right",
        "fieldLabel": "箱代理",
        "displayField": "CNAME",
        "valueField": "ID",
        "queryDelay": "500"
       },
       "expanded": true,
       "children": [{
        "configs": {
         "itemId": "store",
         "autoLoad": "true",
         "pageSize": "20",
         "params": "{fldId:'CO'}",
         "url": "m?xwl=system/common/shipClientSelect"
        },
        "expanded": false,
        "children": [],
        "type": "store"
       }],
       "type": "combo"
      }
     ],
     "type": "panel"
    }],
    "type": "window",
    "events": {"ok": "if (!Wb.verify(app.panelopra))\
  return false;\
\
Wb.request({\
  url: \"m?xwl=controlManage/portcntr/portcntredit/cntrOperator\",\
  params: {\
    ids: app.ocntrids.getValue(),\
    CNTR_OPERATOR_COD: app.CNTR_OPERATOR_COD.getValue(),\
    CNTR_OPERATOR: app.CNTR_OPERATOR_COD.getRawValue()\
  },\
  success: function(resp) {\
    Ext.Msg.confirm(\"系统提示\", \"是否移箱\", function(btn) {\
      if (btn == 'yes') {\
        app.popupMove.fireEvent(\"click\");\
        app.grid1.store.load({\
          out: app.panel1\
        });\
        app.opratorWin.close();\
      } else {\
        app.grid1.store.load({\
          out: app.panel1\
        });\
        app.opratorWin.close();\
      }\
    }, this);\
  }\
});"}
   },
   {
    "configs": {
     "itemId": "moveWin",
     "dialog": "true",
     "closeAction": "hide",
     "width": "320",
     "height": "140"
    },
    "expanded": true,
    "children": [{
     "configs": {
      "layout": "@{type:'table',columns:1}",
      "itemId": "panelopra",
      "defaults": "{\
  labelWidth: 80,\
  width: 260,\
  margin: '8 8 0 8'\
}",
      "width": "308",
      "frame": "true",
      "height": "79"
     },
     "expanded": true,
     "children": [
      {
       "configs": {
        "itemId": "OLD_POS",
        "fieldLabel": "原位置",
        "disabled": "true"
       },
       "expanded": false,
       "children": [],
       "type": "text"
      },
      {
       "configs": {
        "itemId": "NEW_POS",
        "fieldLabel": "目标位置"
       },
       "expanded": false,
       "children": [],
       "type": "text"
      }
     ],
     "type": "panel"
    }],
    "type": "window"
   },
   {
    "configs": {
     "itemId": "checkWin",
     "dialog": "true",
     "closeAction": "destroy",
     "width": "1000",
     "height": "571"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "layout": "@{type:'table',columns:3}",
       "itemId": "panelCheck",
       "defaults": "{\
  labelWidth: 90,\
  width: 300,\
  margin: '4 8 4 8'\
}",
       "region": "north",
       "frame": "true"
      },
      "expanded": false,
      "children": [
       {
        "configs": {
         "itemId": "CHECKID",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "CHECKID"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CNTR_IDS",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "CNTR_IDS"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "CNTR_IDS1",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "CNTR_IDS1"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "tagConfigs": " matchFieldWidth:false",
         "itemId": "APPLYMAN",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "申请人",
         "pageSize": "50",
         "displayField": "CNAME",
         "listConfig": "{width:250}",
         "valueField": "CNAME",
         "queryDelay": "500"
        },
        "expanded": false,
        "children": [{
         "configs": {
          "itemId": "store",
          "autoLoad": "true",
          "params": "{fldId:'CE'}",
          "url": "m?xwl=system/common/clientSelect"
         },
         "expanded": false,
         "children": [],
         "type": "store"
        }],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "APPLYTIME",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "申请时间"
        },
        "expanded": false,
        "children": [],
        "type": "date"
       },
       {
        "configs": {
         "itemId": "TERMINALCODE",
         "labelAlign": "right",
         "fieldLabel": "关区"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "APPUNIT",
         "allowBlank": "false",
         "labelAlign": "right",
         "fieldLabel": "查验单位",
         "keyName": "APPUNIT",
         "anyMatch": "true"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CHECKTYPEID",
         "labelAlign": "right",
         "fieldLabel": "查验类型",
         "keyName": "EXAM_TYPE",
         "anyMatch": "true"
        },
        "expanded": false,
        "children": [],
        "type": "combo",
        "events": {"change": "app.DRAWOUTTYPEID.setValue(newValue);"}
       },
       {
        "configs": {
         "itemId": "DRAWOUTTYPEID",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "掏柜类型",
         "keyName": "EXAM_TYPE",
         "anyMatch": "true"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CHECKYARDCELL",
         "labelAlign": "right",
         "fieldLabel": "查验位置",
         "keyName": "CHECKYARDCELL",
         "anyMatch": "true"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CHECKPLACE",
         "labelAlign": "right",
         "fieldLabel": "查验地点",
         "keyName": "CHECKPLACE",
         "anyMatch": "true"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "CHECKMANNER",
         "labelAlign": "right",
         "fieldLabel": "查验方式",
         "keyName": "CHECKMANNER",
         "anyMatch": "true"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "IS_GB",
         "boxLabel": "是否过磅",
         "padding": "0 0 0 60",
         "width": "100"
        },
        "expanded": false,
        "children": [],
        "type": "check",
        "events": {"change": "if (newValue)\
  app.ISPONDERATION_PRJ.setValue(\"Y\");\
else\
  app.ISPONDERATION_PRJ.setValue(\"N\");"}
       },
       {
        "configs": {
         "itemId": "ISPONDERATION_PRJ",
         "hidden": "true",
         "labelAlign": "right",
         "fieldLabel": "是否过磅"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       }
      ],
      "type": "panel"
     },
     {
      "configs": {
       "itemId": "gridCheck",
       "tbar": "app.tbar",
       "height": "380"
      },
      "expanded": false,
      "children": [
       {
        "configs": {
         "itemId": "tbar",
         "enableOverflow": "true",
         "normalName": "tbarcheck",
         "region": "north"
        },
        "expanded": true,
        "children": [
         {
          "configs": {
           "itemId": "saveCheckBtn",
           "text": "@Str.save",
           "iconCls": "record_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var values = Wb.getValue(app.repairWin);\
if (!Wb.verify(app.panelCheck))\
  return false;\
\
Wb.request({\
  url: 'm?xwl=controlManage/portcntr/portcntredit/checkedit/insert',\
  out: app.panelCheck,\
  success: function(resp) {\
    //app.moveXwl.taskWin.toType = \"C\";\
    Wb.info(resp.responseText);\
    app.redoCheckBtn.fireEvent(\"click\");\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "delCheckBtn",
           "text": "@Str.del",
           "iconCls": "record_delete_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.gridCheck.getSelection(); //获取选中行\
Wb.confirmDo(sels, function() {\
  Wb.request({\
    url: 'm?xwl=controlManage/portcntr/portcntredit/checkedit/delete',\
    params: {\
      CHECKID: sels[0].data.CHECKID\
    },\
    success: function() {\
      app.redoCheckBtn.fireEvent(\"click\");\
    }\
  });\
}, 'CNTR');"}
         },
         {
          "configs": {
           "itemId": "item1",
           "text": "-"
          },
          "expanded": false,
          "children": [],
          "type": "item"
         },
         {
          "configs": {
           "itemId": "redoCheckBtn",
           "text": "重置",
           "iconCls": "redo_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var cntrids = app.CNTR_IDS.getValue();\
var cntrids1 = app.CNTR_IDS1.getValue();\
Wb.reset(app.panelCheck);\
if (app.IS_GB.checked)\
  app.ISPONDERATION_PRJ.setValue(\"Y\");\
else\
  app.ISPONDERATION_PRJ.setValue(\"N\");\
app.CNTR_IDS.setValue(cntrids);\
app.CNTR_IDS1.setValue(cntrids1);\
app.APPLYTIME.setValue(new Date());\
app.checkedit = false;\
app.gridCheck.store.load({\
  params: {\
    cntrids: app.CNTR_IDS.getValue()\
  }\
});"}
         }
        ],
        "type": "toolbar"
       },
       {
        "configs": {
         "itemId": "store",
         "url": "m?xwl=controlManage/portcntr/portcntredit/checkedit/select"
        },
        "expanded": false,
        "children": [],
        "type": "store"
       },
       {
        "configs": {"itemId": "columns"},
        "expanded": true,
        "children": [
         {
          "configs": {
           "itemId": "colID",
           "hidden": "true",
           "dataIndex": "ID",
           "text": "ID(隐藏)"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCHECKNO",
           "hidden": "true",
           "dataIndex": "CHECKNO",
           "text": "查验流水号(隐藏)"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "column1",
           "xtype": "rownumberer"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colAPPLYMAN",
           "dataIndex": "APPLYMAN",
           "text": "申请人"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colAPPLYTIME",
           "dataIndex": "APPLYTIME",
           "width": "120",
           "text": "申请时间"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colPHASE",
           "dataIndex": "PHASE",
           "text": "状态"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCNTR",
           "dataIndex": "CNTR",
           "text": "箱号"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCOMMAND_TYPE",
           "dataIndex": "COMMAND_TYPE",
           "keyName": "COMMAND_TYPE",
           "text": "指令类型"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colAPPUNIT",
           "dataIndex": "APPUNIT",
           "keyName": "APPUNIT",
           "text": "查验单位"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colISPONDERATION_PRJ",
           "renderer": "if (value == \"Y\")\
  return \"是\";\
if (value == \"N\")\
  return \"否\";",
           "dataIndex": "ISPONDERATION_PRJ",
           "width": "60",
           "text": "过磅"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colTERMINALCODE",
           "dataIndex": "TERMINALCODE",
           "text": "关区"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCHECKYARDCELL",
           "dataIndex": "CHECKYARDCELL",
           "keyName": "CHECKYARDCELL",
           "text": "查验位置"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCHECKTYPEID",
           "dataIndex": "CHECKTYPEID",
           "keyName": "EXAM_TYPE",
           "text": "查验类型"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colDRAWOUTTYPEID",
           "dataIndex": "DRAWOUTTYPEID",
           "keyName": "EXAM_TYPE",
           "text": "掏柜类型"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCHECKPLACE",
           "dataIndex": "CHECKPLACE",
           "keyName": "CHECKPLACE",
           "text": "查验地点"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCHECKMANNER",
           "dataIndex": "CHECKMANNER",
           "keyName": "CHECKMANNER",
           "text": "查验方式"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         }
        ],
        "type": "array"
       }
      ],
      "type": "grid"
     }
    ],
    "type": "window"
   },
   {
    "configs": {
     "layout": "@{type:'table',columns:1}",
     "itemId": "winRetapply",
     "dialog": "true",
     "defaults": "{\
  labelWidth: 80,\
  width: 430,\
  margin: '8 8 0 8'\
}",
     "closeAction": "destroy",
     "width": "460",
     "title": "核销申请",
     "height": "140"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "itemId": "RET_NOTES",
       "allowBlank": "false",
       "labelAlign": "right",
       "fieldLabel": "核销原因"
      },
      "expanded": false,
      "children": [],
      "type": "textarea"
     },
     {
      "configs": {
       "itemId": "RET_CNTRIDS",
       "hidden": "false",
       "labelAlign": "right"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     }
    ],
    "type": "window",
    "events": {"ok": "Wb.request({\
  url: \"m?xwl=controlManage/portcntr/portcntredit/insertRetApply\",\
  out: app.winRetapply,\
  success: function(resp) {\
    app.winRetapply.close();\
    Wb.info(\"申请成功\");\
  }\
});"}
   },
   {
    "configs": {
     "layout": "@{type:'table',columns:2}",
     "itemId": "winFix",
     "dialog": "true",
     "defaults": "{\
  labelWidth: 80,\
  width: 200,\
  margin: '8 8 0 8'\
}",
     "closeAction": "destroy",
     "width": "460",
     "title": "修箱申请",
     "height": "190"
    },
    "expanded": false,
    "children": [
     {
      "configs": {
       "itemId": "REQ_TIME",
       "labelAlign": "right",
       "fieldLabel": "要求时间"
      },
      "expanded": false,
      "children": [],
      "type": "date"
     },
     {
      "configs": {
       "itemId": "REP_COM",
       "labelAlign": "right",
       "pickList": "[\
  ['WNH', '万年红修柜场'],\
  ['MF', '珉丰修柜区'],\
  ['JH', '金辉修柜场']\
]",
       "fieldLabel": "修箱公司"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "CNTR",
       "labelAlign": "right",
       "fieldLabel": "箱号"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CNTR_OPERATOR",
       "labelAlign": "right",
       "fieldLabel": "箱代理"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CNTR_OWNER",
       "labelAlign": "right",
       "fieldLabel": "箱主"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CNTR_OPERATOR_COD",
       "hidden": "true",
       "labelAlign": "right"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "ID",
       "hidden": "true"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "NOTE",
       "labelAlign": "right",
       "fieldLabel": "备注"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CNTR_ID",
       "hidden": "true"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "APPLY_UNIT",
       "labelAlign": "right",
       "fieldLabel": "申请单位"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     }
    ],
    "type": "window",
    "events": {"ok": "Wb.request({\
  url: \"m?xwl=controlManage/portcntr/portcntredit/fixedit\",\
  out: app.winFix,\
  success: function(resp) {\
    app.winFix.close();\
    Wb.info(\"申请成功\");\
  }\
});"}
   },
   {
    "configs": {
     "layout": "@{type:'table',columns:1}",
     "itemId": "cntrWin",
     "dialog": "true",
     "defaults": "{\
  labelWidth: 80,\
  width: 200,\
  margin: '8 8 0 8'\
}",
     "closeAction": "destroy",
     "width": "300",
     "title": "箱状态修改",
     "height": "230"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "itemId": "E_F_ID",
       "pickList": "\
[[\"E\",\"空\"],[\"F\",\"重\"]]",
       "fieldLabel": "空重"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "I_E_ID",
       "pickList": "\
[[\"I\",\"进口\"],[\"E\",\"出口\"]]",
       "fieldLabel": "进出口"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "YARD_POSITION",
       "fieldLabel": "位置"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "PHASE",
       "pickList": "\
[[\"ADV\",\"预报\"],[\"ACT\",\"在场\"],[\"OUT\",\"出闸\"],[\"DEP\",\"装船\"]]",
       "fieldLabel": "状态",
       "keyName": "E_F_ID"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "CNTR_OPERATOR_COD",
       "fieldLabel": "驳船"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CNTR_ID",
       "hidden": "true"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     }
    ],
    "type": "window",
    "events": {"ok": "Wb.request({\
  url: \"m?xwl=controlManage/portcntr/portcntredit/cntrStateEdit\",\
  out: app.cntrWin,\
  success: function(resp) {\
    app.cntrWin.close();\
    Wb.info(\"修改成功\");\
  }\
});"}
   },
   {
    "configs": {
     "layout": "border",
     "itemId": "viewport1"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "layout": "absolute",
       "itemId": "panel1",
       "width": "1080",
       "region": "north",
       "height": "44"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "fieldKey",
         "labelAlign": "right",
         "pickList": "[\
  [\"CNTR\", \"箱号\"],\
  [\"CNTR_SIZE\", \"尺寸\"],\
  [\"CNTR_TYPE\", \"类型\"],\
  [\"YARD_POSITION\", \"位置\"],\
  [\"TRADE_ID\", \"内外贸\"],\
  [\"I_E_ID\", \"进出口\"],\
  [\"BILL_NO\", \"提单号码\"],\
  [\"E_F_ID\", \"空重\"],\
  [\"CONDITION_ID\", \"残损\"],\
  [\"IN_PORT_TIME\", \"进口时间\"]\
]",
         "fieldLabel": "选择",
         "x": "8",
         "width": "240",
         "y": "8",
         "labelWidth": "80",
         "value": "CNTR",
         "height": "22"
        },
        "expanded": true,
        "children": [],
        "type": "combo",
        "events": {"select": "if (records[0].data.field1 === 'E_F_ID') {\
  app.efId.show();\
  app.fieldValue.hide();\
} else {\
  app.efId.hide();\
  app.fieldValue.show();\
}"}
       },
       {
        "configs": {
         "itemId": "efId",
         "pickList": "[\
  [\"E\",\"吉箱\"],\
  [\"F\",\"重箱\"],\
  [\"P\",\"拼箱\"]\
]",
         "width": "240",
         "x": "256",
         "y": "8",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "combo"
       },
       {
        "configs": {
         "itemId": "fieldValue",
         "x": "256",
         "width": "240",
         "y": "8",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text",
        "events": {"specialkey": "// app.findBtn.fireEvent('click');"}
       },
       {
        "configs": {
         "itemId": "findButton",
         "x": "504",
         "width": "40",
         "y": "8",
         "text": "搜索",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "if (app.fieldKey.getValue() == \"IN_PORT_TIME\") {\
  var reg = /^(\\d{4})-(\\d{2})-(\\d{2})$/;\
  //输入的日期\
  var str = app.fieldValue.getValue();\
  //用正则表达匹配\
  var arr = reg.exec(str);\
  if (!reg.test(str) && RegExp.$2 <= 12 && RegExp.$3 <= 31) {\
    Wb.warn(\"请保证输入的为yyyy-mm-dd日期格式\");\
    return;\
  }\
  var dd = str.split(\"-\");\
  var y = Number(dd[0]);\
  var m = Number(dd[1]);\
  var d = Number(dd[2]);\
  var d2 = new Date(y, 2, 0);\
  if (m > 12) {\
    Wb.warn(\"月份不合法\");\
    return;\
  }\
  if ((m == 1 || m == 3 || m == 5 || m == 7 || m == 8 || m == 10 || m == 12) && d > 31) {\
    Wb.warn(\"日不合法\");\
    return;\
  }\
  if ((m == 4 || m == 6 || m == 9 || m == 11) && d > 30) {\
    Wb.warn(\"日不合法\");\
    return;\
  }\
  if (m == 2 && d > d2.getDate()) {\
    Wb.warn(\"日不合法\");\
    return;\
  }\
}\
app.grid1.store.load({\
  out: app.panel1\
});\
\
\
\
\
//1、show win\t2、点击添加3、getcmp\
// alert(app.moreXwl.counnts);\
// alert(app.yardposition.fieldLabel);\
// if(!Wb.isEmpty(app.yardposition)){\
//   \tapp.moreXwl.item1.fireEvent('click');\
//  alert(Ext.getCmp(\"R_1\").getValue());\
// \tExt.getCmp(\"R_1\").setValue('or');\
//   Ext.getCmp(\"R_1\").setValue('or');\
//   Ext.getCmp(\"R_1\").setValue('or');\
//   Ext.getCmp(\"R_1\").setValue('or');\
// }"}
       },
       {
        "configs": {
         "itemId": "findButton1",
         "x": "552",
         "width": "70",
         "y": "8",
         "text": "搜索配载",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "if (app.fieldKey.getValue() == \"IN_PORT_TIME\") {\
  var reg = /^(\\d{4})-(\\d{2})-(\\d{2})$/;\
  //输入的日期\
  var str = app.fieldValue.getValue();\
  //用正则表达匹配\
  var arr = reg.exec(str);\
  if (!reg.test(str) && RegExp.$2 <= 12 && RegExp.$3 <= 31) {\
    Wb.warn(\"请保证输入的为yyyy-mm-dd日期格式\");\
    return;\
  }\
  var dd = str.split(\"-\");\
  var y = Number(dd[0]);\
  var m = Number(dd[1]);\
  var d = Number(dd[2]);\
  var d2 = new Date(y, 2, 0);\
  if (m > 12) {\
    Wb.warn(\"月份不合法\");\
    return;\
  }\
  if ((m == 1 || m == 3 || m == 5 || m == 7 || m == 8 || m == 10 || m == 12) && d > 31) {\
    Wb.warn(\"日不合法\");\
    return;\
  }\
  if ((m == 4 || m == 6 || m == 9 || m == 11) && d > 30) {\
    Wb.warn(\"日不合法\");\
    return;\
  }\
  if (m == 2 && d > d2.getDate()) {\
    Wb.warn(\"日不合法\");\
    return;\
  }\
}\
app.grid1.store.load({\
  params:{\
  \tflag:1\
  }\
});\
\
\
\
\
//1、show win\t2、点击添加3、getcmp\
// alert(app.moreXwl.counnts);\
// alert(app.yardposition.fieldLabel);\
// if(!Wb.isEmpty(app.yardposition)){\
//   \tapp.moreXwl.item1.fireEvent('click');\
//  alert(Ext.getCmp(\"R_1\").getValue());\
// \tExt.getCmp(\"R_1\").setValue('or');\
//   Ext.getCmp(\"R_1\").setValue('or');\
//   Ext.getCmp(\"R_1\").setValue('or');\
//   Ext.getCmp(\"R_1\").setValue('or');\
// }"}
       },
       {
        "configs": {
         "itemId": "find",
         "x": "632",
         "width": "75",
         "y": "8",
         "text": "自定义搜索",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "console.log(app.moreXwl.selWin);\
app.moreXwl.moreGrid=app.grid1;\
app.moreXwl.selWin.show();\
\
\
// if(!Wb.isEmpty(app.cntrs.getValue())){\
// //   alert(1);\
  \
//   \tapp.moreXwl.item1.fireEvent('click');\
// //   \talert(Ext.getCmp(\"COLUMN_\"+1).getValue());//null//箱号\
//   \tExt.getCmp(\"COLUMN_\"+1).setValue(\"CNTR\");\
//   \tExt.getCmp(\"VALUE_\"+1).setValue(app.cntrs.getValue());\
//   \tExt.getCmp(\"OPERATOR_\"+1).setValue('=');\
  \
// }else{\
// \tExt.getCmp(\"DEL_\"+1).fireEvent('click');\
  \t\
// }\
// if(!Wb.isEmpty(app.size.getValue())){\
// //   alert(2);\
// \tapp.moreXwl.item1.fireEvent('click');\
//   Ext.getCmp(\"COLUMN_\"+2).setValue(app.size.fieldLabel);\
//   Ext.getCmp(\"VALUE_\"+2).setValue(app.size.getValue());\
//   Ext.getCmp(\"OPERATOR_\"+2).setValue('包含字符');\
// }\
// if(!Wb.isEmpty(app.yardposition.getValue())){\
// //   alert(3);\
// \tapp.moreXwl.item1.fireEvent('click');\
//   Ext.getCmp(\"COLUMN_\"+4).setValue(app.yardposition.fieldLabel);\
//   Ext.getCmp(\"VALUE_\"+4).setValue(app.yardposition.getValue());\
//   Ext.getCmp(\"OPERATOR_\"+4).setValue('包含字符');\
// }\
// if(!Wb.isEmpty(app.types.getValue())){\
// //   alert(4);\
// \tapp.moreXwl.item1.fireEvent('click');\
//   \tExt.getCmp(\"COLUMN_\"+3).setValue(app.types.fieldLabel);\
//   \tExt.getCmp(\"VALUE_\"+3).setValue(app.types.getValue());\
//   \tExt.getCmp(\"OPERATOR_\"+3).setValue('包含字符');\
// }\
"}
       },
       {
        "configs": {
         "itemId": "find1",
         "hidden": "'{#sys.TENANCY_ID#}'!='XLG'",
         "x": "888",
         "width": "75",
         "y": "8",
         "text": "小榄放行",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "Wb.request({\
  url: 'm?xwl=controlManage/portcntr/portcntredit/fangxl',\
  params: {},\
  success: function(resp) {Wb.info('成功');}\
});"}
       },
       {
        "configs": {
         "itemId": "find11",
         "hidden": "'{#sys.TENANCY_ID#}'!='XLG'",
         "x": "720",
         "width": "75",
         "y": "8",
         "text": "小榄同步数据",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "Wb.request({\
  url: 'm?xwl=controlManage/portcntr/portcntredit/fangxl1',\
  params: {},\
  success: function(resp) {Wb.info('成功');}\
});"}
       },
       {
        "configs": {
         "itemId": "find111",
         "hidden": "'{#sys.TENANCY_ID#}'!='XLG'",
         "x": "800",
         "width": "75",
         "y": "8",
         "text": "小榄新增箱",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "Wb.request({\
  url: 'm?xwl=controlManage/portcntr/portcntredit/fangxl2',\
  params: {},\
  success: function(resp) {Wb.info('成功');}\
});"}
       }
      ],
      "type": "panel"
     },
     {
      "configs": {
       "itemId": "grid1",
       "selType": "checkboxmodel",
       "region": "center",
       "multiSelect": "true"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "tbar",
         "enableOverflow": "true",
         "hidden": "true",
         "region": "north"
        },
        "expanded": false,
        "children": [
         {
          "configs": {
           "itemId": "cntr",
           "hidden": "true",
           "labelAlign": "right",
           "fieldLabel": "箱号",
           "labelWidth": "40"
          },
          "expanded": false,
          "children": [],
          "type": "text"
         },
         {
          "configs": {
           "itemId": "findBtn",
           "tooltip": "查找一条数据",
           "text": "搜索",
           "iconCls": "seek_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "app.grid1.store.load({\
\tout:app.panel1\
});"}
         },
         {
          "configs": {
           "itemId": "clearBtn",
           "text": "清空",
           "iconCls": "file_txt_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
Wb.run({\
  url: 'm?xwl=controlManage/portcntr/control-module',\
  params:{ID:sels[0].data.ID},\
  success: function(appnew) {\
    var win = new Ext.window.Window(appnew._cntrWin); \
    win.show();\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "destroy",
           "text": "核销",
           "iconCls": "anonymous_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
// alert(sels[0].data.PHASE);\
if(sels[0].data.PHASE==6 || sels[0].data.PHASE==7){\
Wb.confirmDo(sels, function() {\
  Wb.request({\
    url: 'm?xwl=controlManage/portcntr/portcntredit/delete',\
    params: {\
      destroy: Wb.getData(sels, true)\
    },\
    success: function() {\
      Wb.remove(app.grid1, sels);\
    }\
  });\
}, 'CNTR');\
  //插入另一个表的东西\
  Wb.request({\
    url: 'm?xwl=controlManage/portcntr/portcntredit/insertHis',\
    params: {\
    \tcntr:sels[0].data.CNTR\
    },\
    success: function(resp) {}\
  });\
}else{\
\tWb.warn('状态不对');\
}"}
         },
         {
          "configs": {
           "itemId": "item1",
           "text": "-"
          },
          "expanded": false,
          "children": [],
          "type": "item"
         }
        ],
        "type": "toolbar"
       },
       {
        "configs": {
         "itemId": "store",
         "autoLoad": "true",
         "sorters": "'ID'",
         "url": "m?xwl=controlManage/portcntr/portcntredit/select"
        },
        "expanded": false,
        "children": [],
        "type": "store"
       },
       {
        "configs": {"itemId": "columns"},
        "expanded": false,
        "children": [
         {
          "configs": {
           "itemId": "ID99",
           "hidden": "true",
           "dataIndex": "ID",
           "text": "主键",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR99",
           "dataIndex": "CNTR",
           "text": "箱号",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "E_F_ID99",
           "dataIndex": "E_F_ID",
           "keyName": "E_F_ID",
           "width": "40",
           "text": "空重",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "YARD_POSITION99",
           "dataIndex": "YARD_POSITION",
           "width": "70",
           "text": "堆场位置",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "PHASE99",
           "dataIndex": "PHASE",
           "keyName": "IN_YARD_TYPE",
           "width": "40",
           "text": "状态(1 预报 2在场 3再车 4离港 5核销)",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "RELEASE_ID991",
           "renderer": "\
if(value==1){\
  metaData.tdAttr = 'style=\"background:#0023DD;\"';\
return '<input type=\"checkbox\" name=\"vehicle\" checked=\"checked\" /> ';}\
else\
  return '<input type=\"checkbox\" name=\"vehicle\"   /> ';\
\
",
           "xtype": "checkcolumn",
           "dataIndex": "RELEASE_ID",
           "width": "50",
           "disabled": "true",
           "text": "海关放行",
           "titleAlign": "center"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "SEND_EDI05943",
           "renderer": "if(value=='1'){\
//   metaData.tdAttr = 'style=\"background:#0023DD;\"';\
return '<input type=\"checkbox\" name=\"vehicle\" checked=\"checked\" /> ';}\
else\
  return '<input type=\"checkbox\" name=\"vehicle\"   /> ';",
           "xtype": "checkcolumn",
           "dataIndex": "SEND_EDI",
           "width": "50",
           "disabled": "true",
           "text": "空箱申报",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "colCIQ_ID",
           "renderer": "if (value == 1) {\
  return '<input type=\"checkbox\" name=\"vehicle\" checked=\"checked\" /> ';\
} else\
  return '<input type=\"checkbox\" name=\"vehicle\"   /> ';",
           "xtype": "checkcolumn",
           "dataIndex": "CIQ_ID",
           "width": "40",
           "text": "商检放行",
           "titleAlign": "center"
          },
          "expanded": true,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "LOCK_ID99",
           "renderer": "if (value == \"KOU\")\
  return \"扣箱\";\
else\
  return \"正常\";",
           "dataIndex": "LOCK_ID",
           "width": "40",
           "text": "扣箱",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR_ISO99",
           "dataIndex": "CNTR_ISO",
           "width": "50",
           "text": "箱ISO",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR_SIZE99",
           "dataIndex": "CNTR_SIZE",
           "width": "40",
           "text": "尺寸",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR_TYPE99",
           "dataIndex": "CNTR_TYPE",
           "width": "40",
           "text": "类型",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "TRADE_ID99",
           "dataIndex": "TRADE_ID",
           "keyName": "TRADE_ID",
           "width": "40",
           "text": "内外贸",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "I_E_ID99",
           "dataIndex": "I_E_ID",
           "keyName": "I_E_ID",
           "width": "40",
           "text": "进出口",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR_OWNER99",
           "dataIndex": "CNTR_OWNER_COD",
           "width": "70",
           "text": "箱主",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR_OPERATOR991",
           "dataIndex": "CNTR_OPERATOR_COD",
           "width": "70",
           "text": "箱代理",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "LINE99",
           "hidden": "true",
           "dataIndex": "LINE",
           "width": "70",
           "text": "大船公司",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "IB_MODE99",
           "dataIndex": "I_VESSEL_NAME",
           "width": "160",
           "text": "进口船号",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CATEGORY_ID99",
           "dataIndex": "E_VESSEL_NAME",
           "width": "160",
           "text": "出口船号",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR_HIGHT99",
           "dataIndex": "CNTR_HIGHT",
           "text": "箱高",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CNTR_LENGTH99",
           "dataIndex": "CNTR_LENGTH",
           "text": "箱长",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "SHIP_NO99",
           "dataIndex": "SHIP_NO",
           "text": "船号",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "ARR_POSITION99",
           "dataIndex": "ARR_POSITION",
           "text": "船上位置/车位置",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "PLANNED_POSITION99",
           "dataIndex": "PLANNED_POSITION",
           "text": "计划位置",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CY_AREA_NO99",
           "dataIndex": "CY_AREA_NO",
           "text": "场",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CY_BAY_NO99",
           "dataIndex": "CY_BAY_NO",
           "text": "呗",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CY_ROW_NO99",
           "dataIndex": "CY_ROW_NO",
           "text": "排",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CY_TIER_NO99",
           "dataIndex": "CY_TIER_NO",
           "text": "层",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CARGO_WT99",
           "dataIndex": "CARGO_WT",
           "text": "货重",
           "align": "right",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "WEIGHT99",
           "dataIndex": "WEIGHT",
           "text": "重量",
           "align": "right",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "DWELL_DAYS99",
           "dataIndex": "DWELL_DAYS",
           "text": "堆存天数",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CUSTOM_TYPE99",
           "dataIndex": "CUSTOM_TYPE",
           "text": "通关类型",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "TRANS_TYPE99",
           "dataIndex": "TRANS_TYPE",
           "text": "中转类型",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CONDITION_ID123",
           "xtype": "checkcolumn",
           "dataIndex": "CONDITION_ID",
           "width": "40",
           "text": "残损",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "UPDATED_ON99",
           "dataIndex": "UPDATED_ON",
           "text": "修改时间",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CREATED_ON99",
           "dataIndex": "CREATED_ON",
           "text": "创建时间",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "UPDATED_BY99",
           "dataIndex": "UPDATED_BY",
           "text": "修改人",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         },
         {
          "configs": {
           "itemId": "CREATED_BY99",
           "dataIndex": "CREATED_BY",
           "text": "创建人",
           "titleAlign": "center"
          },
          "expanded": false,
          "children": [],
          "type": "column"
         }
        ],
        "type": "array"
       },
       {
        "configs": {
         "itemId": "popupMenu",
         "normalName": "menu1"
        },
        "expanded": true,
        "children": [
         {
          "configs": {
           "itemId": "popupComp",
           "tooltip": "查看在场箱信息",
           "text": "查看在场箱信息",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "// app.window1.show();\
var sels = app.grid1.getSelection();\
// if (sels.length != 1) {\
//   Wb.warn('请选择 1 条需要修改的记录。');\
//   return;\
// }\
\
Wb.run({\
  url: 'm?xwl=controlManage/portcntr/control-module',\
  params: {\
    ID: sels[0].data.ID\
  },\
  success: function(appnew) {\
    var win = new Ext.window.Window(appnew._cntrWin);\
    app.test = appnew.test;\
  // win.setPosition(\"100\",\"400\");\
\
    win.show();\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "popupNtoW",
           "tooltip": "内贸转外贸",
           "text": "内贸转外贸",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length <= 0) {\
  Wb.warn(\"请选择在场箱\");\
  return;\
}\
var ids = \"\";\
Wb.each(sels, function(sel) {\
  if (sel.data.TRADE_ID == \"2\")\
    ids += \"'\" + sel.data.ID + \"',\";\
});\
if (Wb.isEmpty(ids))\
  ids = \"''\";\
else\
  ids = ids.substring(0, ids.length - 1);\
\
Wb.request({\
  url: \"m?xwl=controlManage/portcntr/portcntredit/cntrTrade\",\
  params: {\
    ids: ids,\
    nw: \"W\"\
  },\
  success: function(resp) {\
    Ext.Msg.confirm(\"系统提示\", \"是否移箱\", function(btn) {\
      if (btn == 'yes') {\
        app.popupMove.fireEvent(\"click\");\
        app.grid1.store.load({\
          out: app.panel1\
        });\
      } else {\
        app.grid1.store.load({\
          out: app.panel1\
        });\
      }\
    }, this);\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "popupWtoN",
           "tooltip": "外贸转内贸",
           "text": "外贸转内贸",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length <= 0) {\
  Wb.warn(\"请选择在场箱\");\
  return;\
}\
var ids = \"\";\
Wb.each(sels, function(sel) {\
  if (sel.data.TRADE_ID == \"1\")\
    ids += \"'\" + sel.data.ID + \"',\";\
});\
if (Wb.isEmpty(ids))\
  ids = \"''\";\
else\
  ids = ids.substring(0, ids.length - 1);\
\
Wb.request({\
  url: \"m?xwl=controlManage/portcntr/portcntredit/cntrTrade\",\
  params: {\
    ids: ids,\
    nw: \"N\"\
  },\
  success: function(resp) {\
    Ext.Msg.confirm(\"系统提示\", \"是否移箱\", function(btn) {\
      if (btn == 'yes') {\
        app.popupMove.fireEvent(\"click\");\
        app.grid1.store.load({\
          out: app.panel1\
        });\
      } else {\
        app.grid1.store.load({\
          out: app.panel1\
        });\
      }\
    }, this);\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "popupOperator",
           "tooltip": "更换箱代理",
           "text": "更换箱代理",
           "iconCls": "object_icon"
          },
          "expanded": true,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length <= 0) {\
  Wb.warn(\"请选择在场箱\");\
  return;\
}\
var ids = \"\";\
Wb.each(sels, function(sel) {\
  ids += \"'\" + sel.data.ID + \"',\";\
});\
if (Wb.isEmpty(ids))\
  ids = \"''\";\
else\
  ids = ids.substring(0, ids.length - 1);\
\
var win = new Ext.window.Window(app._opratorWin); //app._win指向配置对象而非实例\
win.setTitle(\"更换箱代理\");\
win.setIconCls('record_add_icon');\
win.show();\
app.ocntrids.setValue(ids);"}
         },
         {
          "configs": {
           "itemId": "popupMove",
           "tooltip": "生成移箱任务",
           "text": "生成移箱任务",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length <= 0) {\
  Wb.warn(\"请选择在场箱\");\
  return;\
}\
// Wb.setValue(app.moveXwl.taskWin,{date:Wb.dateToText(new Date()).split(\" \")[0]});\
// app.moveXwl.taskWin.show();\
// app.moveXwl.taskWin.cntrs = sels.map(function(sel){return sel.data.CNTR;});\
\
if (sels[0].data.E_F_ID != 'E') {\
  app.xwl1.isReceipt.hide();\
} else {\
  app.xwl1.isReceipt.show();\
}\
  app.xwl1.needTruck.setDisabled(true);\
\
Wb.setValue(app.xwl1.taskWin, {\
  date: Wb.dateToText(new Date()).split(\" \")[0],\
  cntrId: sels[0].data.ID\
});\
app.xwl1.taskWin.show();\
app.xwl1.taskWin.cntrs = sels.map(function(sel) {\
  return sel.data.CNTR;\
});"}
         },
         {
          "configs": {
           "itemId": "popupSJF",
           "text": "商检放行",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length <= 0) {\
  Wb.warn(\"请选择在场箱\");\
  return;\
}\
var ids = \"\";\
Wb.each(sels, function(sel) {\
  if (sel.data.CIQ_ID == \"0\")\
    ids += \"'\" + sel.data.ID + \"',\";\
});\
if (Wb.isEmpty(ids))\
  ids = \"''\";\
else\
  ids = ids.substring(0, ids.length - 1);\
\
Wb.request({\
  url: \"m?xwl=controlManage/portcntr/portcntredit/cntrSJF\",\
  params: {\
    ids: ids\
  },\
  success: function(resp) {\
    app.grid1.store.load({\
      out: app.panel1\
    });\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "popupCheck",
           "hidden": "true",
           "tooltip": "查验",
           "text": "查验",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length <= 0) {\
  Wb.warn(\"请选择在场箱\");\
  return;\
}\
var ids = \"\";\
var ids1 = \"\";\
Wb.each(sels, function(sel) {\
  ids += \"'\" + sel.data.ID + \"',\";\
  ids1 += sel.data.ID + \",\";\
});\
ids = ids.substring(0, ids.length - 1);\
ids1 = ids1.substring(0, ids1.length - 1);\
\
var win = new Ext.window.Window(app._checkWin); //app._win指向配置对象而非实例\
win.setTitle(\"查验\");\
//win.setIconCls('record_add_icon');\
win.show();\
app.CNTR_IDS.setValue(ids);\
app.CNTR_IDS1.setValue(ids1);\
app.APPLYTIME.setValue(new Date());\
if (app.IS_GB.getValue())\
  app.ISPONDERATION_PRJ.setValue(\"Y\");\
else\
  app.ISPONDERATION_PRJ.setValue(\"N\");\
app.CHECKYARDCELL.setValue(\"GI\");\
app.gridCheck.store.load({\
  params: {\
    cntrids: app.CNTR_IDS.getValue()\
  }\
});\
var tenancyid = \"{#sys.TENANCY_ID#}\";"}
         },
         {
          "configs": {
           "itemId": "popupCheck1",
           "tooltip": "箱位变更",
           "text": "箱位变更",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length != 1) {\
  Wb.warn(\"请选择一条在场箱记录\");\
  return;\
}\
\
var win = new Ext.window.Window(app._moveWin); //app._win指向配置对象而非实例\
win.setTitle(\"箱位变更\");\
win.show();\
app.OLD_POS.setValue(sels[0].data.YARD_POSITION);\
win.mon(win, 'ok', function() {\
        Wb.request({\
          url: 'm?xwl=yardManage/yardCtrl/moveCntr',\
          params: {CNTR:sels[0].data.CNTR,NEW_POS:app.NEW_POS.getValue(),MACH:'@@@'},\
          success: function(resp) {\
            Wb.info(\"成功\");\
            win.close();\
          }\
        });\
      });\
\
\
"}
         },
         {
          "configs": {
           "itemId": "popupRET",
           "tooltip": "核销申请",
           "text": "核销申请",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
var cntrids = \"\";\
Wb.each(sels, function(sel) {\
  cntrids += sel.data.ID + \",\";\
});\
cntrids = cntrids.substring(0, cntrids.length - 1);\
var win = new Ext.window.Window(app._winRetapply);\
win.show();\
app.RET_CNTRIDS.setValue(cntrids);"}
         },
         {
          "configs": {
           "itemId": "popupEmpty",
           "hidden": "true",
           "text": "空箱申报",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length <= 0) {\
  Wb.warn(\"请选择空箱\");\
  return;\
}\
\
var s = \"\",\
  state = true;\
var ids = new Array();\
var sels = app.grid1.getSelection();\
for (var i = 0; i < sels.length; i++) {\
  if (sels[i].data.E_F_ID === 'E') {\
    ids.push({\
      ID: sels[i].data.ID\
    });\
  } else {\
    s += sels[i].data.CNTR + \",\";\
    state = false;\
  }\
}\
Wb.request({\
  url: 'm?xwl=EDI/ediPro/emptyCntrPro',\
  params: {\
    ids: ids,\
    TENANCY_ID: sels[0].data.TENANCY_ID\
  },\
  success: function(resp) {\
    Wb.info(\"发送成功\");\
    if (state == false) {\
      Wb.warn(s + \"不符合\");\
    }\
  }\
});"}
         },
         {
          "configs": {
           "itemId": "popupFix",
           "text": "修箱申请",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
if (sels[0].data.CONDITION_ID == 0) {\
  Wb.warn(\"该箱无残损！\");\
  return;\
}\
var win = new Ext.window.Window(app._winFix);\
win.show();\
app.REQ_TIME.setValue(new Date());\
app.CNTR.setValue(sels[0].data.CNTR);\
app.CNTR_OPERATOR.setValue(sels[0].data.CNTR_OPERATOR);\
app.CNTR_OWNER.setValue(sels[0].data.CNTR_OWNER);\
app.CNTR_OPERATOR_COD.setValue(sels[0].data.CNTR_OPERATOR_COD);\
app.REP_COM.setValue('WNH');\
app.ID.setValue(sels[0].data.ID);\
app.CNTR_ID.setValue(sels[0].data.ID);"}
         },
         {
          "configs": {
           "itemId": "popupCntrBtn",
           "text": "箱状态修改",
           "iconCls": "object_icon"
          },
          "expanded": false,
          "children": [],
          "type": "item",
          "events": {"click": "var sels = app.grid1.getSelection();\
\
var win = new Ext.window.Window(app._cntrWin);\
win.show();\
app.E_F_ID.setValue(sels[0].data.E_F_ID);\
app.YARD_POSITION.setValue(sels[0].data.YARD_POSITION);\
app.PHASE.setValue(sels[0].data.PHASE);\
app.I_E_ID.setValue(sels[0].data.I_E_ID);\
\
app.CNTR_OPERATOR_COD.setValue(sels[0].data.CNTR_OPERATOR_COD);\
app.CNTR_ID.setValue(sels[0].data.ID);\
\
"}
         }
        ],
        "type": "menu",
        "events": {"show": "var rows = app.grid1.getSelection();\
menu.selectRow = rows[0];\
app.popupNtoW.setDisabled(rows.length < 1);\
app.popupWtoN.setDisabled(rows.length < 1);\
app.popupOperator.setDisabled(rows.length < 1);\
app.popupCheck.setDisabled(rows.length < 1);\
app.popupRET.setDisabled(rows.length < 1);\
app.popupMove.setDisabled(rows.length < 1||rows[0].data.YARD_POSITION==\"\");\
\
"}
       }
      ],
      "type": "grid"
     },
     {
      "configs": {
       "border": "false",
       "itemId": "panelPrintE",
       "width": "0",
       "region": "south",
       "height": "0"
      },
      "expanded": false,
      "children": [],
      "type": "panel"
     }
    ],
    "type": "viewport"
   }
  ],
  "type": "module",
  "events": {
   "finalize": "app.fieldValue.addListener(\"specialkey\", function(field, e) {\
  if (e.getKey() == e.ENTER)\
    app.findButton.fireEvent('click');\
});\
\
\
window[\"init\" + opt] = function(id) {\
  var m = document.getElementById(opt);\
\
m.func(\"setCookie\", \"JSESSIONID={#JSESSIONID#}\");\
\
  if (id == opt) {\
    m.func(\"Build\", '/supcan/report/print/receipt_E.xml?' + Math.round(Math.random() * 100));\
    m.func(\"SetSource\", \"m?xwl=system/common/report/reportTemplate/dataSource&dd=\"+  Math.round(Math.random() * 100));\
    m.func(\"DisableMenu\", \"showRuler,exportAll,printAll,delete,insert,import,curselMode,hue,language,enter\\r\\
 true\");\
  }\
};\
\
\
var mt1 = bldStr(\"LuxForm\", opt, \"\", \"99%\");\
app.panelPrintE.update(mt1);",
   "initialize": "Wb.apply(app, {\
  moreSql: function(moreSql) {\
    app.grid1.store.load({\
      params: {\
        moreSql: moreSql\
      }\
    });\
    app.moreXwl.selWin.hide();\
  }\
});\
var opt = Wb.getId();"
  }
 }],
 "roles": {
  "JTLD": 1,
  "CD": 1,
  "NMBC": 1,
  "SCANJB": 1,
  "xlczs": 1,
  "DHSHIP": 1,
  "xlcxjb": 1,
  "DCXK": 1,
  "XLLONG": 1,
  "ZSZKCZ": 1,
  "xlwmcgs": 1,
  "xlablh": 1,
  "JTQGB": 1,
  "xlczb": 1,
  "xlzk": 1,
  "WMBC": 1,
  "SWB": 1
 },
 "title": "箱管业务",
 "iconCls": "table_merge_cells_icon",
 "inframe": false,
 "pageLink": ""
}