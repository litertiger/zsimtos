{
 "hidden": false,
 "children": [{
  "configs": {
   "itemId": "module",
   "serverScript": "var nature1 = true,\
  nature2 = true,\
  nature = request.getSession().getAttribute('sys.NATURE'); //3码头5驳船\
// if(nature=='2'){\
//   nature1=true;\
//   nature2=false; \
// }\
// else if(nature=='3'||nature=='4'){\
//   nature1=false;\
//   nature2=true;\
// }\
// else{\
//   nature1=true;\
//   nature2=false; \
// }\
//码头2审核，驳船公司5申请\
if (nature == '2') {\
  nature1 = true;\
  nature2 = false;\
} else if (nature == '5') {\
  nature1 = false;\
  nature2 = true;\
} else {\
  nature1 = true;\
  nature2 = false;\
}\
\
app.set({\
  nature1: nature1,\
  nature2: nature2\
});"
  },
  "expanded": true,
  "children": [
   {
    "configs": {
     "layout": "absolute",
     "dialog": "true",
     "itemId": "customWin",
     "closeAction": "hide",
     "width": "816",
     "title": "新增客户",
     "height": "464"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "itemId": "ID",
       "hidden": "true",
       "x": "8",
       "width": "240",
       "y": "8",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "CODE",
       "allowBlank": "false",
       "labelAlign": "right",
       "vtype": "alpha",
       "fieldLabel": "客户代码",
       "width": "192",
       "x": "8",
       "y": "16",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text",
      "events": {"change": "text.setValue(newValue.toUpperCase());"}
     },
     {
      "configs": {
       "itemId": "NAME",
       "allowBlank": "false",
       "labelAlign": "right",
       "fieldLabel": "中文名称",
       "width": "376",
       "x": "184",
       "y": "16",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "SHORT_NAME",
       "labelAlign": "right",
       "fieldLabel": "中文简称",
       "width": "216",
       "x": "552",
       "y": "16",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "E_SHORT_NAME",
       "labelAlign": "right",
       "fieldLabel": "英文简称",
       "width": "208",
       "x": "352",
       "y": "48",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text",
      "events": {"change": "text.setValue(newValue.toUpperCase());"}
     },
     {
      "configs": {
       "itemId": "C_TYPE",
       "allowBlank": "false",
       "pickList": "[[4,'货主']]",
       "x": "328",
       "width": "192",
       "y": "80",
       "labelWidth": "70",
       "height": "24"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "AREA",
       "labelAlign": "right",
       "fieldLabel": "所属区域",
       "width": "216",
       "x": "552",
       "y": "80",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "ADDRESS",
       "allowBlank": "false",
       "labelAlign": "right",
       "fieldLabel": "联系地址",
       "width": "360",
       "x": "8",
       "y": "112",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "ABLETIME",
       "x": "648",
       "width": "120",
       "y": "48",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "date"
     },
     {
      "configs": {
       "itemId": "label1",
       "x": "582",
       "width": "88",
       "y": "48",
       "text": "有效时间：",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "label"
     },
     {
      "configs": {
       "itemId": "ZIP",
       "labelAlign": "right",
       "fieldLabel": "邮政编码",
       "width": "192",
       "x": "360",
       "y": "112",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "BIZ_LINKMAN",
       "labelAlign": "right",
       "fieldLabel": "业务联系人",
       "width": "216",
       "x": "552",
       "y": "112",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "TEL",
       "allowBlank": "false",
       "labelAlign": "right",
       "fieldLabel": "电话",
       "width": "192",
       "x": "8",
       "y": "144",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "TELEX",
       "labelAlign": "right",
       "fieldLabel": "电传",
       "width": "200",
       "x": "168",
       "y": "144",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "FAX",
       "labelAlign": "right",
       "fieldLabel": "传真",
       "width": "208",
       "x": "344",
       "y": "144",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "FINANCE_LINKMAN",
       "labelAlign": "right",
       "fieldLabel": "财务联系人",
       "width": "216",
       "x": "552",
       "y": "144",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "EMAIL",
       "labelAlign": "right",
       "fieldLabel": "email地址",
       "width": "328",
       "x": "8",
       "y": "176",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "EMAIL_FILE",
       "labelAlign": "right",
       "fieldLabel": "邮箱文件",
       "width": "208",
       "x": "344",
       "y": "176",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "WEBSITE",
       "labelAlign": "right",
       "fieldLabel": "网站地址",
       "width": "328",
       "x": "8",
       "y": "208",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "DEFAULT_PROTOCOL",
       "labelAlign": "right",
       "fieldLabel": "默认协议",
       "width": "328",
       "x": "8",
       "y": "240",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "REMARK",
       "labelAlign": "right",
       "fieldLabel": "备注",
       "width": "760",
       "x": "8",
       "y": "304",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "FILE_FORMAT",
       "labelAlign": "right",
       "fieldLabel": "文件格式",
       "width": "216",
       "x": "552",
       "y": "176",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "label11",
       "x": "570",
       "width": "88",
       "y": "240",
       "text": "协议有效期：",
       "height": "23"
      },
      "expanded": false,
      "children": [],
      "type": "label"
     },
     {
      "configs": {
       "itemId": "PROTOCOL_ABLETIME",
       "x": "648",
       "width": "120",
       "y": "240",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "date"
     },
     {
      "configs": {
       "itemId": "PAY_TYPE",
       "pickList": "[[1,'支票'], [2,'现金'], [3,'预售'], [4,'转账']]",
       "x": "104",
       "width": "136",
       "y": "272",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "ACCOUNT_TYPE",
       "pickList": "[[1,'即结'], [2,'月结']]",
       "x": "376",
       "width": "128",
       "y": "272",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "label21",
       "x": "40",
       "width": "64",
       "y": "272",
       "text": "付款方式：",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "label"
     },
     {
      "configs": {
       "itemId": "label211",
       "x": "312",
       "width": "64",
       "y": "272",
       "text": "结算方式：",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "label"
     },
     {
      "configs": {
       "itemId": "CREATEUSER",
       "labelAlign": "right",
       "fieldLabel": "录入人员",
       "width": "224",
       "x": "8",
       "y": "336",
       "labelWidth": "90",
       "disabled": "true",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "UPDATEUSER",
       "labelAlign": "right",
       "fieldLabel": "最近修改人",
       "width": "216",
       "x": "552",
       "y": "336",
       "labelWidth": "90",
       "disabled": "true",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "EMPTY_PRICE_TYPE",
       "pickList": "[[1,'免天方式'], [2,'按保有量'], [3,'箱管理费']]",
       "x": "440",
       "width": "112",
       "y": "208",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "combo"
     },
     {
      "configs": {
       "itemId": "label22",
       "x": "352",
       "width": "88",
       "y": "208",
       "text": "空箱计费方式：",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "label"
     },
     {
      "configs": {
       "itemId": "MIN_CONTAINER",
       "minValue": "0",
       "fieldLabel": "保有量",
       "x": "592",
       "width": "176",
       "y": "208",
       "labelWidth": "50",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "CREATETIME",
       "fieldLabel": "录入时间",
       "x": "256",
       "width": "272",
       "y": "336",
       "labelWidth": "60",
       "disabled": "true",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "datetime"
     },
     {
      "configs": {
       "itemId": "UPDATETIME",
       "fieldLabel": "最近修改时间",
       "x": "16",
       "width": "312",
       "y": "368",
       "labelWidth": "85",
       "disabled": "true",
       "height": "24"
      },
      "expanded": false,
      "children": [],
      "type": "datetime"
     },
     {
      "configs": {
       "itemId": "CREDIT_LIMIT",
       "fieldLabel": "信用额度",
       "x": "368",
       "width": "184",
       "y": "240",
       "labelWidth": "70",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "RESERVE_PRICE",
       "fieldLabel": "备用金额",
       "x": "576",
       "width": "192",
       "y": "272",
       "labelWidth": "70",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "number"
     },
     {
      "configs": {
       "itemId": "GOV_CODE",
       "allowBlank": "false",
       "labelAlign": "right",
       "fieldLabel": "工商注册码",
       "width": "288",
       "x": "8",
       "y": "80",
       "labelWidth": "90",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text",
      "events": {"change": "text.setValue(newValue.toUpperCase());"}
     },
     {
      "configs": {
       "itemId": "STATE_FLAG",
       "hidden": "true",
       "x": "408",
       "width": "240",
       "y": "376",
       "height": "22"
      },
      "expanded": false,
      "children": [],
      "type": "text"
     },
     {
      "configs": {
       "itemId": "E_CODE",
       "allowBlank": "false",
       "fieldLabel": "代码类型",
       "x": "28",
       "width": "268",
       "keyName": "ORG_CODE",
       "y": "48",
       "labelWidth": "70",
       "value": "USCI",
       "forceSelection": "true",
       "height": "23"
      },
      "expanded": true,
      "children": [],
      "type": "combo"
     }
    ],
    "type": "window",
    "events": {"ok": "app.GOV_CODE.setValue(app.GOV_CODE.getValue().replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''));\
\
var values = Wb.getValue(app.customWin);\
if (app.isEdit) {\
  //点击修改按钮的处理过程\
  Wb.request({\
    url: 'm?xwl=system/customer/customer-link/update',\
    params: Wb.applyIf(values, Wb.getData(app.selRec, true)), //合并窗口和记录数据作为参数，后者为默认值\
    success: function() {\
      //把窗口数据更新到选择记录中\
      Wb.update(app.selRec, values);\
      //隐藏对话框，在模块关闭时自动销毁对话框\
      app.customWin.close();\
      app.queryBtn.fireEvent('click');\
    }\
  });\
} else {\
  //点击添加按钮的处理过程\
  Wb.request({\
    url: 'm?xwl=system/customer/customer-link/insert',\
    out: app.customWin,\
    success: function(resp) {\
      //把服务器返回的数据合并窗口数据（公司名称等数据）添加到表格中\
      Wb.add(app.grid1, Wb.apply(Wb.decode(resp.responseText), values));\
      //隐藏对话框，在模块关闭时自动销毁对话框\
      app.customWin.close();\
      app.queryBtn.fireEvent('click');\
    }\
  });\
}"}
   },
   {
    "configs": {
     "layout": "border",
     "itemId": "viewport1"
    },
    "expanded": true,
    "children": [{
     "configs": {
      "layout": "border",
      "itemId": "panel1",
      "split": "true",
      "region": "center"
     },
     "expanded": true,
     "children": [
      {
       "configs": {
        "layout": "border",
        "itemId": "north_panel",
        "split": "true",
        "region": "center",
        "height": "300"
       },
       "expanded": true,
       "children": [
        {
         "configs": {
          "itemId": "toolbar1",
          "hidden": "false",
          "region": "north",
          "height": "35"
         },
         "expanded": false,
         "children": [
          {
           "configs": {
            "itemId": "name1",
            "fieldLabel": "客户名称",
            "width": "190",
            "labelWidth": "70"
           },
           "expanded": true,
           "children": [],
           "type": "text"
          },
          {
           "configs": {
            "itemId": "code1",
            "fieldLabel": "客户代码",
            "width": "190",
            "labelWidth": "70"
           },
           "expanded": true,
           "children": [],
           "type": "text",
           "events": {"change": "text.setValue(newValue.toUpperCase());"}
          },
          {
           "configs": {
            "itemId": "gov_code",
            "fieldLabel": "工商号",
            "width": "180",
            "labelWidth": "60"
           },
           "expanded": true,
           "children": [],
           "type": "text",
           "events": {"change": "text.setValue(newValue.toUpperCase());"}
          },
          {
           "configs": {
            "itemId": "createtime1",
            "fieldLabel": "创建时间起始",
            "width": "230",
            "labelWidth": "95"
           },
           "expanded": false,
           "children": [],
           "type": "date"
          },
          {
           "configs": {
            "itemId": "createtime2",
            "fieldLabel": "截止",
            "width": "190",
            "labelWidth": "40"
           },
           "expanded": false,
           "children": [],
           "type": "date"
          },
          {
           "configs": {
            "itemId": "IDS",
            "hidden": "true"
           },
           "expanded": false,
           "children": [],
           "type": "text"
          }
         ],
         "type": "toolbar"
        },
        {
         "configs": {
          "itemId": "toolbarBtn",
          "hidden": "false",
          "region": "north",
          "height": "30"
         },
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "queryBtn",
            "text": "查询",
            "iconCls": "ajax_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "\
app.grid1.store.load({\
  out: app.panel1\
});"}
          },
          {
           "configs": {
            "itemId": "addBtn",
            "hidden": "{#nature1#}",
            "text": "新增",
            "iconCls": "record_add_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "Wb.reset(app.customWin);\
app.C_TYPE.setValue(4);\
app.PAY_TYPE.setValue(2);\
app.STATE_FLAG.setValue('0');\
//app.REGEDIT_STATUS.setValue(0);\
app.customWin.setTitle('添加 - 客户');\
app.customWin.setIconCls('record_add_icon');\
app.customWin.show();\
app.isEdit = false; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性"}
          },
          {
           "configs": {
            "itemId": "editBtn",
            "hidden": "{#nature1#}",
            "text": "编辑",
            "iconCls": "record_edit_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length != 1) {\
  Wb.warn('请选择 1 条需要修改的记录。');\
  return;\
}\
app.selRec = sels[0];\
app.customWin.setTitle('修改 - ' + app.selRec.data.SERVICE_NAME);\
app.customWin.setIconCls('record_edit_icon');\
Wb.setValue(app.customWin, app.selRec.data);\
app.customWin.show();\
app.isEdit = true; //标识是否为添加或修改状态，在editWin的ok事件中用到此属性"}
          },
          {
           "configs": {
            "itemId": "delBtn",
            "hidden": "{#nature1#}",
            "text": "删除",
            "iconCls": "record_delete_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "Wb.del(app.grid1, {\
  url: 'm?xwl=system/customer/customer-link/delete',\
  //params: {company_id : app.company_id},\
  titleField: 'NAME'\
});"}
          },
          {
           "configs": {
            "itemId": "resetBtn",
            "text": "重置",
            "iconCls": "record_add_icon",
            "height": "22"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "\
Wb.reset(app.toolbar1);\
app.grid1.store.load({\
  out: app.panel1\
});"}
          },
          {
           "configs": {
            "itemId": "applyBtn",
            "hidden": "{#nature1#}",
            "text": "申请",
            "iconCls": "arrow_join_icon"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length != 1) {\
  Wb.warn('请选择 1 条的记录。');\
  return;\
}\
\
// if (sels[0].data.STATE_FLAG != '0') {\
//   Wb.warn(\"初始状态可以申请！\");\
//   return;\
// }\
\
if (sels[0].data.STATE_FLAG == '1' || sels[0].data.STATE_FLAG == '2') {\
  Wb.warn(\"初始状态可以申请！\");\
  return;\
}\
\
Wb.confirm('确认申请吗? ', function() {\
  Wb.request({\
    url: 'm?xwl=system/customer/customer-link/commit',\
    params: {\
      ID: sels[0].data.ID\
    },\
    success: function() {\
      app.grid1.store.load({\
        out: app.grid1\
      });\
    }\
  });\
});"}
          },
          {
           "configs": {
            "itemId": "checkBtn",
            "hidden": "{#nature2#}",
            "text": "审核",
            "iconCls": "check_icon"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length != 1) {\
  Wb.warn('请选择 1 条的记录。');\
  return;\
}\
\
//待审核状态\
if (sels[0].data.STATE_FLAG == '1') {\
  //如果有工商注册号，\
  if (sels[0].data.BCODE === null || sels[0].data.BCODE === '') {\
    Wb.request({\
//       url: 'm?xwl=system/customer/customer-link/update2',\
      url: 'm?xwl=system/customer/customer-link/update2',\
      params: {\
        USER_NAME: sels[0].data.CREATEUSER,\
        ID: sels[0].data.ID,\
        STATE_FLAGB: '2',\
        ID: sels[0].data.ID,\
        TENANCY_ID: '{#sys.TENANCY_ID#}',\
        C_ID: sels[0].data.ID,\
        CODE:sels[0].data.CODE,\
        code:sels[0].data.CODE\
      },\
      success: function() {\
        app.grid1.store.load({\
          out: app.panel1\
        });\
      }\
    });\
  } else {\
    Wb.request({\
      url: 'm?xwl=system/customer/customer-link/update1',\
      params: {\
        STATE_FLAGB: '2',\
        ID: sels[0].data.ID,\
        GOV_CODE: sels[0].data.GOV_CODE,\
        TENANCY_ID: '{#sys.TENANCY_ID#}',\
        CODE:sels[0].data.CODE,\
        code:sels[0].data.CODE\
      },\
      success: function() {\
        app.grid1.store.load({\
          out: app.panel1\
        });\
      }\
    });\
  }\
} else {\
  if (sels[0].data.STATE_FLAG == '2') {\
    Wb.warn('已审核成功！');\
  } else\
    Wb.warn('请先申请，再审核！');\
}"}
          },
          {
           "configs": {
            "itemId": "rejectBtn",
            "hidden": "{#nature2#}",
            "text": "驳回",
            "iconCls": "object_icon"
           },
           "expanded": false,
           "children": [],
           "type": "button",
           "events": {"click": "var sels = app.grid1.getSelection();\
if (sels.length != 1) {\
  Wb.warn('请选择 1 条的记录。');\
  return;\
}\
//待审核状态\
if (sels[0].data.STATE_FLAG == '1') {\
  Wb.request({\
    url: 'm?xwl=system/customer/customer-link/reject',\
    params: {\
      ID: sels[0].data.ID\
    },\
    success: function(resp) {\
      Wb.info(\"驳回成功！\");\
      app.queryBtn.fireEvent('click');\
    }\
  });\
} else if (sels[0].data.STATE_FLAG == '2') {\
  Wb.warn(\"已审核！\");\
  return;\
} else {\
  Wb.warn(\"未审核成功！\");\
  return;\
}"}
          }
         ],
         "type": "toolbar"
        },
        {
         "configs": {
          "itemId": "grid1",
          "region": "center",
          "height": "300"
         },
         "expanded": true,
         "children": [
          {
           "configs": {
            "itemId": "store",
            "autoLoad": "true",
            "url": "m?xwl=system/customer/customer-link/select"
           },
           "expanded": true,
           "children": [],
           "type": "store"
          },
          {
           "configs": {"itemId": "columns"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "stateFlagCol",
              "renderer": "if(value==0){\
\treturn '初始状态';\
}\
if(value==1){\
\treturn '待审核';\
}\
if(value==2){\
\treturn '已审核';\
}\
if(value==3){\
\treturn '驳回状态';\
}",
              "dataIndex": "STATE_FLAG",
              "text": "状态"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "id",
              "hidden": "true",
              "dataIndex": "ID",
              "text": "系统ID"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "code",
              "dataIndex": "CODE",
              "width": "150",
              "text": "客户代码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "orgNameCol",
              "dataIndex": "ORG_NAME",
              "width": "200",
              "text": "组织"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "name",
              "dataIndex": "NAME",
              "width": "200",
              "text": "中文名称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "short_name",
              "dataIndex": "SHORT_NAME",
              "text": "中文简称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "gov_code",
              "dataIndex": "GOV_CODE",
              "width": "150",
              "text": "工商注册码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "e_code",
              "dataIndex": "E_CODE",
              "text": "英文名称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "e_short_name",
              "dataIndex": "E_SHORT_NAME",
              "text": "英文简称"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "abletime",
              "dataIndex": "ABLETIME",
              "text": "有效时间"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "c_type",
              "renderer": "if(value == 1){\
    return \"集团\";\
}else if(value == 2){\
    return \"码头\";\
}else if(value == 3){\
    return \"船公司\";\
}else if(value == 4){\
    return \"货主\";\
}",
              "dataIndex": "C_TYPE",
              "text": "客户类型"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "area_code",
              "dataIndex": "AREA_CODE",
              "text": "区域代码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "area",
              "dataIndex": "AREA",
              "text": "所属区域"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "address",
              "dataIndex": "ADDRESS",
              "text": "联系地址"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "zip",
              "dataIndex": "ZIP",
              "text": "邮政编码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "biz_linkman",
              "dataIndex": "BIZ_LINKMAN",
              "text": "业务联系人"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "tel",
              "dataIndex": "TEL",
              "text": "电话"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "telex",
              "dataIndex": "TELEX",
              "text": "电传"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "fax",
              "dataIndex": "FAX",
              "text": "传真"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "finance_linkman",
              "dataIndex": "FINANCE_LINKMAN",
              "text": "财务联系人"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "email",
              "dataIndex": "EMAIL",
              "text": "email地址"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "email_file",
              "dataIndex": "EMAIL_FILE",
              "text": "邮箱文件"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "file_format",
              "dataIndex": "FILE_FORMAT",
              "text": "文件格式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "website",
              "dataIndex": "WEBSITE",
              "text": "网站地址"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "empty_price_type",
              "renderer": "if(value == 1){\
    return \"免天方式\";\
}else if(value == 2){\
    return \"按保有量\";\
}else if(value == 3){\
    return \"箱管理费\";\
}",
              "dataIndex": "EMPTY_PRICE_TYPE",
              "text": "空箱计费方式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "min_container",
              "dataIndex": "MIN_CONTAINER",
              "text": "保有量"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "default_protocol",
              "dataIndex": "DEFAULT_PROTOCOL",
              "text": "默认协议"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "credit_limit",
              "dataIndex": "CREDIT_LIMIT",
              "text": "信用额度"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "protocol_abletime",
              "dataIndex": "PROTOCOL_ABLETIME",
              "text": "协议有效期"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "pay_type",
              "renderer": "\
if(value == 1){\
    return \"支票\";\
}else if(value == 2){\
    return \"现金\";\
}else if(value == 3){\
    return \"预售\";\
}else if(value == 4){\
    return \"转账\";\
}",
              "dataIndex": "PAY_TYPE",
              "text": "付款方式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "account_type",
              "renderer": "if(value == 1){\
    return \"即结\";\
}else if(value == 2){\
    return \"月结\";\
}",
              "dataIndex": "ACCOUNT_TYPE",
              "text": "结算方式"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "reserve_price",
              "dataIndex": "RESERVE_PRICE",
              "text": "备用金额"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "remark",
              "dataIndex": "REMARK",
              "text": "备注"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "state_flagb",
              "dataIndex": "STATE_FLAGB",
              "text": "备注"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "createuser",
              "dataIndex": "CREATEUSER",
              "keyName": "WB_USER",
              "text": "录入员"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "createtime",
              "dataIndex": "CREATETIME",
              "width": "120",
              "text": "录入时间"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "updateuser",
              "dataIndex": "UPDATEUSER",
              "keyName": "WB_USER",
              "text": "最近修改人"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "updatetime",
              "dataIndex": "UPDATETIME",
              "width": "120",
              "text": "最近修改时间"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "regedit_status",
              "hidden": "true",
              "dataIndex": "REGEDIT_STATUS",
              "text": "申请状态"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "bcode",
              "hidden": "true",
              "dataIndex": "BCODE",
              "text": "工商注册号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }
           ],
           "type": "array"
          }
         ],
         "type": "grid",
         "events": {
          "itemclick": "app.grid11.store.load({\
   params:{c:record.data.ID}\
});",
          "itemdblclick": "app.editBtn.fireEvent('click');"
         }
        }
       ],
       "type": "panel"
      },
      {
       "configs": {
        "layout": "border",
        "itemId": "south_panel",
        "split": "true",
        "region": "south",
        "height": "250"
       },
       "expanded": false,
       "children": [
        {
         "configs": {
          "itemId": "toolbar11",
          "region": "north",
          "height": "30"
         },
         "expanded": false,
         "children": [
          {
           "configs": {
            "itemId": "add",
            "tooltip": "增加记录",
            "text": "增加",
            "iconCls": "record_add_icon"
           },
           "expanded": false,
           "children": [],
           "type": "item",
           "events": {"click": "var rec = app.grid1.getSelection()[0];\
if (!rec) {\
  Wb.warn('请选择一条记录。');\
  return;\
}\
Wb.addEdit(app.grid11, {\
  C_ID: rec.data.ID,\
  GOV_CODE: rec.data.GOV_CODE,\
  ORG_ID: '{#sys.ORG_ID#}',\
  CREATED_MAN: '{#sys.username#}',\
  UPDATED_MAN: '{#sys.username#}',\
  CREATED_ON: new Date(),\
  UPDATED_ON: new Date()\
});"}
          },
          {
           "configs": {
            "itemId": "delete",
            "tooltip": "删除记录",
            "text": "删除",
            "iconCls": "record_delete_icon"
           },
           "expanded": false,
           "children": [],
           "type": "item",
           "events": {"click": "Wb.remove(app.grid11);"}
          },
          {
           "configs": {
            "itemId": "save",
            "tooltip": "保存记录",
            "text": "保存",
            "iconCls": "save_icon"
           },
           "expanded": false,
           "children": [],
           "type": "item",
           "events": {"click": "if (!Wb.verifyGrid(app.grid11)) //验证数据是否合法\
  return;\
Wb.sync({\
  grid: app.grid11,\
  url: 'm?xwl=system/customer/customer-link/save',\
  message: '正在保存中...',\
  success: function(resp) {\
    //ID_FIELD值在后台生成，把返回的ID_FIELD值列表同步到表格中\
    Wb.syncCreate(app.grid11, Wb.decode(resp.responseText));\
  }\
});"}
          }
         ],
         "type": "toolbar"
        },
        {
         "configs": {
          "itemId": "grid11",
          "editable": "true",
          "region": "center"
         },
         "expanded": false,
         "children": [
          {
           "configs": {
            "itemId": "store",
            "autoLoad": "true",
            "url": "m?xwl=system/customer/customer-link/selectLink"
           },
           "expanded": false,
           "children": [],
           "type": "store"
          },
          {
           "configs": {"itemId": "columns"},
           "expanded": true,
           "children": [
            {
             "configs": {
              "itemId": "id1",
              "hidden": "true",
              "dataIndex": "ID"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "cId",
              "hidden": "true",
              "dataIndex": "C_ID"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "govCode",
              "dataIndex": "GOV_CODE",
              "text": "工商注册号"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "cusName",
              "dataIndex": "CUS_NAME",
              "text": "顾客"
             },
             "expanded": false,
             "children": [{
              "configs": {"itemId": "editor"},
              "expanded": false,
              "children": [],
              "type": "text"
             }],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "tel",
              "dataIndex": "TEL",
              "text": "电话名"
             },
             "expanded": true,
             "children": [{
              "configs": {"itemId": "editor"},
              "expanded": false,
              "children": [],
              "type": "text"
             }],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "email1",
              "dataIndex": "EAMIL",
              "text": "邮件"
             },
             "expanded": true,
             "children": [{
              "configs": {"itemId": "editor"},
              "expanded": false,
              "children": [],
              "type": "text"
             }],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "linkName",
              "dataIndex": "LINK_NAME",
              "text": "联系人"
             },
             "expanded": true,
             "children": [{
              "configs": {"itemId": "editor"},
              "expanded": false,
              "children": [],
              "type": "text"
             }],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "tenancyId",
              "hidden": "true",
              "dataIndex": "TENANCY_ID"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "orgId1",
              "hidden": "true",
              "dataIndex": "ORG_ID",
              "text": "组织机构代码"
             },
             "expanded": true,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "createdMan",
              "dataIndex": "CREATED_MAN",
              "text": "创建人"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "createdOn",
              "dataIndex": "CREATED_ON",
              "text": "创建时间"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "updatedMan",
              "dataIndex": "UPDATED_MAN",
              "text": "修改人"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            },
            {
             "configs": {
              "itemId": "updatedOn",
              "dataIndex": "UPDATED_ON",
              "text": "修改时间"
             },
             "expanded": false,
             "children": [],
             "type": "column"
            }
           ],
           "type": "array"
          }
         ],
         "type": "grid"
        }
       ],
       "type": "panel"
      }
     ],
     "type": "panel"
    }],
    "type": "viewport"
   }
  ],
  "type": "module",
  "events": {"finalize": "// alert('{#nature1#}'+'{#nature2#}');\
// alert('{#sys.NATURE#}');"}
 }],
 "roles": {
  "xlwmcgs": 1,
  "DHSHIP": 1,
  "xlcxjb": 1,
  "SWB": 1
 },
 "title": "驳船客户申请",
 "iconCls": "",
 "inframe": false,
 "pageLink": ""
}