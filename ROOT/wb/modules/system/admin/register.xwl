{
 "hidden": true,
 "children": [{
  "configs": {"itemId": "module"},
  "expanded": true,
  "children": [
   {
    "configs": {
     "layout": "absolute",
     "itemId": "window1",
     "focusControl": "licText",
     "minButtonWidth": "100",
     "resizable": "false",
     "closable": "contextOwner!==undefined",
     "width": "544",
     "autoShow": "true",
     "title": "注册 WebBuilder",
     "iconCls": "system_icon",
     "modal": "true",
     "height": "368"
    },
    "expanded": true,
    "children": [
     {
      "configs": {
       "stretch": "false",
       "itemId": "image1",
       "src": "wb/images/app/setup.jpg",
       "width": "162",
       "x": "0",
       "y": "0",
       "height": "312"
      },
      "expanded": false,
      "children": [],
      "type": "image"
     },
     {
      "configs": {
       "layout": "absolute",
       "itemId": "panel1",
       "flat": "true",
       "width": "360",
       "x": "166",
       "y": "2",
       "height": "304"
      },
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "descComp",
         "width": "344",
         "x": "8",
         "y": "8",
         "height": "168"
        },
        "expanded": false,
        "children": [],
        "type": "comp"
       },
       {
        "configs": {
         "allowBlank": "false",
         "itemId": "licText",
         "labelAlign": "right",
         "fieldLabel": "被授权人",
         "width": "312",
         "x": "16",
         "y": "184",
         "labelWidth": "80",
         "value": "{#Var.sys.app.licensee#}",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "allowBlank": "false",
         "itemId": "snText",
         "labelAlign": "right",
         "fieldLabel": "序列号",
         "width": "312",
         "x": "16",
         "y": "216",
         "labelWidth": "80",
         "value": "{#Var.sys.app.serialNumber#}",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "text"
       },
       {
        "configs": {
         "itemId": "getSnLabel",
         "labelAlign": "right",
         "width": "312",
         "x": "16",
         "y": "248",
         "html": "<a href=\"http://www.putdb.com/enterprise\" target=\"_blank\">获取正式企业版本<\/a>",
         "height": "22"
        },
        "expanded": false,
        "children": [],
        "type": "label"
       }
      ],
      "type": "panel",
      "events": {"afterrender": "var text;\
if ('{#Var.sys.app.versionType#}' == 'e') {\
  text = '<div style=\"line-height:1.8\">' +\
    '<h2>注册 WebBuilder<\/h2>' +\
    '<hr class=\"wb_hr\">' +\
    '<p>WebBuilder 企业版具有强大的功能和高效稳定的系统，为应用系统的开发带来完美的解决方案。请在以下输入框中输入产品注册信息，然后点击 [立即注册] 按钮。<\/p>' +\
    '<\/div>';\
} else {\
  app.licText.setDisabled(true);\
  app.snText.setDisabled(true);\
  app.registerBtn.setDisabled(true);\
  app.verifyBtn.setDisabled(true);\
  text = '<div style=\"line-height:1.8\">' +\
    '<h2>注册 WebBuilder<\/h2>' +\
    '<hr class=\"wb_hr\">' +\
    '<p>该版本为功能简化及有使用时间限制的试用版本，用于评估和学习目的。商业使用请<a href=\"http://www.putdb.com/enterprise\" target=\"_blank\">获取 WebBuilder 正式企业版本<\/a>，企业版本具有强大的功能和高效稳定的系统，为应用系统的开发带来完美的解决方案。<\/p>' +\
    '<\/div>';\
}\
app.descComp.update(text);"}
     },
     {
      "configs": {"itemId": "buttons"},
      "expanded": true,
      "children": [
       {
        "configs": {
         "itemId": "registerBtn",
         "tooltip": "立即把序列号写入系统文件",
         "text": "立即注册",
         "iconCls": "record_icon"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "if (!Wb.verify(app.panel1)) return;\
Wb.confirm('确定要写入这些注册信息吗？', function() {\
  Wb.request({\
    url: 'm?xwl=system/admin/register/register',\
    out: app.panel1,\
    success: function() {\
      Wb.info('已经把注册信息写入系统文件。请点击 [在线验证] 按钮在线验证序列号有效性。');\
    }\
  });\
});"}
       },
       {
        "configs": {
         "itemId": "verifyBtn",
         "tooltip": "在线验证序列号是否有效",
         "text": "在线验证",
         "iconCls": "check_icon"
        },
        "expanded": false,
        "children": [],
        "type": "button",
        "events": {"click": "var sn = app.snText.getValue();\
Wb.request({\
  url: 'm?xwl=system/admin/register/verify',\
  out: app.snText,\
  success: function() {\
    Wb.info('验证成功，序列号 \u201c' + sn + '\u201d 有效。');\
  }\
});"}
       }
      ],
      "type": "array"
     }
    ],
    "type": "window"
   },
   {
    "configs": {
     "itemId": "viewport1",
     "style": "background-color:#787878;"
    },
    "expanded": false,
    "children": [],
    "type": "viewport"
   }
  ],
  "type": "module"
 }],
 "roles": {},
 "title": "注册 WebBuilder",
 "iconCls": "registration_icon",
 "inframe": false,
 "pageLink": "{container:false}"
}